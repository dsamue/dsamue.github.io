(function(a,d){"object"===typeof exports?module.exports=d(a):"function"===typeof define&&define.amd?define("seriously",function(){var e=d(a);a.Seriously||(a.Seriously=e);return e}):"function"!==typeof a.Seriously&&(a.Seriously=d(a))})(this,function(a,d){function e(c,a){var b,d;if("string"===typeof c)b=l.querySelector(c);else if(!c)return!1;c.tagName&&(b=c);if(!b)return c;d=b.tagName.toLowerCase();return a&&0>a.indexOf(d)?c:b}function b(c,a){var d,e;c.prototype&&a.prototype&&c.prototype!==a.prototype&&
b(c.prototype,a.prototype);for(d in a)a.hasOwnProperty(d)&&(e=Object.getOwnPropertyDescriptor(a,d),e.get||e.set?Object.defineProperty(c,d,{configurable:!0,enumerable:!0,get:e.get,set:e.set}):c[d]=a[d]);return c}function m(c,a,b,d,p){function e(c,a,b){b%=1;0>b&&(b+=1);return b<1/6?c+(a-c)*b*6:0.5>b?a:b<2/3?c+(a-c)*(2/3-b)*6:c}a=0.5>b?b*(a+1):b+a-b*a;b=2*b-a;p||(p=[]);p[0]=e(b,a,c+1/3);p[1]=e(b,a,c);p[2]=e(b,a,c-1/3);p[3]=d;return p}function t(c){function b(){F.length&&F.shift()()}if("function"!==typeof c)throw"setTimeoutZero argument is not a function";
F.push(c);"file:"===a.location.protocol?setTimeout(b,0):a.postMessage("seriously-timeout-message",a.location)}function q(c){return Array.isArray(c)||c&&c.BYTES_PER_ELEMENT&&"length"in c}function h(){var c;if(v||!a.WebGLRenderingContext)return v;c=l.createElement("canvas");try{v=c.getContext("webgl")}catch(b){}if(!v)try{v=c.getContext("experimental-webgl")}catch(e){}v?c.addEventListener("webglcontextlost",function(c){c.preventDefault();v&&v.canvas===this&&(v=d)},!1):u.log("Unable to access WebGL.");
return v}function f(c){function a(c){return c}var b="render initialize original plugin alias prototype destroy isDestroyed".split(" "),e,p;for(p in c.inputs)if(c.inputs.hasOwnProperty(p)){if(0<=b.indexOf(p)||Object.prototype[p])throw"Reserved effect input name: "+p;e=c.inputs[p];isNaN(e.min)&&(e.min=-Infinity);isNaN(e.max)&&(e.max=Infinity);isNaN(e.minCount)&&(e.minCount=-Infinity);isNaN(e.maxCount)&&(e.maxCount=Infinity);isNaN(e.step)&&(e.step=0);if(e.defaultValue===d||null===e.defaultValue)e.defaultValue=
"number"===e.type?Math.min(Math.max(0,e.min),e.max):"color"===e.type?[0,0,0,0]:"enum"===e.type?e.options&&e.options.length?e.options[0]:"":"boolean"===e.type?!1:"";"vector"===e.type?2>e.dimensions?e.dimensions=2:4<e.dimensions?e.dimensions=4:!e.dimensions||isNaN(e.dimensions)?e.dimensions=4:e.dimensions=Math.round(e.dimensions):e.dimensions=1;e.shaderDirty=!!e.shaderDirty;"function"!==typeof e.validate&&(e.validate=g.inputValidators[e.type]||a);c.defaultImageInput||"image"!==e.type||(c.defaultImageInput=
p)}}function n(c,a,b,d){var e,g;this.type=c.UNSIGNED_BYTE;e=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,e);d&&d.texture?(this.texture=d.texture,c.bindTexture(c.TEXTURE_2D,this.texture),this.ownTexture=!1):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,
c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),this.ownTexture=!0);try{this.type===c.FLOAT?(g=new Float32Array(a*b*4),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,b,0,c.RGBA,c.FLOAT,g)):(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,b,0,c.RGBA,c.UNSIGNED_BYTE,null),this.type=c.UNSIGNED_BYTE)}catch(f){this.type=c.UNSIGNED_BYTE,g=new Uint8Array(a*b*4),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,b,0,c.RGBA,c.UNSIGNED_BYTE,g)}d=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,d);c.renderbufferStorage(c.RENDERBUFFER,
c.DEPTH_COMPONENT16,a,b);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,d);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this.texture,0);g=c.checkFramebufferStatus(c.FRAMEBUFFER);if(g===c.FRAMEBUFFER_INCOMPLETE_ATTACHMENT)throw"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT";if(g===c.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT)throw"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";if(g===c.FRAMEBUFFER_INCOMPLETE_DIMENSIONS)throw"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS";
if(g===c.FRAMEBUFFER_UNSUPPORTED)throw"Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED";if(g!==c.FRAMEBUFFER_COMPLETE)throw"Incomplete framebuffer: "+g;c.bindTexture(c.TEXTURE_2D,null);c.bindRenderbuffer(c.RENDERBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,null);this.gl=c;this.frameBuffer=e;this.renderBuffer=d;this.width=a;this.height=b}function k(c,a,b){function d(a,b){var e,p;e=b?c.createShader(c.FRAGMENT_SHADER):c.createShader(c.VERTEX_SHADER);c.shaderSource(e,a);c.compileShader(e);if(!c.getShaderParameter(e,
c.COMPILE_STATUS)){a=a.split(/[\n\r]/);for(p=0;p<a.length;p++)a[p]=p+1+":\t"+a[p];u.log(a.join("\n"));throw"Shader error: "+c.getShaderInfoLog(e);}return e}function e(a,b){if(a.type===c.SAMPLER_2D)return function(d){a.glTexture=c["TEXTURE"+d];c.uniform1i(b,d)};if(a.type===c.BOOL||a.type===c.INT)return 1<a.size?function(a){c.uniform1iv(b,a)}:function(a){c.uniform1i(b,a)};if(a.type===c.FLOAT)return 1<a.size?function(a){c.uniform1fv(b,a)}:function(a){c.uniform1f(b,a)};if(a.type===c.FLOAT_VEC2)return function(a){c.uniform2f(b,
a[0],a[1])};if(a.type===c.FLOAT_VEC3)return function(a){c.uniform3f(b,a[0],a[1],a[2])};if(a.type===c.FLOAT_VEC4)return function(a){c.uniform4f(b,a[0],a[1],a[2],a[3])};if(a.type===c.FLOAT_MAT3)return function(a){c.uniformMatrix3fv(b,!1,a)};if(a.type===c.FLOAT_MAT4)return function(a){c.uniformMatrix4fv(b,!1,a)};throw"Unknown shader uniform type: "+a.type;}function g(a){return function(){return c.getUniform(f,a)}}var f,k,l,n="";k=d(a);l=d(b,!0);f=c.createProgram();c.attachShader(f,k);(a=c.getShaderInfoLog(k))&&
(n+="Vertex shader error: "+a+"\n");c.attachShader(f,l);(a=c.getShaderInfoLog(l))&&(n+="Fragment shader error: "+a+"\n");c.linkProgram(f);if(!c.getProgramParameter(f,c.LINK_STATUS))throw n+=c.getProgramInfoLog(f),c.deleteProgram(f),c.deleteShader(k),c.deleteShader(l),"Could not initialise shader: "+n;c.useProgram(f);this.uniforms={};a=c.getProgramParameter(f,c.ACTIVE_UNIFORMS);for(n=0;n<a;++n)b={info:c.getActiveUniform(f,n)},b.name=b.info.name,b.loc=c.getUniformLocation(f,b.name),b.set=e(b.info,b.loc),
b.get=g(b.loc),this.uniforms[b.name]=b,this[b.name]||(this[b.name]=b);this.attributes={};this.location={};a=c.getProgramParameter(f,c.ACTIVE_ATTRIBUTES);for(n=0;n<a;++n)b={info:c.getActiveAttrib(f,n)},b.name=b.info.name,b.location=c.getAttribLocation(f,b.name),this.attributes[b.name]=b,this.location[b.name]=b.location;this.gl=c;this.program=f;this.destroy=function(){var a;c&&(c.deleteProgram(f),c.deleteShader(k),c.deleteShader(l));for(a in this)this.hasOwnProperty(a)&&delete this[a];l=k=f=null}}function g(c){function w(a,
c){var b,d,e;if(!c)return!1;b=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,b);c.bufferData(c.ARRAY_BUFFER,a.vertices,c.STATIC_DRAW);b.size=3;d=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,d);c.bufferData(c.ELEMENT_ARRAY_BUFFER,a.indices,c.STATIC_DRAW);e=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,e);c.bufferData(c.ARRAY_BUFFER,a.coords,c.STATIC_DRAW);e.size=2;return{vertex:b,index:d,texCoord:e,length:a.indices.length,mode:a.mode||c.TRIANGLES}}function B(a){var c={};c.vertices=new Float32Array([-1,
-1,0,1,-1,0,1,1,0,-1,1,0]);c.indices=new Uint16Array([0,1,2,0,2,3]);c.coords=new Float32Array([0,0,1,0,1,1,0,1]);return w(c,a)}function h(){var a,c,b,e=!1;$=null;if(J.length)for(e=!0,a=0;a<J.length;a++)J[a].call(m);if(K&&K.length)for(e=!0,a=0;a<K.length;a++)if(c=K[a],b=c.source,c.lastRenderTime===d||c.dirty||b.currentTime!==d&&c.lastRenderTime!==b.currentTime)c.dirty=!1,c.setDirty();for(a=0;a<V.length;a++)c=V[a],c.auto&&c.dirty&&c.render();if(da.length)for(e=!0,a=0;a<da.length;a++)da[a].call(m);e&&
!$&&($=W(h))}function p(a,c,b,e,p,g){var f=0,k,w,l=p&&p.gl||r;if(l){p?(w=g&&g.width||p.width||l.canvas.width,p=g&&g.height||p.height||l.canvas.height):(w=g&&g.width||l.canvas.width,p=g&&g.height||l.canvas.height);a.use();l.viewport(0,0,w,p);l.bindFramebuffer(l.FRAMEBUFFER,e);l.enableVertexAttribArray(a.location.position);l.enableVertexAttribArray(a.location.texCoord);c.texCoord&&(l.bindBuffer(l.ARRAY_BUFFER,c.texCoord),l.vertexAttribPointer(a.location.texCoord,c.texCoord.size,l.FLOAT,!1,0,0));l.bindBuffer(l.ARRAY_BUFFER,
c.vertex);l.vertexAttribPointer(a.location.position,c.vertex.size,l.FLOAT,!1,0,0);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,c.index);g&&g.depth?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST);!g||g.blend===d||g.blend?(r.enable(r.BLEND),r.blendFunc(g&&g.srcRGB||r.ONE,g&&g.dstRGB||r.ONE_MINUS_SRC_ALPHA),r.blendEquation(g&&g.blendEquation||r.FUNC_ADD)):r.disable(r.BLEND);for(k in b)b.hasOwnProperty(k)&&(e=b[k],w=a.uniforms[k])&&(e instanceof WebGLTexture?(l.activeTexture(l.TEXTURE0+f),l.bindTexture(l.TEXTURE_2D,
e),w.set(f),f++):e instanceof X||e instanceof R||e instanceof S?e.texture&&(l.activeTexture(l.TEXTURE0+f),l.bindTexture(l.TEXTURE_2D,e.texture),w.set(f),f++):e!==d&&null!==e&&w.set(e));if(!g||g.clear===d||g.clear)l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT);l.drawElements(c.mode,c.length,l.UNSIGNED_SHORT,0);r.enable(r.DEPTH_TEST)}}function q(a,c,b){var d,g;if("string"!==typeof a||!c&&0!==c)b&&"object"===typeof b||(b=c),c=a;"string"===typeof a&&M[a]||(a=null);if(c instanceof
X||c instanceof R||c instanceof S)d=c;else if(c instanceof ma||c instanceof na||c instanceof oa){if(d=L[c.id],!d)throw"Cannot connect a foreign node";}else{"string"===typeof c&&isNaN(c)&&(c=e(c,["canvas","img","video"]));for(g=0;g<K.length;g++)if(d=K[g],(!a||a===d.hook)&&d.compare&&d.compare(c,b))return d;d=new X(a,c,b)}return d}function v(a,c){var b,d,e;if(!(a instanceof R||a instanceof S))return!1;if(a===c)return!0;e=a.sources;for(b in e)if(e.hasOwnProperty(b)&&(d=e[b],d===c||v(d,c)))return!0;return!1}
if(a===this||!(this instanceof g))return new g(c);var D=++x,m=this,F=[],L={},A=0,K=[],V=[],pa=[],fa=[],aa={},J=[],da=[],r,Y,ca={},ba,ga,ha,N,X,R,S,Z,ma,na,oa,ra,sa=!1,ta=!1,$;N=function(){this.ready=!1;this.height=this.width=1;this.gl=r;this.uniforms={resolution:[this.width,this.height],transform:null};this.dirty=!0;this.isDestroyed=!1;this.seriously=m;this.listeners={};this.id=A;F.push(this);L[A]=this;A++};N.prototype.setReady=function(){var a;if(!this.ready&&(this.emit("ready"),this.ready=!0,this.targets))for(a=
0;a<this.targets.length;a++)this.targets[a].setReady()};N.prototype.setUnready=function(){var a;if(this.ready&&(this.emit("unready"),this.ready=!1,this.targets))for(a=0;a<this.targets.length;a++)this.targets[a].setUnready()};N.prototype.setDirty=function(){var a;if(!this.dirty&&(this.emit("dirty"),this.dirty=!0,this.targets))for(a=0;a<this.targets.length;a++)this.targets[a].setDirty()};N.prototype.initFrameBuffer=function(a){r&&(this.frameBuffer=new n(r,this.width,this.height,a))};N.prototype.readPixels=
function(a,c,b,e,g){if(!r)throw"Cannot read pixels until a canvas is connected";this.frameBuffer||this.initFrameBuffer();this.render();if(g===d)g=new Uint8Array(b*e*4);else if(!g instanceof Uint8Array)throw"Incompatible array type";r.bindFramebuffer(r.FRAMEBUFFER,this.frameBuffer.frameBuffer);r.readPixels(a,c,b,e,r.RGBA,r.UNSIGNED_BYTE,g);return g};N.prototype.resize=function(){var a,c;this.source?(a=this.source.width,c=this.source.height):this.sources&&this.sources.source?(a=this.sources.source.width,
c=this.sources.source.height):this.inputs&&this.inputs.width?(a=this.inputs.width,c=this.inputs.height||a):this.inputs&&this.inputs.height?a=c=this.inputs.height:c=a=1;a=Math.floor(a);c=Math.floor(c);if(this.width!==a||this.height!==c)this.width=a,this.height=c,this.emit("resize"),this.setDirty();this.uniforms&&this.uniforms.resolution&&(this.uniforms.resolution[0]=a,this.uniforms.resolution[1]=c);this.frameBuffer&&this.frameBuffer.resize&&this.frameBuffer.resize(a,c)};N.prototype.on=function(a,c){var b,
e=-1;a&&"function"===typeof c&&((b=this.listeners[a])?e=b.indexOf(c):b=this.listeners[a]=[],0>e&&b.push(c))};N.prototype.off=function(a,c){var b,e=-1;a&&"function"===typeof c&&(b=this.listeners[a])&&(e=b.indexOf(c),0<=e&&b.splice(e,1))};N.prototype.emit=function(a){var c=this.listeners[a];if(c&&c.length)for(a=0;a<c.length;a++)t(c[a])};N.prototype.destroy=function(){var a,c;delete this.gl;delete this.seriously;for(c in this.listeners)this.listeners.hasOwnProperty(c)&&delete this.listeners[c];for(a in this.uniforms)this.uniforms.hasOwnProperty(a)&&
delete this.uniforms[a];this.targets&&delete this.targets;this.frameBuffer&&this.frameBuffer.destroy&&(this.frameBuffer.destroy(),delete this.frameBuffer);a=F.indexOf(this);0<=a&&F.splice(a,1);delete L[this.id];this.isDestroyed=!0};ma=function(a){function c(a,b){var z,d,g,Q;g=k.effect.inputs[a];z=k.inputElements[a];"string"===typeof b&&isNaN(b)&&("enum"===g.type?(g.options&&g.options.filter&&(Q=String(b).toLowerCase(),d=g.options.filter(function(a){return"string"===typeof a&&a.toLowerCase()===Q||
a.length&&"string"===typeof a[0]&&a[0].toLowerCase()===Q}),d=d.length),d||(b=e(b,["select"]))):"number"===g.type||"boolean"===g.type?b=e(b,["input","select"]):"image"===g.type&&(b=e(b,["canvas","img","video"])));b instanceof HTMLInputElement||b instanceof HTMLSelectElement?(d=b.value,z&&z.element!==b&&(z.element.removeEventListener("change",z.listener,!0),z.element.removeEventListener("input",z.listener,!0),delete k.inputElements[a],z=null),z||(z={element:b,listener:function(a,c){return function(){var z,
d;z="checkbox"===b.type?b.checked:c.value;d=k.setInput(a,z);if("color"===g.type){var e,Q,p="#";for(e=0;4>e;e++)Q=Math.min(255,Math.round(255*d[e]||0)),p+=Q.toString(16);d=p}d!==z&&(c.value=d)}}(a,b)},k.inputElements[a]=z,"range"===b.type&&b.addEventListener("input",z.listener,!0),b.addEventListener("change",z.listener,!0)),z&&"checkbox"===b.type&&(d=b.checked)):(z&&(z.element.removeEventListener("change",z.listener,!0),z.element.removeEventListener("input",z.listener,!0),delete k.inputElements[a]),
d=b);k.setInput(a,d);return k.inputs[a]}function b(a){return function(b){return(b=c(a,b))&&b.pub}}function g(a){return function(){var c=k.inputs[a];return c&&c.pub}}function p(a){return function(b){return c(a,b)}}function f(a){return function(){return k.inputs[a]}}var l,k=a;for(l in k.effect.inputs)if(k.effect.inputs.hasOwnProperty(l))if(this[l]===d)"image"===k.effect.inputs[l].type?Object.defineProperty(this,l,{configurable:!0,enumerable:!0,get:g(l),set:b(l)}):Object.defineProperty(this,l,{configurable:!0,
enumerable:!0,get:f(l),set:p(l)});else throw"Cannot overwrite Seriously."+l;Object.defineProperties(this,{inputs:{enumerable:!0,configurable:!0,get:function(){return{source:{type:"image"}}}},original:{enumerable:!0,configurable:!0,get:function(){return k.source}},width:{enumerable:!0,configurable:!0,get:function(){return k.width}},height:{enumerable:!0,configurable:!0,get:function(){return k.height}},id:{enumerable:!0,configurable:!0,get:function(){return k.id}}});this.render=function(){k.render();
return this};this.readPixels=function(a,c,b,z,d){return k.readPixels(a,c,b,z,d)};this.on=function(a,c){k.on(a,c)};this.off=function(a,c){k.off(a,c)};this.alias=function(a,c){k.alias(a,c);return this};this.matte=function(a){k.matte(a)};this.destroy=function(){var a,c;k.destroy();for(a in this)this.hasOwnProperty(a)&&"isDestroyed"!==a&&(c=Object.getOwnPropertyDescriptor(this,a),c.get||c.set||"function"!==typeof this[a]?delete this[a]:this[a]=y)};this.isDestroyed=function(){return k.isDestroyed};this.isReady=
function(){return k.ready}};R=function(a,c){var d,e,g=!1;N.call(this,c);this.effectRef=C[a];this.sources={};this.targets=[];this.inputElements={};this.shaderDirty=this.dirty=!0;this.hook=a;this.options=c;this.transform=null;if(this.effectRef.definition){this.effect=this.effectRef.definition.call(this,c);for(d in this.effectRef)this.effectRef.hasOwnProperty(d)&&!this.effect[d]&&(this.effect[d]=this.effectRef[d]);this.effect.inputs!==this.effectRef.inputs&&f(this.effect)}else this.effect=b({},this.effectRef);
this.uniforms.transform=s;this.inputs={};for(e in this.effect.inputs)this.effect.inputs.hasOwnProperty(e)&&(d=this.effect.inputs[e],this.inputs[e]=d.defaultValue,d.uniform&&(this.uniforms[d.uniform]=d.defaultValue),"image"===d.type&&(g=!0));r&&(this.initialize(),this.effect.commonShader&&this.buildShader());this.ready=!g;this.inPlace=this.effect.inPlace;this.pub=new ma(this);fa.push(this);E[a].push(this)};b(R,N);R.prototype.initialize=function(){if(!this.initialized){var a=this;this.baseShader=ba;
this.model=this.shape?w(this.shape,this.gl):Y;"function"===typeof this.effect.initialize?this.effect.initialize.call(this,function(){a.initFrameBuffer(!0)},r):this.initFrameBuffer(!0);this.frameBuffer&&(this.texture=this.frameBuffer.texture);this.initialized=!0}};R.prototype.resize=function(){var a;N.prototype.resize.call(this);this.effect.resize&&this.effect.resize.call(this);for(a=0;a<this.targets.length;a++)this.targets[a].resize()};R.prototype.setReady=function(){var a,c;if(!this.ready){for(c in this.effect.inputs)if(this.effect.inputs.hasOwnProperty(c)&&
(a=this.effect.inputs[c],!("image"!==a.type||this.sources[c]&&this.sources[c].ready)))return;this.ready=!0;this.emit("ready");if(this.targets)for(a=0;a<this.targets.length;a++)this.targets[a].setReady()}};R.prototype.setUnready=function(){var a,c;if(this.ready){for(c in this.effect.inputs)if(this.effect.inputs.hasOwnProperty(c)&&(a=this.effect.inputs[c],!("image"!==a.type||this.sources[c]&&this.sources[c].ready))){this.ready=!1;break}if(!this.ready&&(this.emit("unready"),this.targets))for(a=0;a<this.targets.length;a++)this.targets[a].setUnready()}};
R.prototype.setTarget=function(a){var c;for(c=0;c<this.targets.length;c++)if(this.targets[c]===a)return;this.targets.push(a)};R.prototype.removeTarget=function(a){a=this.targets&&this.targets.indexOf(a);0<=a&&this.targets.splice(a,1)};R.prototype.removeSource=function(a){var c,b=a&&a.pub;for(c in this.inputs)!this.inputs.hasOwnProperty(c)||this.inputs[c]!==a&&this.inputs[c]!==b||(this.inputs[c]=null);for(c in this.sources)!this.sources.hasOwnProperty(c)||this.sources[c]!==a&&this.sources[c]!==b||
(this.sources[c]=null)};R.prototype.buildShader=function(){var a,c=this.effect;this.shaderDirty&&(c.commonShader&&ca[this.hook]?(this.shader||ca[this.hook].count++,this.shader=ca[this.hook].shader):c.shader?(this.shader&&!c.commonShader&&this.shader.destroy(),a=c.shader.call(this,this.inputs,{vertex:ga,fragment:ha},g.util),this.shader=a instanceof k?a:a&&a.vertex&&a.fragment?new k(r,a.vertex,a.fragment):ba,c.commonShader&&(ca[this.hook]={count:1,shader:this.shader})):this.shader=ba,this.shaderDirty=
!1)};R.prototype.render=function(){function a(c,b,d,z,g,k){p(c,b,d,z,g||e,k)}var c,b,d=this.effect,e=this,g;this.initialized||this.initialize();this.shaderDirty&&this.buildShader();if(this.dirty){for(c in this.sources)!this.sources.hasOwnProperty(c)||d.requires&&!d.requires.call(this,c,this.inputs)||(g="function"===typeof this.inPlace?this.inPlace(c):this.inPlace,this.sources[c].render(!g));this.frameBuffer&&(b=this.frameBuffer.frameBuffer);"function"===typeof d.draw?(d.draw.call(this,this.shader,
this.model,this.uniforms,b,a),this.emit("render")):b&&(p(this.shader,this.model,this.uniforms,b,this),this.emit("render"));this.dirty=!1}return this.texture};R.prototype.setInput=function(a,c){var b,d,e;if(this.effect.inputs.hasOwnProperty(a)){b=this.effect.inputs[a];if("image"===b.type){if(c){if(c=q(c),c!==this.sources[a]){this.sources[a]&&this.sources[a].removeTarget(this);if(v(c,this))throw"Attempt to make cyclical connection.";this.sources[a]=c;c.setTarget(this)}}else delete this.sources[a],c=
!1;d=this.sources[a];e=Object.keys(this.sources);!0===this.inPlace&&1===e.length?(e=this.sources[e[0]],this.uniforms.transform=e&&e.cumulativeMatrix||s):this.uniforms.transform=s;this.resize()}else d=c=b.validate.call(this,c,b,this.inputs[a]);if(this.inputs[a]===c&&"color"!==b.type&&"vector"!==b.type)return c;this.inputs[a]=c;b.uniform&&(this.uniforms[b.uniform]=d);b.shaderDirty&&(this.shaderDirty=!0);c&&c.ready?this.setReady():this.setUnready();this.setDirty();b.update&&b.update.call(this,c);return c}};
R.prototype.alias=function(a,c){var b=this;if(0<=U.indexOf(c))throw c+" is a reserved name and cannot be used as an alias.";this.effect.inputs.hasOwnProperty(a)&&(c||(c=a),m.removeAlias(c),aa[c]={node:this,input:a},Object.defineProperty(m,c,{configurable:!0,enumerable:!0,get:function(){return b.inputs[a]},set:function(c){return b.setInput(a,c)}}));return this};R.prototype.matte=function(a){function c(a){var b,d,e,z,p,f=[],l;if(!a.simple){for(b=0;b<a.edges.length;b++)for(e=a.edges[b],d=b+1;d<a.edges.length;d++){z=
a.edges[d];a:{p=e[0];l=e[1];var w=z[0],Q=z[1],n=void 0,B=void 0,h=void 0,B=n=void 0,n=(Q.x-w.x)*(p.y-w.y)-(Q.y-w.y)*(p.x-w.x),B=(l.x-p.x)*(p.y-w.y)-(l.y-p.y)*(p.x-w.x);if(h=(Q.y-w.y)*(l.x-p.x)-(Q.x-w.x)*(l.y-p.y))if(n/=h,B/=h,0<n&&1>=n&&0<B&&1>=B){p={x:p.x+n*(l.x-p.x),y:p.y+n*(l.y-p.y)};break a}p=!1}p&&(p.edge1=e,p.edge2=z,f.push(p))}if(f.length){d=[];for(b=0;b<f.length;b++)p=f[b],e=p.edge1,z=p.edge2,l={x:p.x,y:p.y,prev:e[0],next:z[1],id:k.length},a.vertices.push(l),k.push(l),e={x:p.x,y:p.y,prev:z[0],
next:e[1],id:k.length},a.vertices.push(e),k.push(l),l.prev.next=l,l.next.prev=l,e.prev.next=e,e.next.prev=e;do{f={edges:[],vertices:[],simple:!0};d.push(f);e=z=a.vertices[0];do b=a.vertices.indexOf(z),a.vertices.splice(b,1),f.edges.push([z,z.next]),f.vertices.push(z),z=z.next;while(z!==e)}while(a.vertices.length);b=g.indexOf(a);g.splice(b,1);for(b=0;b<d.length;b++)g.push(d[b])}else a.simple=!0}}function b(a){var c,d,e=a.vertices.length,z,p=0;c=e-1;for(d=0;d<e;c=d,d++)c=a.vertices[c],z=a.vertices[d],
p+=c.x*z.y-z.x*c.y;return 0<p}function d(a){var c,b=a.vertices,e,z=[],g=[],f,l,k,w;e=b.length;if(a.clockWise)for(c=0;c<e;c++)z[c]=c;else for(c=0;c<e;c++)z[c]=e-1-c;f=2*e;l=0;for(c=e-1;2<e;){if(0>=f--)return g;k=c;e<=k&&(k=0);c=k+1;e<=c&&(c=0);w=c+1;e<w&&(w=0);var n;a:{var Q=n=void 0,B=void 0,h=void 0,u=void 0,Q=b[z[k]],B=b[z[c]],h=b[z[w]];if(0>(B.x-Q.x)*(h.y-Q.y)-(B.y-Q.y)*(h.x-Q.x))n=!1;else{for(n=0;n<e;n++)if(n!==k&&n!==c&&n!==w){var u=b[z[n]],r=void 0,q=void 0,v=void 0,t=void 0,s=void 0,m=void 0,
ea=void 0,y=void 0,D=void 0,T=void 0,qa=void 0,F=void 0,r=v=s=void 0,r=h.x-B.x,q=h.y-B.y,v=Q.x-h.x,t=Q.y-h.y,s=B.x-Q.x,m=B.y-Q.y,ea=u.x-Q.x,y=u.y-Q.y,D=u.x-B.x,T=u.y-B.y,qa=u.x-h.x,F=u.y-h.y,r=r*T-q*D,s=s*y-m*ea,v=v*F-t*qa;if(0<=r&&0<=v&&0<=s){n=!1;break a}}n=!0}}if(n){f=z[k];k=z[c];w=z[w];a.clockWise?(g.push(b[f]),g.push(b[k]),g.push(b[w])):(g.push(b[w]),g.push(b[k]),g.push(b[f]));l++;w=c;for(f=c+1;f<e;w++,f++)z[w]=z[f];e--;f=2*e}}p.indices=g}var e,g=[],p,k=[],f,l,n,B,u,h={};e=function(a){return a&&
a.length&&Array.isArray(a)?!Array.isArray(a[0])||Array.isArray(a[0])&&!isNaN(a[0][0])?[a]:a:[]}(a);for(f=0;f<e.length;f++){a=e[f];u=null;p={vertices:[],edges:[]};for(l=0;l<a.length;l++)n=a[l],"object"!==typeof n||isNaN(n.x)||isNaN(n.y)?2<=n.length&&!isNaN(n[0])&&!isNaN(n[1])&&(B={x:n[0],y:n[1],id:k.length}):B={x:n.x,y:n.y,id:k.length},B&&(u?(u.next=B,B.prev=u,B.next=p.vertices[0],p.vertices[0].prev=B):(p.head=B,B.next=B,B.prev=B),k.push(B),p.vertices.push(B),u=B);if(2<p.vertices.length)for(3===p.vertices.length&&
(p.simple=!0),g.push(p),l=0;l<p.vertices.length;l++)B=p.vertices[l],p.edges.push([B,B.next])}for(f=g.length-1;0<=f;f--)p=g[f],c(p);for(f=0;f<g.length;f++)p=g[f],p.clockWise=b(p),d(p);h.vertices=[];h.coords=[];for(f=0;f<k.length;f++)n=k[f],h.vertices.push(2*n.x-1),h.vertices.push(-2*n.y+1),h.vertices.push(-1),h.coords.push(n.x),h.coords.push(-1*n.y+1);h.vertices=new Float32Array(h.vertices);h.coords=new Float32Array(h.coords);h.indices=[];for(f=0;f<g.length;f++)for(p=g[f],l=0;l<p.indices.length;l++)n=
p.indices[l],h.indices.push(n.id);h.indices=new Uint16Array(h.indices);this.shape=h;this.gl&&w(h,this.gl)};R.prototype.destroy=function(){var a,c,b,e=this.hook;this.effect.destroy&&"function"===typeof this.effect.destroy&&this.effect.destroy.call(this);delete this.effect;ca[e]&&(ca[e].count--,ca[e].count||delete ca[e]);this.shader&&this.shader.destroy&&this.shader!==ba&&!ca[e]&&this.shader.destroy();delete this.shader;for(c in this.inputElements)this.inputElements.hasOwnProperty(c)&&(b=this.inputElements[c],
b.element.removeEventListener("change",b.listener,!0),b.element.removeEventListener("input",b.listener,!0));for(c in this.sources)this.sources.hasOwnProperty(c)&&((b=this.sources[c])&&b.removeTarget&&b.removeTarget(this),delete this.sources[c]);for(;this.targets.length;)(b=this.targets.pop())&&b.removeSource&&b.removeSource(this);for(a in this)this.hasOwnProperty(c)&&"id"!==c&&delete this[c];for(c in aa)aa.hasOwnProperty(c)&&(b=aa[c],b.node===this&&m.removeAlias(c));a=fa.indexOf(this);0<=a&&fa.splice(a,
1);a=E[e].indexOf(this);0<=a&&E[e].splice(a,1);N.prototype.destroy.call(this)};na=function(a){Object.defineProperties(this,{original:{enumerable:!0,configurable:!0,get:function(){return a.source}},id:{enumerable:!0,configurable:!0,get:function(){return a.id}}});this.render=function(){a.render()};this.update=function(){a.setDirty()};this.readPixels=function(c,b,e,d,p){return a.readPixels(c,b,e,d,p)};this.on=function(c,b){a.on(c,b)};this.off=function(c,b){a.off(c,b)};this.destroy=function(){var c,b;
a.destroy();for(c in this)this.hasOwnProperty(c)&&"isDestroyed"!==c&&(b=Object.getOwnPropertyDescriptor(this,c),b.get||b.set||"function"!==typeof this[c]?delete this[c]:this[c]=y)};this.isDestroyed=function(){return a.isDestroyed};this.isReady=function(){return a.ready}};X=function(a,c,p){function g(a,c,e,d){var p=M[a];if(p.definition)if(p=p.definition.call(q,c,e,d))p=b(b({},M[a]),p);else return null;return p}function f(a){return q.source===a}function l(){q.isDestroyed||(c.videoWidth?(q.width=c.videoWidth,
q.height=c.videoHeight,u&&q.setReady()):(u=!0,setTimeout(l,50)))}var k=p||{},w=k.flip===d?!0:k.flip,n=k.width,B=k.height,u=!1,q=this,v=!1,s,t;N.call(this);if(a&&"string"!==typeof a||!c&&0!==c)p&&"object"===typeof p||(p=c),c=a;"string"===typeof c&&isNaN(c)&&(c=e(c,["canvas","img","video"]));"string"===typeof a&&M[a]&&(t=g(a,c,p,!0))&&(this.hook=a,v=!0,u=t.deferTexture,this.plugin=t,this.compare=t.compare,t.source&&(c=t.source));if(!t&&c instanceof HTMLElement)"CANVAS"===c.tagName?(this.width=c.width,
this.height=c.height,this.render=this.renderImageCanvas,v=!0,this.hook="canvas",this.compare=f):"IMG"===c.tagName?(this.width=c.naturalWidth||1,this.height=c.naturalHeight||1,c.complete&&c.naturalWidth||(u=!0,c.addEventListener("load",function(){q.isDestroyed||(q.width=c.naturalWidth,q.height=c.naturalHeight,q.setReady())},!0)),this.render=this.renderImageCanvas,v=!0,this.hook="image",this.compare=f):"VIDEO"===c.tagName&&(c.readyState?l():(u=!0,c.addEventListener("loadedmetadata",l,!0)),this.render=
this.renderVideo,v=!0,this.hook="video",this.compare=f);else if(!t&&c instanceof WebGLTexture){if(r&&!r.isTexture(c))throw"Not a valid WebGL texture.";isNaN(n)?isNaN(B)||(n=B):isNaN(B)&&(B=n);this.width=n;this.height=B;k.flip===d&&(w=!1);v=!0;this.texture=c;this.initialized=!0;this.hook="texture";this.compare=f;this.render=function(){}}else if(!t)for(s in M)if(M.hasOwnProperty(s)&&M[s]&&(t=g(s,c,p,!1))){this.hook=s;v=!0;u=t.deferTexture;this.plugin=t;this.compare=t.compare;t.source&&(c=t.source);
break}if(!v)throw"Unknown source type";this.source=c;this.flip===d&&(this.flip=w);this.targets=[];u||q.setReady();this.pub=new na(this);K.push(this);G[this.hook].push(this);K.length&&!$&&h()};b(X,N);X.prototype.initialize=function(){var a;r&&!this.texture&&this.ready&&(a=r.createTexture(),r.bindTexture(r.TEXTURE_2D,a),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,
r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null),this.texture=a,this.allowRefresh=this.initialized=!0,this.setDirty())};X.prototype.initFrameBuffer=function(a){r&&(this.frameBuffer=new n(r,this.width,this.height,{texture:this.texture,useFloat:a}))};X.prototype.setTarget=function(a){var c;for(c=0;c<this.targets.length;c++)if(this.targets[c]===a)return;this.targets.push(a)};X.prototype.removeTarget=function(a){a=this.targets&&
this.targets.indexOf(a);0<=a&&this.targets.splice(a,1)};X.prototype.resize=function(){var a,c;this.uniforms.resolution[0]=this.width;this.uniforms.resolution[1]=this.height;this.framebuffer&&this.framebuffer.resize(this.width,this.height);this.emit("resize");this.setDirty();if(this.targets)for(a=0;a<this.targets.length;a++)c=this.targets[a],c.resize(),c.setTransformDirty&&c.setTransformDirty()};X.prototype.setReady=function(){var a;if(!this.ready&&(this.ready=!0,this.resize(),this.initialize(),this.emit("ready"),
this.targets))for(a=0;a<this.targets.length;a++)this.targets[a].setReady()};X.prototype.render=function(){var a=this.source;r&&(a||0===a)&&this.ready&&(this.initialized||this.initialize(),this.allowRefresh&&this.plugin&&this.plugin.render&&this.plugin.render.call(this,r,p,Y,ba)&&(this.dirty=!1,this.emit("render")))};X.prototype.renderVideo=function(){var c=this.source;if(r&&c&&c.videoHeight&&c.videoWidth&&!(2>c.readyState)&&this.ready&&(this.initialized||this.initialize(),this.allowRefresh&&(this.dirty||
this.lastRenderFrame!==c.mozPresentedFrames||this.lastRenderTime!==c.currentTime))){r.bindTexture(r.TEXTURE_2D,this.texture);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.flip);r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,c)}catch(b){b.code===a.DOMException.SECURITY_ERR&&(this.allowRefresh=!1,u.log("Unable to access cross-domain image"))}Date.now()-100>this.lastRenderTimeStamp&&(this.lastRenderTime=c.currentTime);this.lastRenderFrame=
c.mozPresentedFrames;this.lastRenderTimeStamp=Date.now();this.dirty=!1;this.emit("render")}};X.prototype.renderImageCanvas=function(){var c=this.source;if(r&&c&&this.ready&&(this.initialized||this.initialize(),this.allowRefresh&&this.dirty)){r.bindTexture(r.TEXTURE_2D,this.texture);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.flip);r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,c)}catch(b){b.code===a.DOMException.SECURITY_ERR&&(this.allowRefresh=
!1,u.log("Unable to access cross-domain image"))}this.lastRenderTime=Date.now()/1E3;this.dirty=!1;this.emit("render")}};X.prototype.destroy=function(){var a,c;this.plugin&&this.plugin.destroy&&this.plugin.destroy.call(this);for(r&&this.texture&&r.deleteTexture(this.texture);this.targets.length;)(a=this.targets.pop())&&a.removeSource&&a.removeSource(this);a=K.indexOf(this);0<=a&&K.splice(a,1);a=G[this.hook].indexOf(this);0<=a&&G[this.hook].splice(a,1);for(c in this)this.hasOwnProperty(c)&&"id"!==c&&
delete this[c];N.prototype.destroy.call(this)};ra=function(a){Object.defineProperties(this,{inputs:{enumerable:!0,configurable:!0,get:function(){return{source:{type:"image"}}}},source:{enumerable:!0,configurable:!0,get:function(){if(a.source)return a.source.pub},set:function(c){a.setSource(c)}},original:{enumerable:!0,configurable:!0,get:function(){return a.target}},width:{enumerable:!0,configurable:!0,get:function(){return a.width},set:function(c){!isNaN(c)&&0<c&&a.width!==c&&(a.width=a.desiredWidth=
c,a.target.width=c,a.setTransformDirty())}},height:{enumerable:!0,configurable:!0,get:function(){return a.height},set:function(c){!isNaN(c)&&0<c&&a.height!==c&&(a.height=a.desiredHeight=c,a.target.height=c,a.setTransformDirty())}},id:{enumerable:!0,configurable:!0,get:function(){return a.id}}});this.render=function(){a.render()};this.readPixels=function(c,b,e,d,p){return a.readPixels(c,b,e,d,p)};this.on=function(c,b){a.on(c,b)};this.off=function(c,b){a.off(c,b)};this.go=function(c){a.go(c)};this.stop=
function(){a.stop()};this.getTexture=function(){return a.frameBuffer.texture};this.destroy=function(){var c,b;a.destroy();for(c in this)this.hasOwnProperty(c)&&"isDestroyed"!==c&&(b=Object.getOwnPropertyDescriptor(this,c),b.get||b.set||"function"!==typeof this[c]?delete this[c]:this[c]=y)};this.isDestroyed=function(){return a.isDestroyed};this.isReady=function(){return a.ready}};Z=function(c,b){var e=b||{},p=e.flip===d?!0:e.flip,g=parseInt(e.width,10),f=parseInt(e.height,10),w=!1,h,u,q,t,v;N.call(this,
e);this.renderToTexture=e.renderToTexture;if("string"===typeof c){q=l.querySelectorAll(c);for(h=0;h<q.length&&(u=q[h],"CANVAS"!==u.tagName);h++);if(h>=q.length)throw"not a valid HTML element (must be image, video or canvas)";c=u}else if(c instanceof WebGLFramebuffer)if(v=c,e instanceof HTMLCanvasElement)c=e;else if(e instanceof WebGLRenderingContext)c=e.canvas;else if(e.canvas instanceof HTMLCanvasElement)c=e.canvas;else if(e.context instanceof WebGLRenderingContext)c=e.context.canvas;else throw"Must provide a canvas with WebGLFramebuffer target";
if(c instanceof HTMLElement&&"CANVAS"===c.tagName){g=c.width;f=c.height;try{t=a.WebGLDebugUtils?a.WebGLDebugUtils.makeDebugContext(c.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!0,stencil:!0})):c.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!0,stencil:!0})}catch(s){}if(!t)try{t=c.getContext("experimental-webgl",{alpha:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!0,stencil:!0})}catch(m){}if(t)if(r&&r!==t)t!==r&&(this.gl=t,this.frameBuffer=
v?{frameBuffer:v}:new n(this.gl,g,f,!1),this.shader=new k(this.gl,ga,ha),this.model=B.call(this,this.gl),this.texture=this.gl.createTexture(),this.gl.bindTexture(r.TEXTURE_2D,this.texture),this.gl.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),this.gl.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),this.gl.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),this.gl.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),this.render=this.renderSecondaryWebGL);else{if(!r){r=
t;Y=B(r);ba=new k(r,ga,ha);for(w=0;w<fa.length;w++)h=fa[w],h.gl=r,h.initialize(),h.buildShader();for(w=0;w<K.length;w++)h=K[w],h.initialize();for(w=0;w<V.length;w++)h=V[w],h.model||(h.model=Y)}this.render=this.renderWebGL;this.frameBuffer=e.renderToTexture?new n(r,g,f,!1):{frameBuffer:v||null}}else c.getContext("2d"),this.render=this.render2D,this.use2D=!0;w=!0}if(!w)throw"Unknown target type";this.target=c;this.transform=null;this.transformDirty=!0;this.flip=p;this.width=g;this.height=f;this.uniforms.resolution[0]=
this.width;this.uniforms.resolution[1]=this.height;this.auto=e.auto!==d?e.auto:sa;this.frames=0;this.pub=new ra(this);V.push(this)};b(Z,N);Z.prototype.setSource=function(a){a=q(a);a!==this.source&&(this.source&&this.source.removeTarget(this),this.source=a,a.setTarget(this),a&&a.ready?this.setReady():this.setUnready(),this.setDirty())};Z.prototype.setDirty=function(){this.dirty=!0;this.auto&&!$&&($=W(h))};Z.prototype.resize=function(){this.target instanceof HTMLCanvasElement&&(this.width!==this.target.width||
this.height!==this.target.height)&&(this.width=this.target.width,this.height=this.target.height,this.uniforms.resolution[0]=this.width,this.uniforms.resolution[1]=this.height,this.emit("resize"),this.setTransformDirty());!this.source||this.source.width===this.width&&this.source.height===this.height||this.transform||(this.transform=new Float32Array(16))};Z.prototype.setTransformDirty=function(){this.transformDirty=!0;this.setDirty()};Z.prototype.go=function(){this.auto=!0;this.setDirty()};Z.prototype.stop=
function(){this.auto=!1};Z.prototype.renderWebGL=function(){var a,c,b;this.resize();this.dirty&&this.source&&(this.source.render(),this.uniforms.source=this.source.texture,this.source.width===this.width&&this.source.height===this.height?this.uniforms.transform=this.source.cumulativeMatrix||s:this.transformDirty&&(a=this.transform,I.copy(a,this.source.cumulativeMatrix||s),c=this.source.width/this.width,b=this.source.height/this.height,a[0]*=c,a[1]*=c,a[2]*=c,a[3]*=c,a[4]*=b,a[5]*=b,a[6]*=b,a[7]*=b,
this.uniforms.transform=a,this.transformDirty=!1),p(ba,Y,this.uniforms,this.frameBuffer.frameBuffer,this),this.emit("render"),this.dirty=!1)};Z.prototype.renderSecondaryWebGL=function(){if(this.dirty&&this.source){this.emit("render");this.source.render();var a=this.source.width,c=this.source.height;this.pixels&&this.pixels.length===a*c*4||(this.pixels=new Uint8Array(a*c*4));this.source.readPixels(0,0,this.source.width,this.source.height,this.pixels);this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,
a,c,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.pixels);this.uniforms.source=this.texture;p(this.shader,this.model,this.uniforms,null,this);this.dirty=!1}};Z.prototype.render2D=function(){};Z.prototype.removeSource=function(a){if(this.source===a||this.source===a.pub)this.source=null};Z.prototype.destroy=function(){var a;this.source&&this.source.removeTarget&&this.source.removeTarget(this);delete this.source;delete this.target;delete this.pub;delete this.uniforms;delete this.pixels;delete this.auto;
a=V.indexOf(this);0<=a&&V.splice(a,1);N.prototype.destroy.call(this)};oa=function(a){function c(a,b,d){var g,f,k;f=p.inputElements[a];"string"===typeof d&&isNaN(d)&&("enum"===b.type?(b.options&&b.options.filter&&(g=String(d).toLowerCase(),k=b.options.filter(function(a){return"string"===typeof a&&a.toLowerCase()===g||a.length&&"string"===typeof a[0]&&a[0].toLowerCase()===g}),k=k.length),k||(d=e(d,["select"]))):"number"===b.type||"boolean"===b.type?d=e(d,["input","select"]):"image"===b.type&&(d=e(d,
["canvas","img","video"])));d instanceof HTMLInputElement||d instanceof HTMLSelectElement?(k=d.value,f&&f.element!==d&&(f.element.removeEventListener("change",f.listener,!0),f.element.removeEventListener("input",f.listener,!0),delete p.inputElements[a],f=null),f||(f={element:d,listener:function(a,c){return function(){var a,e;a="checkbox"===d.type?d.checked:c.value;b.set.call(p,a)&&p.setTransformDirty();e=b.get.call(p);e!==a&&(c.value=e)}}(a,d)},p.inputElements[a]=f,"range"===d.type&&d.addEventListener("input",
f.listener,!0),d.addEventListener("change",f.listener,!0)),f&&"checkbox"===k.type&&(k=k.checked)):(f&&(f.element.removeEventListener("change",f.listener,!0),f.element.removeEventListener("input",f.listener,!0),delete p.inputElements[a]),k=d);b.set.call(p,k)&&p.setTransformDirty()}function b(a,e){Object.defineProperty(g,a,{configurable:!0,enumerable:!0,get:function(){return e.get.call(p)},set:function(b){c(a,e,b)}})}function d(a){return function(){a.apply(p,arguments)&&p.setTransformDirty()}}var p=
a,g=this,f;this.inputElements={};Object.defineProperties(this,{id:{enumerable:!0,configurable:!0,get:function(){return p.id}},source:{enumerable:!0,configurable:!0,get:function(){return p.source.pub},set:function(a){p.setSource(a)}}});for(f in p.methods)p.methods.hasOwnProperty(f)&&(this[f]=d(p.methods[f].bind(p)));for(f in p.inputs)p.inputs.hasOwnProperty(f)&&b(f,p.inputs[f]);this.update=function(){p.setDirty()};this.alias=function(a,c){p.alias(a,c);return this};this.on=function(a,c){p.on(a,c)};
this.off=function(a,c){p.off(a,c)};this.destroy=function(){var a,c;p.destroy();for(a in this)this.hasOwnProperty(a)&&"isDestroyed"!==a&&(c=Object.getOwnPropertyDescriptor(this,a),c.get||c.set||"function"!==typeof this[a]?delete this[a]:this[a]=y)};this.isDestroyed=function(){return p.isDestroyed};this.isReady=function(){return p.ready}};S=function(a,c){var e,d;this.matrix=new Float32Array(16);this.cumulativeMatrix=new Float32Array(16);this.ready=!1;this.height=this.width=1;this.seriously=m;this.transformRef=
O[a];this.hook=a;this.id=A;F.push(this);L[A]=this;A++;this.options=c;this.sources=null;this.targets=[];this.inputElements={};this.inputs={};this.methods={};this.listeners={};this.uniforms=this.frameBuffer=this.texture=null;this.transformDirty=this.dirty=!0;this.transformed=this.isDestroyed=this.renderDirty=!1;if(this.transformRef.definition)for(e in this.plugin=this.transformRef.definition.call(this,c),this.transformRef)this.transformRef.hasOwnProperty(e)&&!this.plugin[e]&&(this.plugin[e]=this.transformRef[e]);
else this.plugin=b({},this.transformRef);for(e in this.plugin.inputs)this.plugin.inputs.hasOwnProperty(e)&&(d=this.plugin.inputs[e],d.method&&"function"===typeof d.method?this.methods[e]=d.method:"function"===typeof d.set&&"function"===typeof d.get&&(this.inputs[e]=d));this.pub=new oa(this);pa.push(this);H[a].push(this)};S.prototype.setDirty=function(){this.renderDirty=!0;N.prototype.setDirty.call(this)};S.prototype.setTransformDirty=function(){var a,c;this.renderDirty=this.dirty=this.transformDirty=
!0;for(a=0;a<this.targets.length;a++)c=this.targets[a],c.setTransformDirty?c.setTransformDirty():c.setDirty()};S.prototype.resize=function(){var a;N.prototype.resize.call(this);this.plugin.resize&&this.plugin.resize.call(this);for(a=0;a<this.targets.length;a++)this.targets[a].resize();this.setTransformDirty()};S.prototype.setSource=function(a){a=q(a);if(a!==this.source){if(v(a,this))throw"Attempt to make cyclical connection.";this.source&&this.source.removeTarget(this);this.source=a;a.setTarget(this);
a&&a.ready?this.setReady():this.setUnready();this.resize()}};S.prototype.setTarget=function(a){var c;for(c=0;c<this.targets.length;c++)if(this.targets[c]===a)return;this.targets.push(a)};S.prototype.removeTarget=function(a){a=this.targets&&this.targets.indexOf(a);0<=a&&this.targets.splice(a,1);this.targets&&this.targets.length&&this.resize()};S.prototype.alias=function(a,c){var b=this,e,d;if(0<=U.indexOf(c))throw c+" is a reserved name and cannot be used as an alias.";if(this.plugin.inputs.hasOwnProperty(a)){c||
(c=a);m.removeAlias(c);if(e=this.inputs[a])d=b.inputs[a],Object.defineProperty(m,c,{configurable:!0,enumerable:!0,get:function(){return d.get.call(b)},set:function(a){d.set.call(b,a)&&b.setTransformDirty()}});else if(e=this.methods[a])d=e,m[c]=function(){d.apply(b,arguments)&&b.setTransformDirty()};e&&(aa[c]={node:this,input:a})}return this};S.prototype.render=function(a){if(this.source)return this.source.render(),this.transformDirty&&(this.transformed?this.source.cumulativeMatrix?I.multiply(this.cumulativeMatrix,
this.matrix,this.source.cumulativeMatrix):I.copy(this.cumulativeMatrix,this.matrix):I.copy(this.cumulativeMatrix,this.source.cumulativeMatrix||s),this.transformDirty=!1),a&&r?(this.renderDirty&&(this.frameBuffer||(this.uniforms={resolution:[this.width,this.height]},this.frameBuffer=new n(r,this.width,this.height)),this.uniforms.source=this.source.texture,this.uniforms.transform=this.cumulativeMatrix||s,p(ba,Y,this.uniforms,this.frameBuffer.frameBuffer,this),this.renderDirty=!1),this.texture=this.frameBuffer.texture):
this.texture=this.source?this.source.texture:null,this.dirty=!1,this.texture;this.transformDirty&&(I.copy(this.cumulativeMatrix,this.matrix),this.transformDirty=!1);this.texture=null;this.dirty=!1};S.prototype.destroy=function(){var a,c,b,e=this.hook;this.plugin.destroy&&"function"===typeof this.plugin.destroy&&this.plugin.destroy.call(this);delete this.effect;for(a in this.inputElements)this.inputElements.hasOwnProperty(a)&&(b=this.inputElements[a],b.element.removeEventListener("change",b.listener,
!0),b.element.removeEventListener("input",b.listener,!0));for(this.source&&this.source.removeTarget(this);this.targets.length;)(b=this.targets.pop())&&b.removeSource&&b.removeSource(this);for(c in this)this.hasOwnProperty(c)&&"id"!==c&&delete this[c];for(c in aa)aa.hasOwnProperty(c)&&(b=aa[c],b.node===this&&m.removeAlias(c));a=pa.indexOf(this);0<=a&&pa.splice(a,1);a=H[e].indexOf(this);0<=a&&H[e].splice(a,1);N.prototype.destroy.call(this)};S.prototype.setReady=N.prototype.setReady;S.prototype.setUnready=
N.prototype.setUnready;S.prototype.on=N.prototype.on;S.prototype.off=N.prototype.off;S.prototype.emit=N.prototype.emit;c=c instanceof HTMLCanvasElement?{canvas:c}:c||{};this.effect=function(a,c){if(!C[a])throw"Unknown effect: "+a;return(new R(a,c)).pub};this.source=function(a,c,b){return q(a,c,b).pub};this.transform=function(a,b){"string"!==typeof a&&(b=a,a=!1);if(a){if(!O[a])throw"Unknown transforms: "+a;}else if(a=c&&c.defaultTransform||"2d",!O[a])throw"No transform specified";return(new S(a,b)).pub};
this.target=function(a,c){var b;for(b=0;b<V.length;b++)if((V[b]===a||V[b].target===a)&&!(!c||!c.renderToTexture)===!!V[b].renderToTexture)return V[b].pub;return(new Z(a,c)).pub};this.aliases=function(){return Object.keys(aa)};this.removeAlias=function(a){aa[a]&&(delete this[a],delete aa[a])};this.go=function(a,c){var b;"function"===typeof a&&0>J.indexOf(a)&&J.push(a);"function"===typeof c&&0>da.indexOf(c)&&da.push(c);sa=!0;for(b=0;b<V.length;b++)V[b].go();$||!J.length&&!da.length||h()};this.stop=
function(){J.length=0;da.length=0;P($);$=null};this.render=function(){var a;for(a=0;a<V.length;a++)V[a].render(c)};this.destroy=function(){for(var a,c;F.length;)c=F.shift(),c.destroy();ba&&(ba.destroy(),ba=null);r&&(r.deleteBuffer(Y.vertex),r.deleteBuffer(Y.texCoord),r.deleteBuffer(Y.index));Y&&(delete Y.vertex,delete Y.texCoord,delete Y.index);for(a in this)this.hasOwnProperty(a)&&"isDestroyed"!==a&&(c=Object.getOwnPropertyDescriptor(this,a),c.get||c.set||"function"!==typeof this[a]?delete this[a]:
this[a]=y);m=r=Y=ga=ha=null;K=[];V=[];fa=[];F=[];J.length=0;da.length=0;P($);$=null;ta=!0};this.isDestroyed=function(){return ta};this.incompatible=function(a){var c,b=!1;if(b=g.incompatible(a))return b;if(!a){for(c in E)if(E.hasOwnProperty(c)&&E[c].length&&(a=C[c])&&"function"===typeof a.compatible&&!a.compatible.call(this))return"plugin-"+c;for(c in G)if(G.hasOwnProperty(c)&&G[c].length&&(a=M[c])&&"function"===typeof a.compatible&&!a.compatible.call(this))return"source-"+c}return!1};Object.defineProperties(this,
{id:{enumerable:!0,configurable:!0,get:function(){return D}}});ga="#ifdef GL_ES\nprecision mediump float;\n#endif\nattribute vec4 position;\nattribute vec2 texCoord;\nuniform vec2 resolution;\nuniform mat4 transform;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nvoid main(void) {\n\tvec4 screenPosition = vec4(position.xy * resolution / 2.0, position.z, position.w);\n\tscreenPosition = transform * screenPosition;\n\tgl_Position.xy = screenPosition.xy * 2.0 / resolution;\n\tgl_Position.z = screenPosition.z * 2.0 / (resolution.x / resolution.y);\n\tgl_Position.w = screenPosition.w;\n\tvTexCoord = texCoord;\n\tvPosition = gl_Position;\n}\n";
ha="#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nvoid main(void) {\n\t\tgl_FragColor = texture2D(source, vTexCoord);\n}"}var l=a.document,u=a.console,v,D,L,C={},O={},M={},F=[],E={},H={},G={canvas:[],image:[],video:[]},s,x=0,y=function(){},J={transparent:[0,0,0,0],black:[0,0,0,1],red:[1,0,0,1],green:[0,1,0,1],blue:[0,0,1,1],white:[1,1,1,1]},K=["x","y","z","w"],A=["r","g","b","a"],I={frustum:function(a,b,e,d,p,g,f){f||(f=
I.create());var k=b-a,l=d-e,n=g-p;f[0]=2*p/k;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2*p/l;f[6]=0;f[7]=0;f[8]=(b+a)/k;f[9]=(d+e)/l;f[10]=-(g+p)/n;f[11]=-1;f[12]=0;f[13]=0;f[14]=-(g*p*2)/n;f[15]=0;return f},perspective:function(a,b,e,d,p){a=e*Math.tan(a*Math.PI/360);b*=a;return I.frustum(-b,b,-a,a,e,d,p)},multiply:function(a,b,e){var d=b[0],p=b[1],f=b[2],g=b[3],k=b[4],l=b[5],n=b[6],h=b[7],u=b[8],t=b[9],q=b[10],v=b[11],s=b[12],m=b[13],y=b[14];b=b[15];var D=e[0],r=e[1],F=e[2],G=e[3];a[0]=D*d+r*k+F*u+G*s;a[1]=
D*p+r*l+F*t+G*m;a[2]=D*f+r*n+F*q+G*y;a[3]=D*g+r*h+F*v+G*b;D=e[4];r=e[5];F=e[6];G=e[7];a[4]=D*d+r*k+F*u+G*s;a[5]=D*p+r*l+F*t+G*m;a[6]=D*f+r*n+F*q+G*y;a[7]=D*g+r*h+F*v+G*b;D=e[8];r=e[9];F=e[10];G=e[11];a[8]=D*d+r*k+F*u+G*s;a[9]=D*p+r*l+F*t+G*m;a[10]=D*f+r*n+F*q+G*y;a[11]=D*g+r*h+F*v+G*b;D=e[12];r=e[13];F=e[14];G=e[15];a[12]=D*d+r*k+F*u+G*s;a[13]=D*p+r*l+F*t+G*m;a[14]=D*f+r*n+F*q+G*y;a[15]=D*g+r*h+F*v+G*b;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=
0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}},W=function(){var c=0;return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){var e,d,p;e=(new Date).getTime();d=Math.max(0,16-(e-c));p=a.setTimeout(function(){b(e+
d)},d);c=e+d;return p}}(),P=function(){return a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.oCancelAnimationFrame||a.msCancelAnimationFrame||function(c){a.cancelTimeout(c)}}(),U="source target effect effects benchmark incompatible util ShaderProgram inputValidators save load plugin removePlugin alias removeAlias stop go destroy isDestroyed".split(" ");a.addEventListener("message",function(c){c.source===a&&"seriously-timeout-message"===c.data&&(c.stopPropagation(),
0<F.length&&F.shift()())},!0);n.prototype.resize=function(a,b){var e=this.gl;if(this.width!==a||this.height!==b)this.width=a,this.height=b,e&&(e.bindTexture(e.TEXTURE_2D,this.texture),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a,b,0,e.RGBA,e.UNSIGNED_BYTE,null),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,a,b),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,
0),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null))};n.prototype.destroy=function(){var a=this.gl;a&&(a.deleteFramebuffer(this.frameBuffer),a.deleteRenderbuffer(this.renderBuffer),this.ownTexture&&a.deleteTexture(this.texture));delete this.frameBuffer;delete this.renderBuffer;delete this.texture;delete this.gl};k.prototype.use=function(){this.gl.useProgram(this.program)};g.incompatible=function(c){var b,e;L===d&&((b=l.createElement("canvas"))&&
b.getContext?a.WebGLRenderingContext?(e=h())||(L="context"):L="webgl":L="canvas");if(L)return L;if(c){if((b=C[c])&&"function"===typeof b.compatible&&!b.compatible(e))return"plugin-"+c;if((b=M[c])&&"function"===typeof b.compatible&&!b.compatible(e))return"source-"+c}return!1};g.plugin=function(a,e,g){if(C[a])u.log("Effect ["+a+"] already loaded");else if(g===d&&"object"===typeof e&&(g=e),g)return g=b({},g),"function"===typeof e&&(g.definition=e),g.inputs&&f(g),g.title||(g.title=a),C[a]=g,E[a]=[],g};
g.removePlugin=function(a){var b,e;if(!a||!C[a])return this;if(b=E[a]){for(;b.length;)e=b.shift(),e.destroy();delete E[a]}delete C[a];return this};g.source=function(a,e,f){if(M[a])u.log("Source ["+a+"] already loaded");else if(f===d&&"object"===typeof e&&(f=e),f||e)return f=b({},f),"function"===typeof e&&(f.definition=e),f.title||(f.title=a),M[a]=f,G[a]=[],f};g.removeSource=function(a){var b,e;if(!a||!M[a])return this;if(b=G[a]){for(;b.length;)e=b.shift(),e.destroy();delete G[a]}delete M[a];return this};
g.transform=function(a,e,f){if(O[a])u.log("Transform ["+a+"] already loaded");else if(f===d&&"object"===typeof e&&(f=e),f||e)return f=b({},f),"function"===typeof e&&(f.definition=e),f.title||(f.title=a),O[a]=f,H[a]=[],f};g.removeTransform=function(a){var b,e;if(!a||!O[a])return this;if(b=H[a]){for(;b.length;)e=b.shift(),e.destroy();delete H[a]}delete O[a];return this};g.inputValidators={color:function(c,b,e){var d,f;f=e||[];if("string"===typeof c){if((d=/^(rgb|hsl)a?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*(\d+(\.\d*)?)\s*)?\)/i.exec(c))&&
d.length){if(3>d.length)return f[0]=f[1]=f[2]=f[3]=0,f;f[3]=1;for(b=0;3>b;b++)f[b]=parseFloat(d[b+2])/255;isNaN(d[6])||(f[3]=parseFloat(d[6]));return"hsl"===d[1].toLowerCase()?m(f[0],f[1],f[2],f[3],f):f}if((d=/^#(([0-9a-fA-F]{3,8}))/.exec(c))&&d.length)return d=d[1],3===d.length?(f[0]=parseInt(d[0],16)/15,f[1]=parseInt(d[1],16)/15,f[2]=parseInt(d[2],16)/15,f[3]=1):4===d.length?(f[0]=parseInt(d[0],16)/15,f[1]=parseInt(d[1],16)/15,f[2]=parseInt(d[2],16)/15,f[3]=parseInt(d[3],16)/15):6===d.length?(f[0]=
parseInt(d.substr(0,2),16)/255,f[1]=parseInt(d.substr(2,2),16)/255,f[2]=parseInt(d.substr(4,2),16)/255,f[3]=1):8===d.length?(f[0]=parseInt(d.substr(0,2),16)/255,f[1]=parseInt(d.substr(2,2),16)/255,f[2]=parseInt(d.substr(4,2),16)/255,f[3]=parseInt(d.substr(6,2),16)/255):f[0]=f[1]=f[2]=f[3]=0,f;if(d=J[c.toLowerCase()]){for(b=0;4>b;b++)f[b]=d[b];return f}D||(D=l.createElement("a"));D.style.backgroundColor="";D.style.backgroundColor=c;d=a.getComputedStyle(D);if((d=d.getPropertyValue("background-color")||
d.getPropertyValue("backgroundColor")||D.style.backgroundColor)&&d!==c)return g.inputValidators.color(d,b,e);f[0]=f[1]=f[2]=f[3]=0;return f}if(q(c)){f=c;if(3>f.length)return f[0]=f[1]=f[2]=f[3]=0,f;for(b=0;3>b;b++)if(isNaN(f[b]))return f[0]=f[1]=f[2]=f[3]=0,f;4>f.length&&f.push(1);return f}if("number"===typeof c)return f[0]=f[1]=f[2]=c,f[3]=1,f;if("object"===typeof c){for(b=0;4>b;b++)d=A[b],null===c[d]||isNaN(c[d])?f[b]=3===b?1:0:f[b]=c[d];return f}f[0]=f[1]=f[2]=f[3]=0;return f},number:function(a,
b){if(isNaN(a))return b.defaultValue||0;a=parseFloat(a);return a<b.min?b.min:a>b.max?b.max:b.step?Math.round(a/b.step)*b.step:a},"enum":function(a,b){return(b.options||[]).filter(function(b){return q(b)&&b.length&&b[0]===a||b===a}).length?a:b.defaultValue||""},vector:function(a,b,e){var f,g;b=b.dimensions||4;e=e||[];if(q(a)){for(f=0;f<b;f++)e[f]=a[f]||0;return e}if("object"===typeof a){for(f=0;f<b;f++)g=K[f],a[g]===d&&(g=A[f]),e[f]=a[g]||0;return e}a=parseFloat(a)||0;for(f=0;f<b;f++)e[f]=a;return e},
"boolean":function(a){return!a||a&&a.toLowerCase&&"false"===a.toLowerCase()?!1:!0},string:function(a){return"string"===typeof a?a:0===a||a?a.toString?a.toString():String(a):""}};g.prototype.effects=g.effects=function(){var a,b,e,d={},f,g;for(a in C)if(C.hasOwnProperty(a)){b=C[a];e={title:b.title||a,description:b.description||"",inputs:{}};for(g in b.inputs)b.inputs.hasOwnProperty(g)&&(f=b.inputs[g],e.inputs[g]={type:f.type,defaultValue:f.defaultValue,step:f.step,min:f.min,max:f.max,minCount:f.minCount,
maxCount:f.maxCount,dimensions:f.dimensions,title:f.title||g,description:f.description||"",options:f.options||[]});d[a]=e}return d};a.Float32Array&&(s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]));a.Seriously&&"object"===typeof a.Seriously&&function(){for(var b in a.Seriously)a.Seriously.hasOwnProperty(b)&&"plugin"!==b&&"object"===typeof a.Seriously[b]&&g.plugin(b,a.Seriously[b])}();g.util={mat4:I,checkSource:function(b){var d,f;b=e(b,["img","canvas","video"]);if(!b)return!1;d=l.createElement("canvas");
if(!d)return u.log("Browser does not support canvas or Seriously.js"),!1;if(f=h()){d=f.createTexture();f.bindTexture(f.TEXTURE_2D,d);try{f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,b)}catch(g){return g.code===a.DOMException.SECURITY_ERR?u.log("Unable to access cross-domain image"):u.log("Error: "+g.message),f.deleteTexture(d),!1}f.deleteTexture(d)}else{f=d.getContext("2d");try{f.drawImage(b,0,0),f.getImageData(0,0,1,1)}catch(k){return k.code===a.DOMException.SECURITY_ERR?u.log("Unable to access cross-domain image"):
u.log("Error: "+k.message),!1}}return!0},hslToRgb:m,colors:J,setTimeoutZero:t,ShaderProgram:k,FrameBuffer:n,requestAnimationFrame:W,shader:{makeNoise:"float makeNoise(float u, float v, float timer) {\n\tfloat x = u * v * mod(timer * 1000.0, 100.0);\n\tx = mod(x, 13.0) * mod(x, 127.0);\n\tfloat dx = mod(x, 0.01);\n\treturn clamp(0.1 + dx * 100.0, 0.0, 1.0);\n}\n",random:"#ifndef RANDOM\n#define RANDOM\nfloat random(vec2 n) {\n\treturn 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453);\n}\n#endif\n"}};
g.transform("2d",function(a){function b(){function a(b,e){c[12]=c[0]*b+c[4]*e+c[12];c[13]=c[1]*b+c[5]*e+c[13];c[14]=c[2]*b+c[6]*e+c[14];c[15]=c[3]*b+c[7]*e+c[15]}var c=e.matrix,v,s,D,m,r,F,y,G,E,C;n||h||u||t||q||1!==k||1!==l?(I.identity(c),a(n+f,h+g),t&&(c[4]=t/e.width),q&&(c[1]=q/e.height),u&&(D=c[0],m=c[1],r=c[2],F=c[3],y=c[4],G=c[5],E=c[6],C=c[7],v=-(d?u*Math.PI/180:u),s=Math.sin(v),v=Math.cos(v),c[0]=D*v+y*s,c[1]=m*v+G*s,c[2]=r*v+E*s,c[3]=F*v+C*s,c[4]=y*v-D*s,c[5]=G*v-m*s,c[6]=E*v-r*s,c[7]=C*
v-F*s),1!==k&&(c[0]*=k,c[1]*=k,c[2]*=k,c[3]*=k),1!==l&&(c[4]*=l,c[5]*=l,c[6]*=l,c[7]*=l),a(-f,-g),e.transformed=!0):e.transformed=!1}var e=this,d=!(a&&a.radians),f=0,g=0,k=1,l=1,n=0,h=0,u=0,t=0,q=0;return{inputs:{reset:{method:function(){g=f=0;l=k=1;q=t=u=h=n=0;return e.transformed?(e.transformed=!1,!0):!1}},translate:{method:function(a,c){isNaN(a)&&(a=n);isNaN(c)&&(c=h);if(a===n&&c===h)return!1;n=a;h=c;b();return!0},type:["number","number"]},translateX:{get:function(){return n},set:function(a){if(a===
n)return!1;n=a;b();return!0},type:"number"},translateY:{get:function(){return h},set:function(a){if(a===h)return!1;h=a;b();return!0},type:"number"},rotation:{get:function(){return u},set:function(a){if(a===u)return!1;u=parseFloat(a);b();return!0},type:"number"},center:{method:function(a,c){isNaN(a)&&(a=f);isNaN(c)&&(c=g);if(a===f&&c===g)return!1;f=a;g=c;b();return!0},type:["number","number"]},centerX:{get:function(){return f},set:function(a){if(a===f)return!1;f=a;b();return!0},type:"number"},centerY:{get:function(){return g},
set:function(a){if(a===g)return!1;g=a;b();return!0},type:"number"},skew:{method:function(a,c){isNaN(a)&&(a=t);isNaN(c)&&(c=q);if(a===t&&c===q)return!1;t=a;q=c;b();return!0},type:["number","number"]},skewX:{get:function(){return t},set:function(a){if(a===t)return!1;t=a;b();return!0},type:"number"},skewY:{get:function(){return q},set:function(a){if(a===q)return!1;q=a;b();return!0},type:"number"},scale:{method:function(a,c){var e,f;e=isNaN(a)?k:a;if(isNaN(c)){if(isNaN(a))return!1;f=e}else f=c;if(e===
k&&f===l)return!1;k=e;l=f;b();return!0},type:["number","number"]},scaleX:{get:function(){return k},set:function(a){if(a===k)return!1;k=a;b();return!0},type:"number"},scaleY:{get:function(){return l},set:function(a){if(a===l)return!1;l=a;b();return!0},type:"number"}}}},{title:"2D Transform",description:"Translate, Rotate, Scale, Skew"});g.transform("flip",function(){function a(){var c=b.matrix;e?(c[0]=-1,c[5]=1):(c[0]=1,c[5]=-1)}var b=this,e=!0;I.identity(b.matrix);a();b.transformDirty=!0;b.transformed=
!0;return{inputs:{direction:{get:function(){return e?"horizontal":"vertical"},set:function(b){b="vertical"===b?!1:!0;if(b===e)return!1;e=b;a();return!0},type:"string"}}}},{title:"Flip",description:"Flip Horizontal/Vertical"});g.transform("reformat",function(){function a(){var b=f.matrix,c=d||f.width,e=g||f.height,l=f.source,n=l&&l.width||1,l=l&&l.height||1;"distort"===k||c===n&&e===l?f.transformed=!1:(n/=l,e=c/e,"width"===k||"contain"===k&&e<=n?(c=1,e/=n):"height"===k||"contain"===k&&e>n?(c=n/e,e=
1):e>n?(c=1,e/=n):(c=n/e,e=1),1===c&&1===e?f.transformed=!1:(I.identity(b),1!==c&&(b[0]*=c,b[1]*=c,b[2]*=c,b[3]*=c),1!==e&&(b[4]*=e,b[5]*=e,b[6]*=e,b[7]*=e),f.transformed=!0))}function b(){return d||f.source&&f.source.width||1}function e(){return g||f.source&&f.source.height||1}var f=this,d,g,k="contain";this.resize=function(){var f=b(),d=e();if(this.width!==f||this.height!==d)for(this.width=f,this.height=d,this.uniforms&&this.uniforms.resolution&&(this.uniforms.resolution[0]=f,this.uniforms.resolution[1]=
d),this.frameBuffer&&this.frameBuffer.resize&&this.frameBuffer.resize(f,d),f=0;f<this.targets.length;f++)this.targets[f].resize();this.setTransformDirty();a()};return{inputs:{width:{get:b,set:function(a){a=Math.floor(a);if(a===d)return!1;d=a;this.resize();return!1},type:"number"},height:{get:e,set:function(a){a=Math.floor(a);if(a===g)return!1;g=a;this.resize();return!1},type:"number"},mode:{get:function(){return k},set:function(b){if(b===k)return!1;k=b;a();return!0},type:"enum",options:["cover","contain",
"distort","width","height"]}}}},{title:"Reformat",description:"Change output dimensions"});g.util.shader.noiseHelpers="#ifndef NOISE_HELPERS\n#define NOISE_HELPERS\nvec2 mod289(vec2 x) {\n\treturn x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec3 mod289(vec3 x) {\n\treturn x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x) {\n\treturn x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec3 permute(vec3 x) {\n\treturn mod289(((x*34.0)+1.0)*x);\n}\nvec4 permute(vec4 x) {\n\treturn mod289(((x*34.0)+1.0)*x);\n}\nvec4 taylorInvSqrt(vec4 r) {\n\treturn 1.79284291400159 - 0.85373472095314 * r;\n}\nfloat taylorInvSqrt(float r) {\n\treturn 1.79284291400159 - 0.85373472095314 * r;\n}\n#endif\n";
g.util.shader.snoise2d="#ifndef NOISE2D\n#define NOISE2D\nfloat snoise(vec2 v) {\n\tconst vec4 C = vec4(0.211324865405187, // (3.0-sqrt(3.0))/6.0\n\t\t0.366025403784439, // 0.5*(sqrt(3.0)-1.0)\n\t\t-0.577350269189626, // -1.0 + 2.0 * C.x\n\t\t0.024390243902439); // 1.0 / 41.0\n\tvec2 i = floor(v + dot(v, C.yy));\n\tvec2 x0 = v - i + dot(i, C.xx);\n\tvec2 i1;\n\t//i1.x = step(x0.y, x0.x); // x0.x > x0.y ? 1.0 : 0.0\n\t//i1.y = 1.0 - i1.x;\n\ti1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\t// x0 = x0 - 0.0 + 0.0 * C.xx ;\n\t// x1 = x0 - i1 + 1.0 * C.xx ;\n\t// x2 = x0 - 1.0 + 2.0 * C.xx ;\n\tvec4 x12 = x0.xyxy + C.xxzz;\n\tx12.xy -= i1;\n\ti = mod289(i); // Avoid truncation effects in permutation\n\tvec3 p = permute(permute(i.y + vec3(0.0, i1.y, 1.0)) + i.x + vec3(0.0, i1.x, 1.0));\n\tvec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.0);\n\tm = m*m ;\n\tm = m*m ;\n\tvec3 x = 2.0 * fract(p * C.www) - 1.0;\n\tvec3 h = abs(x) - 0.5;\n\tvec3 ox = floor(x + 0.5);\n\tvec3 a0 = x - ox;\n\tm *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);\n\tvec3 g;\n\tg.x = a0.x * x0.x + h.x * x0.y;\n\tg.yz = a0.yz * x12.xz + h.yz * x12.yw;\n\treturn 130.0 * dot(m, g);\n}\n#endif\n";
g.util.shader.snoise3d="#ifndef NOISE3D\n#define NOISE3D\nfloat snoise(vec3 v) {\n\tconst vec2 C = vec2(1.0/6.0, 1.0/3.0) ;\n\tconst vec4 D = vec4(0.0, 0.5, 1.0, 2.0);\n\tvec3 i = floor(v + dot(v, C.yyy));\n\tvec3 x0 = v - i + dot(i, C.xxx) ;\n\tvec3 g = step(x0.yzx, x0.xyz);\n\tvec3 l = 1.0 - g;\n\tvec3 i1 = min(g.xyz, l.zxy);\n\tvec3 i2 = max(g.xyz, l.zxy);\n\t// x0 = x0 - 0.0 + 0.0 * C.xxx;\n\t// x1 = x0 - i1 + 1.0 * C.xxx;\n\t// x2 = x0 - i2 + 2.0 * C.xxx;\n\t// x3 = x0 - 1.0 + 3.0 * C.xxx;\n\tvec3 x1 = x0 - i1 + C.xxx;\n\tvec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n\tvec3 x3 = x0 - D.yyy; // -1.0+3.0*C.x = -0.5 = -D.y\n\ti = mod289(i);\n\tvec4 p = permute(permute(permute(\n\t\t\t\t\t\ti.z + vec4(0.0, i1.z, i2.z, 1.0))\n\t\t\t\t\t\t+ i.y + vec4(0.0, i1.y, i2.y, 1.0))\n\t\t\t\t\t\t+ i.x + vec4(0.0, i1.x, i2.x, 1.0));\n\tfloat n_ = 0.142857142857; // 1.0/7.0\n\tvec3 ns = n_ * D.wyz - D.xzx;\n\tvec4 j = p - 49.0 * floor(p * ns.z * ns.z); // mod(p, 7 * 7)\n\tvec4 x_ = floor(j * ns.z);\n\tvec4 y_ = floor(j - 7.0 * x_); // mod(j, N)\n\tvec4 x = x_ * ns.x + ns.yyyy;\n\tvec4 y = y_ * ns.x + ns.yyyy;\n\tvec4 h = 1.0 - abs(x) - abs(y);\n\tvec4 b0 = vec4(x.xy, y.xy);\n\tvec4 b1 = vec4(x.zw, y.zw);\n\t//vec4 s0 = vec4(lessThan(b0, 0.0)) * 2.0 - 1.0;\n\t//vec4 s1 = vec4(lessThan(b1, 0.0)) * 2.0 - 1.0;\n\tvec4 s0 = floor(b0) * 2.0 + 1.0;\n\tvec4 s1 = floor(b1) * 2.0 + 1.0;\n\tvec4 sh = -step(h, vec4(0.0));\n\tvec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy ;\n\tvec4 a1 = b1.xzyw + s1.xzyw * sh.zzww ;\n\tvec3 p0 = vec3(a0.xy, h.x);\n\tvec3 p1 = vec3(a0.zw, h.y);\n\tvec3 p2 = vec3(a1.xy, h.z);\n\tvec3 p3 = vec3(a1.zw, h.w);\n\tvec4 norm = taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));\n\tp0 *= norm.x;\n\tp1 *= norm.y;\n\tp2 *= norm.z;\n\tp3 *= norm.w;\n\tvec4 m = max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);\n\tm = m * m;\n\treturn 42.0 * dot(m*m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3)));\n}\n#endif\n";
g.util.shader.snoise4d="#ifndef NOISE4D\n#define NOISE4D\nvec4 grad4(float j, vec4 ip)\n\t{\n\tconst vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n\tvec4 p, s;\n\n\tp.xyz = floor(fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n\tp.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n\ts = vec4(lessThan(p, vec4(0.0)));\n\tp.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n\treturn p;\n\t}\n\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v)\n\t{\n\tconst vec4 C = vec4(0.138196601125011, // (5 - sqrt(5))/20 G4\n\t\t\t\t\t\t0.276393202250021, // 2 * G4\n\t\t\t\t\t\t0.414589803375032, // 3 * G4\n\t\t\t\t\t\t-0.447213595499958); // -1 + 4 * G4\n\n\tvec4 i = floor(v + dot(v, vec4(F4)));\n\tvec4 x0 = v - i + dot(i, C.xxxx);\n\n\n\tvec4 i0;\n\tvec3 isX = step(x0.yzw, x0.xxx);\n\tvec3 isYZ = step(x0.zww, x0.yyz);\n\ti0.x = isX.x + isX.y + isX.z;\n\ti0.yzw = 1.0 - isX;\n\ti0.y += isYZ.x + isYZ.y;\n\ti0.zw += 1.0 - isYZ.xy;\n\ti0.z += isYZ.z;\n\ti0.w += 1.0 - isYZ.z;\n\n\tvec4 i3 = clamp(i0, 0.0, 1.0);\n\tvec4 i2 = clamp(i0-1.0, 0.0, 1.0);\n\tvec4 i1 = clamp(i0-2.0, 0.0, 1.0);\n\n\tvec4 x1 = x0 - i1 + C.xxxx;\n\tvec4 x2 = x0 - i2 + C.yyyy;\n\tvec4 x3 = x0 - i3 + C.zzzz;\n\tvec4 x4 = x0 + C.wwww;\n\n\ti = mod289(i);\n\tfloat j0 = permute(permute(permute(permute(i.w) + i.z) + i.y) + i.x);\n\tvec4 j1 = permute(permute(permute(permute (\n\t\t\t\t\ti.w + vec4(i1.w, i2.w, i3.w, 1.0))\n\t\t\t\t\t+ i.z + vec4(i1.z, i2.z, i3.z, 1.0))\n\t\t\t\t\t+ i.y + vec4(i1.y, i2.y, i3.y, 1.0))\n\t\t\t\t\t+ i.x + vec4(i1.x, i2.x, i3.x, 1.0));\n\n\tvec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n\tvec4 p0 = grad4(j0, ip);\n\tvec4 p1 = grad4(j1.x, ip);\n\tvec4 p2 = grad4(j1.y, ip);\n\tvec4 p3 = grad4(j1.z, ip);\n\tvec4 p4 = grad4(j1.w, ip);\n\n\tvec4 norm = taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));\n\tp0 *= norm.x;\n\tp1 *= norm.y;\n\tp2 *= norm.z;\n\tp3 *= norm.w;\n\tp4 *= taylorInvSqrt(dot(p4, p4));\n\n\tvec3 m0 = max(0.6 - vec3(dot(x0, x0), dot(x1, x1), dot(x2, x2)), 0.0);\n\tvec2 m1 = max(0.6 - vec2(dot(x3, x3), dot(x4, x4)), 0.0);\n\tm0 = m0 * m0;\n\tm1 = m1 * m1;\n\treturn 49.0 * (dot(m0*m0, vec3(dot(p0, x0), dot(p1, x1), dot(p2, x2)))\n\t\t\t\t\t\t\t+ dot(m1*m1, vec2(dot(p3, x3), dot(p4, x4)))) ;\n}\n#endif\n";
return g});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):d(a.Seriously)})(this,function(a,d){a.source("array",function(a,b,m){var t,q,h;if(b&&(Array.isArray(a)||a&&a.BYTES_PER_ELEMENT&&"length"in a))if(t=b.width,q=b.height,t&&q)if(t*q*4!==a.length){if(m)throw"Array length must be height x width x 4.";}else return this.width=t,this.height=q,b.flip===d&&(this.flip=!1),a instanceof Uint8Array||(h=new Uint8Array(a)),{render:function(b){var d;if(this.dirty){if(h)for(d=
0;d<h.length;d++)h[d]=a[d];b.bindTexture(b.TEXTURE_2D,this.texture);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,this.flip);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.width,this.height,0,b.RGBA,b.UNSIGNED_BYTE,h||a);this.lastRenderTime=Date.now()/1E3;return!0}}};else if(m)throw"Height and width must be provided with an Array";},{title:"Array",description:"Array or Uint8Array"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):d(a.Seriously)})(this,function(a,d){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,b=window.URL||window.webkitURL||window.mozURL||window.msURL;a.source("camera",function(a,d,q){function h(){k&&(k.pause(),k.src="",k.load());l&&l.stop&&l.stop();l=null}function f(){g||(k.videoWidth?(n.width=k.videoWidth,n.height=k.videoHeight,n.setReady()):
setTimeout(f,50))}var n=this,k,g=!1,l;if(q){if(!e)throw"Camera source type unavailable. Browser does not support getUserMedia";k=document.createElement("video");e.call(navigator,{video:!0},function(a){l=a;g?h():(k.mozCaptureStream?k.mozSrcObject=l:k.src=b&&b.createObjectURL(l)||l,k.readyState?f():k.addEventListener("loadedmetadata",f,!1),k.play())},function(a){console.log("Unable to access video camera",a)});return{deferTexture:!0,source:k,render:Object.getPrototypeOf(this).renderVideo,destroy:function(){g=
!0;h()}}}},{compatible:function(){return!!e},title:"Camera"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):d(a.Seriously)})(this,function(a,d){a.source("imagedata",function(a){if(a instanceof Object&&a.data&&a.width&&a.height&&a.width*a.height*4===a.data.length)return this.width=a.width,this.height=a.height,{render:function(b){if(this.dirty)return b.bindTexture(b.TEXTURE_2D,this.texture),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,this.flip),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,
b.UNSIGNED_BYTE,a),this.lastRenderTime=Date.now()/1E3,!0}}},{title:"ImageData",description:"2D Canvas ImageData"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){function e(){var a;if(!l){f=new Uint8Array(256);n=new Uint8Array(512);k=new Uint8Array(512);g=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);for(a=0;256>a;a++)f[a]=256*h();for(a=0;512>a;a++)n[a]=f[a&255],k[a]=n[a]%12;
l=!0}}function b(a,b){var e=0,f=0,d=0,l=(a+b)*t,h=Math.floor(a+l),m=Math.floor(b+l),l=(h+m)*q,E=a-(h-l),H=b-(m-l),G=E>H?1:0,s=(G+1)%2,x=E-G+q,y=H-s+q,l=E-1+2*q,J=H-1+2*q,h=h&255,m=m&255,K=0.5-E*E-H*H,A;0<=K&&(A=3*k[h+n[m]],K*=K,e=K*K*(g[A]*E+g[A+1]*H));E=0.5-x*x-y*y;0<=E&&(A=3*k[h+G+n[m+s]],E*=E,f=E*E*(g[A]*x+g[A+1]*y));E=0.5-l*l-J*J;0<=E&&(A=3*k[h+1+n[m+1]],E*=E,d=E*E*(g[A]*l+g[A+1]*J));return 70*(e+f+d)}var m=a.util.mat4,t=0.5*(Math.sqrt(3)-1),q=(3-Math.sqrt(3))/6,h=Math.random,f,n,k,g,l=!1;a.transform("camerashake",
function(){function a(){function e(a,b){x[12]=x[0]*a+x[4]*b+x[12];x[13]=x[1]*a+x[5]*b+x[13];x[14]=x[2]*a+x[6]*b+x[14];x[15]=x[3]*a+x[7]*b+x[15]}function u(){var a;w&&(a=w*Math.PI/180,y=Math.sin(a),J=Math.cos(a),B=x[0],T=x[1],p=x[2],ea=x[3],ia=x[4],ja=x[5],ka=x[6],la=x[7],x[0]=B*J+ia*y,x[1]=T*J+ja*y,x[2]=p*J+ka*y,x[3]=ea*J+la*y,x[4]=ia*J-B*y,x[5]=ja*J-T*y,x[6]=ka*J-p*y,x[7]=la*J-ea*y)}var x=f.matrix,y,J,K,A,I,W=0,P,U=0,c=0,w=0,B,T,p,ea,ia,ja,ka,la;if(k||l||q){K=g*t;for(P=0;P<d;P++)A=Math.pow(2,P),
I=Math.pow(0.5,P),W+=I,q&&(w+=b(K*A,7*A)*I),k&&(U+=b(K*A,11*A)*I),l&&(c+=b(K*A,13*A)*I);w*=q/W;U*=k/W;c*=l/W;m.identity(x);e(U+n,c+h);u();e(-n,-h);f.transformed=!0}else f.transformed=!1}var f=this,d=1,g=0,k=0,l=0,n=0,h=0,t=1,q=0;e();return{inputs:{time:{get:function(){return g},set:function(b){if(b===g)return!1;g=b;a();return!0},type:"number"},frequency:{get:function(){return t},set:function(b){if(b===t)return!1;t=b;a();return!0},type:"number"},octaves:{get:function(){return d},set:function(b){b=
Math.max(1,b);if(b===d)return!1;d=b;a();return!0},type:"number"},rotation:{get:function(){return q},set:function(b){if(b===q)return!1;q=b;a();return!0},type:"number"},centerX:{get:function(){return n},set:function(b){if(b===n)return!1;n=b;a();return!0},type:"number"},centerY:{get:function(){return h},set:function(b){if(b===h)return!1;h=b;a();return!0},type:"number"},amplitudeX:{get:function(){return k},set:function(b){b=Math.max(0,b);if(b===k)return!1;k=b;a();return!0},type:"number"},amplitudeY:{get:function(){return l},
set:function(b){b=Math.max(0,b);if(b===l)return!1;l=b;a();return!0},type:"number"}}}},{title:"Camera Shake"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):d(a.Seriously)})(this,function(a,d){var e=a.util.mat4;a.transform("3d",function(a){function m(){function a(b,c,e){s[12]=s[0]*b+s[4]*c+s[8]*e+s[12];s[13]=s[1]*b+s[5]*c+s[9]*e+s[13];s[14]=s[2]*b+s[6]*c+s[10]*e+s[14];s[15]=s[3]*b+s[7]*c+s[11]*e+s[15]}function b(){var a;L&&(a=-(q?L*Math.PI/180:L),x=Math.sin(a),y=Math.cos(a),W=s[4],P=s[5],U=s[6],c=s[7],w=s[8],B=s[9],T=s[10],p=
s[11],s[4]=W*y+w*x,s[5]=P*y+B*x,s[6]=U*y+T*x,s[7]=c*y+p*x,s[8]=w*y-W*x,s[9]=B*y-P*x,s[10]=T*y-U*x,s[11]=p*y-c*x)}function d(){var a;C&&(a=-(q?C*Math.PI/180:C),x=Math.sin(a),y=Math.cos(a),J=s[0],K=s[1],A=s[2],I=s[3],w=s[8],B=s[9],T=s[10],p=s[11],s[0]=J*y-w*x,s[1]=K*y-B*x,s[2]=A*y-T*x,s[3]=I*y-p*x,s[8]=J*x+w*y,s[9]=K*x+B*y,s[10]=A*x+T*y,s[11]=I*x+p*y)}function m(){var a;O&&(a=-(q?O*Math.PI/180:O),x=Math.sin(a),y=Math.cos(a),J=s[0],K=s[1],A=s[2],I=s[3],W=s[4],P=s[5],U=s[6],c=s[7],s[0]=J*y+W*x,s[1]=K*
y+P*x,s[2]=A*y+U*x,s[3]=I*y+c*x,s[4]=W*y-J*x,s[5]=P*y-K*x,s[6]=U*y-A*x,s[7]=c*y-I*x)}var s=t.matrix,x,y,J,K,A,I,W,P,U,c,w,B,T,p;u||v||D||L||C||O||1!==k||1!==g||1!==l?(e.identity(s),a(u+h,v+f,D+n),"XYZ"===M?(b(),d(),m()):"XZY"===M?(b(),m(),d()):"YXZ"===M?(d(),b(),m()):"YZX"===M?(d(),m(),b()):"ZXY"===M?(m(),b(),d()):(m(),d(),b()),1!==k&&(s[0]*=k,s[1]*=k,s[2]*=k,s[3]*=k),1!==g&&(s[4]*=g,s[5]*=g,s[6]*=g,s[7]*=g),1!==l&&(s[8]*=l,s[9]*=l,s[10]*=l,s[11]*=l),a(-h,-f,-n),t.transformed=!0):t.transformed=!1}
var t=this,q=!(a&&a.radians),h=0,f=0,n=0,k=1,g=1,l=1,u=0,v=0,D=0,L=0,C=0,O=0,M="XYZ";return{inputs:{reset:{method:function(){n=f=h=0;l=g=k=1;O=C=L=D=v=u=0;return t.transformed?(t.transformed=!1,!0):!1}},translate:{method:function(a,b,e){isNaN(a)&&(a=u);isNaN(b)&&(b=v);isNaN(e)&&(e=D);if(a===u&&b===v&&e===D)return!1;u=a;v=b;D=e;m();return!0},type:["number","number","number"]},translateX:{get:function(){return u},set:function(a){if(a===u)return!1;u=a;m();return!0},type:"number"},translateY:{get:function(){return v},
set:function(a){if(a===v)return!1;v=a;m();return!0},type:"number"},translateZ:{get:function(){return D},set:function(a){if(a===D)return!1;D=a;m();return!0},type:"number"},rotationOrder:{get:function(){return M},set:function(a){if(a===M)return!1;M=a;m();return!0},type:"number"},rotationX:{get:function(){return L},set:function(a){if(a===L)return!1;L=a;m();return!0},type:"number"},rotationY:{get:function(){return C},set:function(a){if(a===C)return!1;C=a;m();return!0},type:"number"},rotationZ:{get:function(){return O},
set:function(a){if(a===O)return!1;O=a;m();return!0},type:"number"},center:{method:function(a,b,e){isNaN(a)&&(a=h);isNaN(b)&&(b=f);isNaN(e)&&(e=n);if(a===h&&b===f&&e===n)return!1;h=a;f=b;n=e;m();return!0},type:["number","number","number"]},centerX:{get:function(){return h},set:function(a){if(a===h)return!1;h=a;m();return!0},type:"number"},centerY:{get:function(){return f},set:function(a){if(a===f)return!1;f=a;m();return!0},type:"number"},centerZ:{get:function(){return n},set:function(a){if(a===n)return!1;
n=a;m();return!0},type:"number"},scale:{method:function(a,b,e){var f,n;f=isNaN(a)?k:a;isNaN(b)?!isNaN(a)&&isNaN(e)?n=a=f:a=g:a=b;isNaN(e)?n===d&&(n=l):n=e;if(f===k&&a===g&&n===l)return!1;k=f;g=a;l=n;m();return!0},type:["number","number","number"]},scaleX:{get:function(){return k},set:function(a){if(a===k)return!1;k=a;m();return!0},type:"number"},scaleY:{get:function(){return g},set:function(a){if(a===g)return!1;g=a;m();return!0},type:"number"},scaleZ:{get:function(){return l},set:function(a){if(a===
l)return!1;l=a;m();return!0},type:"number"}}}},{title:"3D Transform",description:"Translate, Rotate, Scale"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){var e,b;b=document.createElement("img");b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAvAAAAAICAYAAACf+MsnAAAFY0lEQVR4Xu2Z644bOwyDN+//0NsOigEMQdRHyU6CFDnA+bHVWNaFojiTx8/Pz+/f/4/89/v7z9Xj8Tjib3XyTN9usFcMz8gt3h9zXf/O6nD/W1V7Vb9uXad+nHucZ9xenX7OqTHdSfmRXfmPsSn8xPMrllcfCkdVfHSe7Ned0/yp7jv2GPfqK+MCByc0zzvxKi5RPq8cuvE4+JrwpFM7N78K2yu+qb9kd3qV+ZjUx5n/+xnXP81ctW/UHQ5P3Gd360vxKf+n8dGpxXTeKu6h2ansFT6pvo5G2/FP99NsUf9d/xleInfetcj629m9cf9WOV5K+78R8ERGRLYO8VQiecd/1vwKEJV46JBJRzhRfXftVL/MTgM48UmL0l2OSmzs9kctAJfE4/1KkNFzbj8cjFHsJ/u460vhnPDfqddujJ27poLCWWBuHt0YKr/ki+yOKJnk5Z7pPLfLf4TZif+qvi7XuDWg+HbtNEe79ds9H7m1m2/3+YzLK5Hc9e/gYxdfNP+ZfdV9lT3usWn+9310/qiAdxa1O5gTEqVhoLudxVwVNPrvCqDp/ZX4d0Uk1Y7sbgyU4zooCk8nB3i9Y61V5wWpIjDlP+ZJsxPvmLxEOD2sntk5Pz1LBOb0L+sPfQGs6ksYpt7QAiHuUwtkgl+F3Qyf2YxTX53+Vdjfjc8VYIq7KT+abzof7ervZ8fX8d/Jyc3PmTcnRrrPEbyVTnD8T+Y38pH624mfNIr6muzO95S/sh1Gvog/XmW/a6N+scww43zgqLjcOX9cwFeESQK3Gpx32QggTlwk8Ei8OXfE4VMLeCLQiLBjfJM7VA069XefnZBGJz7Vr24dK3GwEoqLD7p/1+4IMWdRdxaMK9CmP4E62F7nm8S7s4B3BMCkBzQPVQ0IM06+2WLvzlDlI+NfF4d0ljiHuF/Zb/4m/4ojTgnA6f0qfiWA135P5l/NoFv/7txm+5ZyyOw0e1R/skd8ZKKwwnjXf9xLrkBV+2x3Pib9Vz3JOMaNL/KZ+oCkXhDUTLxEwLsC41OfI5DEYe9+mXfr0l2mJH5ISHTOUw2U8IjD5LyVUtxEmrvi4V5ejvijWNWicBbOyfsrYejkMMXmdIFEAZH19ASWnNyrPlBdKH+yU3y0gGjGKf4Mv51ft9zzKk83vul5qr9r7+CT9gHx2zvs0/yofpGX1AuC4svqhYJeJJydNZk/urcSxet91dfiUy94HX6oBHCHi5+F38svCeg1h+zZ6nyF5VUzVC8Q0X9LwE/IkMjmpJ3i27XvxuqQ0c4dp/JTfnb9T847AoNIW/nokIYrYKvnJvln/siPwtD0XAeTU+x0luEugWdLNeY4ecl260vxK8Efl3OnZi4uaZZIMBFeJ/hw6xrFvppvV1Q559d8MwwR50cskIBQ2KhE3y7/ZeddAUjxOr3diZ/8U3+I953z7uzR7Lj4rvjl9HxXvaHaOflSfSkf93y24xx94PpX89I5H2t9+fwK+KVzNOwdIeM+e905+ZqqRIj7pYHiU3FNFnBnkO+41EKige3cpX7GunwoARfjIwKrxNhEJFLfMrsbI+G/smfkojAa60vxPcNeCZCqhjSra6ydBaAWSFzaqnb01c4VEdVCWWPM7svstKDWuKrZpwUb7dVsOzPcxUeGdYdfdgV8Vr+Mv1R8Tn/iHcSNWR8jjjv9URzama9qbp0XlBP4y2Jw6u/E577AZTVz/BM/OfySzSjl79o73FRxaFdfuPG5/XE58PbXEvAT8UBn1HKuSIB8ThYwiZfJnd8z768Aib/3R/iN4J0VeMXcVwvynbl/735OBV6BKTfyT+e/T4/f7dP3uW8F3Aqs/PIHbWXeeeKjnSsAAAAASUVORK5CYII=";e=
new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);a.plugin("ascii",function(){function d(){k=v.height;n=v.width;g=Math.ceil(n/8);l=Math.ceil(k/8);u.resolution=v.uniforms.resolution;u.transform=e;q&&q.resize(g,l)}var t,q,h,f,n,k,g,l,u={},v=this;return{initialize:function(k){function n(){f.bindTexture(f.TEXTURE_2D,h);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);
f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!0);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,b);f.bindTexture(f.TEXTURE_2D,null)}var v=this;k();this.texture=this.frameBuffer.texture;f=this.gl;h=f.createTexture();b.naturalWidth?n():b.addEventListener("load",function(){n();v.setDirty()});u.letters=h;f.bindTexture(f.TEXTURE_2D,this.texture||this.frameBuffer&&this.frameBuffer.texture);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,
f.NEAREST);f.bindTexture(f.TEXTURE_2D,null);d();q=new a.util.FrameBuffer(f,g,l);f.bindTexture(f.TEXTURE_2D,q.texture);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);this.uniforms.transform=e;t=this.baseShader},commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform sampler2D letters;\nuniform vec4 background;\nuniform vec2 resolution;\n\nconst vec3 lumcoeff = vec3(0.2125,0.7154,0.0721);\nconst vec2 fontSize = vec2(8.0, 8.0);\n\nvec4 lookup(float ascii) {\n\tvec2 pos = mod(vTexCoord * resolution, fontSize) / vec2(752.0, fontSize.x) + vec2(ascii, 0.0);\n\treturn texture2D(letters, pos);\n}\n\nvoid main(void) {\n\tvec4 sample = texture2D(source, vTexCoord);\n\tfloat luma = dot(sample.rgb,lumcoeff);\n\tvec4 clamped = vec4(floor(sample.rgb * 8.0) / 8.0, sample.a);\n\tfloat char = floor(luma * 94.0) / 94.0;\n\tgl_FragColor = mix(background, clamped, lookup(char).r);\n}\n";
return b},resize:d,draw:function(a,b,e,d,f){f(t,b,e,q.frameBuffer,!1,{width:g,height:l,blend:!1});u.source=q.texture;u.background=e.background;f(a,b,u,d)},destroy:function(){q&&q.destroy();f&&h&&f.deleteTexture(h)}}},{inPlace:!1,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},background:{type:"color",uniform:"background",defaultValue:[0,0,0,1]}},description:"Display image as ascii text in 8-bit color.",title:"Ascii Text"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("bleach-bypass",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\n\nuniform float amount;\n\n//constant variables.\nconst vec4 one = vec4(1.0);\nconst vec4 two = vec4(2.0);\nconst vec4 lumcoeff = vec4(0.2125,0.7154,0.0721,0.0);\n\nvec4 overlay(vec4 myInput, vec4 previousmix, vec4 amount) {\n\tfloat luminance = dot(previousmix,lumcoeff);\n\tfloat mixamount = clamp((luminance - 0.45) * 10.0, 0.0, 1.0);\n\n\tvec4 branch1 = two * previousmix * myInput;\n\tvec4 branch2 = one - (two * (one - previousmix) * (one - myInput));\n\n\tvec4 result = mix(branch1, branch2, vec4(mixamount) );\n\n\treturn mix(previousmix, result, amount);\n}\n\nvoid main (void)  {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tvec4 luma = vec4(vec3(dot(pixel,lumcoeff)), pixel.a);\n\tgl_FragColor = overlay(luma, pixel, vec4(amount));\n\n} \n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},amount:{type:"number",uniform:"amount",defaultValue:1,min:0,max:1}},title:"Bleach Bypass",categories:["film"],description:'Bleach Bypass film treatment\nhttp://en.wikipedia.org/wiki/Bleach_bypass\nsee: "Saving Private Ryan", "Minority Report"'})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){var e={normal:"BlendNormal",lighten:"BlendLighten",darken:"BlendDarken",multiply:"BlendMultiply",average:"BlendAverage",add:"BlendAdd",subtract:"BlendSubtract",difference:"BlendDifference",negation:"BlendNegation",exclusion:"BlendExclusion",screen:"BlendScreen",overlay:"BlendOverlay",
softlight:"BlendSoftLight",hardlight:"BlendHardLight",colordodge:"BlendColorDodge",colorburn:"BlendColorBurn",lineardodge:"BlendLinearDodge",linearburn:"BlendLinearBurn",linearlight:"BlendLinearLight",vividlight:"BlendVividLight",pinlight:"BlendPinLight",hardmix:"BlendHardMix",reflect:"BlendReflect",glow:"BlendGlow",phoenix:"BlendPhoenix"},b={normal:["FUNC_ADD","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","SRC_ALPHA","DST_ALPHA"]},m=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);a.plugin("blend",function(){var a,
d,h={clear:!1};this.resize=function(){var b,e;b=this.inputs.sizeMode;var k;k=this.inputs.bottom;var g=this.inputs.top;"bottom"===b||"top"===b?(e=this.inputs[b])?(b=e.width,e=e.height):e=b=1:k?g?(e="union"===b?Math.max:Math.min,b=e(k.width,g.width),e=e(k.height,g.height)):(b=k.width,e=k.height):g?(b=g.width,e=g.height):e=b=1;if(this.width!==b||this.height!==e)this.width=b,this.height=e,this.uniforms.resolution[0]=b,this.uniforms.resolution[1]=e,this.frameBuffer&&this.frameBuffer.resize(b,e),this.emit("resize"),
this.setDirty();a&&(k&&(d.resolution[0]=k.width,d.resolution[1]=k.height),g&&(a.resolution[0]=g.width,a.resolution[1]=g.height));for(k=0;k<this.targets.length;k++)this.targets[k].resize()};return{shader:function(f,n){var k=f.mode||"normal",k=k.toLowerCase();if(b[k])return a||(k=this.inputs.top,a={resolution:[k&&k.width||1,k&&k.height||1],targetRes:this.uniforms.resolution,source:k,transform:k&&k.cumulativeMatrix||m,opacity:1},k=this.inputs.bottom,d={resolution:[k&&k.width||1,k&&k.height||1],targetRes:this.uniforms.resolution,
source:k,transform:k&&k.cumulativeMatrix||m,opacity:1}),n.vertex="precision mediump float;\nattribute vec4 position;\nattribute vec2 texCoord;\nuniform vec2 resolution;\nuniform vec2 targetRes;\nuniform mat4 transform;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nvoid main(void) {\n\tvec4 screenPosition = vec4(position.xy * resolution / 2.0, position.z, position.w);\n\tscreenPosition = transform * screenPosition;\n\tgl_Position.xy = screenPosition.xy * 2.0 / resolution;\n\tgl_Position.z = screenPosition.z * 2.0 / (resolution.x / resolution.y);\n\tgl_Position.xy *= resolution / targetRes;\n\tgl_Position.w = screenPosition.w;\n\tvTexCoord = texCoord;\n\tvPosition = gl_Position;\n}\n",
n.fragment="precision mediump float;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform float opacity;\nvoid main(void) {\n\tgl_FragColor = texture2D(source, vTexCoord);\n\tgl_FragColor.a *= opacity;\n}",n;d=a=null;k=e[k]||"BlendNormal";n.fragment="#define BlendFunction "+k+"\n#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\n#define BlendLinearDodgef\t\t\t\tBlendAddf\n#define BlendLinearBurnf\t\t\t\tBlendSubtractf\n#define BlendAddf(base, blend)\t\t\tmin(base + blend, 1.0)\n#define BlendSubtractf(base, blend)\tmax(base + blend - 1.0, 0.0)\n#define BlendLightenf(base, blend)\t\tmax(blend, base)\n#define BlendDarkenf(base, blend)\t\tmin(blend, base)\n#define BlendLinearLightf(base, blend)\t(blend < 0.5 ? BlendLinearBurnf(base, (2.0 * blend)) : BlendLinearDodgef(base, (2.0 * (blend - 0.5))))\n#define BlendScreenf(base, blend)\t\t(1.0 - ((1.0 - base) * (1.0 - blend)))\n#define BlendOverlayf(base, blend)\t\t(base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)))\n#define BlendSoftLightf(base, blend)\t((blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend)))\n#define BlendColorDodgef(base, blend)\t((blend == 1.0) ? blend : min(base / (1.0 - blend), 1.0))\n#define BlendColorBurnf(base, blend)\t((blend == 0.0) ? blend : max((1.0 - ((1.0 - base) / blend)), 0.0))\n#define BlendVividLightf(base, blend)\t((blend < 0.5) ? BlendColorBurnf(base, (2.0 * blend)) : BlendColorDodgef(base, (2.0 * (blend - 0.5))))\n#define BlendPinLightf(base, blend)\t((blend < 0.5) ? BlendDarkenf(base, (2.0 * blend)) : BlendLightenf(base, (2.0 *(blend - 0.5))))\n#define BlendHardMixf(base, blend)\t\t((BlendVividLightf(base, blend) < 0.5) ? 0.0 : 1.0)\n#define BlendReflectf(base, blend)\t\t((blend == 1.0) ? blend : min(base * base / (1.0 - blend), 1.0))\n#define Blend(base, blend, funcf)\t\tvec3(funcf(base.r, blend.r), funcf(base.g, blend.g), funcf(base.b, blend.b))\n#define BlendNormal(base, blend)\t\t(blend)\n#define BlendLighten\t\t\t\t\tBlendLightenf\n#define BlendDarken\t\t\t\t\tBlendDarkenf\n#define BlendMultiply(base, blend)\t\t(base * blend)\n#define BlendAverage(base, blend)\t\t((base + blend) / 2.0)\n#define BlendAdd(base, blend)\t\t\tmin(base + blend, vec3(1.0))\n#define BlendSubtract(base, blend)\tmax(base + blend - vec3(1.0), vec3(0.0))\n#define BlendDifference(base, blend)\tabs(base - blend)\n#define BlendNegation(base, blend)\t\t(vec3(1.0) - abs(vec3(1.0) - base - blend))\n#define BlendExclusion(base, blend)\t(base + blend - 2.0 * base * blend)\n#define BlendScreen(base, blend)\t\tBlend(base, blend, BlendScreenf)\n#define BlendOverlay(base, blend)\t\tBlend(base, blend, BlendOverlayf)\n#define BlendSoftLight(base, blend)\tBlend(base, blend, BlendSoftLightf)\n#define BlendHardLight(base, blend)\tBlendOverlay(blend, base)\n#define BlendColorDodge(base, blend)\tBlend(base, blend, BlendColorDodgef)\n#define BlendColorBurn(base, blend)\tBlend(base, blend, BlendColorBurnf)\n#define BlendLinearDodge\t\t\t\tBlendAdd\n#define BlendLinearBurn\t\t\t\tBlendSubtract\n#define BlendLinearLight(base, blend)\tBlend(base, blend, BlendLinearLightf)\n#define BlendVividLight(base, blend)\tBlend(base, blend, BlendVividLightf)\n#define BlendPinLight(base, blend)\t\tBlend(base, blend, BlendPinLightf)\n#define BlendHardMix(base, blend)\t\tBlend(base, blend, BlendHardMixf)\n#define BlendReflect(base, blend)\t\tBlend(base, blend, BlendReflectf)\n#define BlendGlow(base, blend)\t\t\tBlendReflect(blend, base)\n#define BlendPhoenix(base, blend)\t\t(min(base, blend) - max(base, blend) + vec3(1.0))\n#define BlendOpacity(base, blend, BlendFn, Opacity, Alpha)\t((BlendFn(base.rgb * blend.a * Opacity, blend.rgb * blend.a * Opacity) + base.rgb * base.a * (1.0 - blend.a * Opacity)) / Alpha)\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D top;\n\nuniform sampler2D bottom;\n\nuniform float opacity;\n\nvoid main(void) {\n\tvec3 color;\n\tvec4 topPixel = texture2D(top, vTexCoord);\n\tvec4 bottomPixel = texture2D(bottom, vTexCoord);\n\tfloat alpha = topPixel.a + bottomPixel.a * (1.0 - topPixel.a);\n\tif (alpha == 0.0) {\n\t\tcolor = vec3(0.0);\n\t} else {\n\t\tcolor = BlendOpacity(bottomPixel, topPixel, BlendFunction, opacity, alpha);\n\t}\n\tgl_FragColor = vec4(color, alpha);\n}\n";
return n},draw:function(e,n,k,g,l){b[this.inputs.mode]?(this.inputs.bottom&&l(e,n,d,g),this.inputs.top&&l(e,n,a,g,null,h)):l(e,n,k,g)},inputs:{top:{type:"image",uniform:"top",update:function(){a&&(a.source=this.inputs.top,a.transform=this.inputs.top.cumulativeMatrix||m);this.resize()}},bottom:{type:"image",uniform:"bottom",update:function(){d&&(d.source=this.inputs.bottom,d.transform=this.inputs.bottom.cumulativeMatrix||m);this.resize()}},opacity:{type:"number",uniform:"opacity",defaultValue:1,min:0,
max:1,update:function(b){a&&(a.opacity=b)}},sizeMode:{type:"enum",defaultValue:"bottom",options:["bottom","top","union","intersection"],update:function(){this.resize()}},mode:{type:"enum",shaderDirty:!0,defaultValue:"normal",options:[["normal","Normal"],["lighten","Lighten"],["darken","Darken"],["multiply","Multiply"],["average","Average"],["add","Add"],["substract","Substract"],["difference","Difference"],["negation","Negation"],["exclusion","Exclusion"],["screen","Screen"],["overlay","Overlay"],
["softlight","Soft Light"],["hardlight","Hard Light"],["colordodge","Color Dodge"],["colorburn","Color Burn"],["lineardodge","Linear Dodge"],["linearburn","Linear Burn"],["linearlight","Linear Light"],["vividlight","Vivid Light"],["pinlight","Pin Light"],["hardmix","Hard Mix"],["reflect","Reflect"],["glow","Glow"],["phoenix","Phoenix"]]}}}},{inPlace:function(){return!!b[this.inputs.mode]},description:"Blend two layers",title:"Blend"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){var e=[0.2,0.3,0.5,0.8,1],b=e.length-1,m=[1,0],t=[0,1],q=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);a.plugin("blur",function(d){var f,n,k,g={amount:0,inputScale:1,resolution:[this.width,this.height],transform:q,direction:null,projection:new Float32Array([1,0,0,0,0,
1,0,0,0,0,1,0,0,0,0,1])};return{initialize:function(b){b();if(b=this.gl)k=this.baseShader,f=new a.util.FrameBuffer(b,this.width,this.height),n=new a.util.FrameBuffer(b,this.width,this.height)},commonShader:!0,shader:function(a,b){var e=this.gl,e=10<=e.getParameter(e.MAX_VARYING_VECTORS)?"#define USE_VARYINGS":"";b.vertex=[e,"#define PI "+Math.PI,"precision mediump float;\nattribute vec4 position;\nattribute vec2 texCoord;\nuniform vec2 resolution;\nuniform mat4 projection;\nuniform mat4 transform;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform vec2 direction;\nuniform float amount;\nuniform float inputScale;\nconst vec2 zero = vec2(0.0, 0.0);\n#ifdef USE_VARYINGS\nvec2 one;\nvec2 amount1;\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying vec2 vTexCoord3;\nvarying vec2 vTexCoord4;\nvarying vec2 vTexCoord5;\nvarying vec2 vTexCoord6;\nvarying vec2 vTexCoord7;\nvarying vec2 vTexCoord8;\n#else\nvarying vec2 one;\nvarying vec2 amount1;\n#endif\nvoid main(void) {\n\tvec4 screenPosition = vec4(position.xy * resolution / 2.0, position.z, position.w);\n\tscreenPosition = transform * screenPosition;\n\tgl_Position = screenPosition;\n\tgl_Position.xy = screenPosition.xy * 2.0 / resolution;\n\tgl_Position.z = screenPosition.z * 2.0 / (resolution.x / resolution.y);\n\tvTexCoord = texCoord;\n\tvPosition = gl_Position;\n\tone = vec2(1.0, 1.0) * inputScale;\n\tif (inputScale < 1.0) {\n\t\tone -= 1.0 / resolution;\n\t}\n\tvTexCoord = max(zero, min(one, texCoord.st * inputScale));\n\tamount1 = direction * (inputScale * amount * 5.0 / resolution);\n#ifdef USE_VARYINGS\n\tvec2 amount2 = amount1 * 3.0;\n\tvec2 amount3 = amount1 * 6.0;\n\tvec2 amount4 = amount1 * 9.0;\n\tvec2 amount5 = -amount1;\n\tvec2 amount6 = amount5 * 3.0;\n\tvec2 amount7 = amount5 * 6.0;\n\tvec2 amount8 = amount5 * 9.0;\n\tvTexCoord1 = max(zero, min(one, vTexCoord + amount1));\n\tvTexCoord2 = max(zero, min(one, vTexCoord + amount2));\n\tvTexCoord3 = max(zero, min(one, vTexCoord + amount3));\n\tvTexCoord4 = max(zero, min(one, vTexCoord + amount4));\n\tvTexCoord5 = max(zero, min(one, vTexCoord + amount5));\n\tvTexCoord6 = max(zero, min(one, vTexCoord + amount6));\n\tvTexCoord7 = max(zero, min(one, vTexCoord + amount7));\n\tvTexCoord8 = max(zero, min(one, vTexCoord + amount8));\n#endif\n}"].join("\n");
b.fragment=[e,"precision mediump float;\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform float angle;\nuniform float amount;\nuniform float inputScale;\n#ifdef USE_VARYINGS\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying vec2 vTexCoord3;\nvarying vec2 vTexCoord4;\nvarying vec2 vTexCoord5;\nvarying vec2 vTexCoord6;\nvarying vec2 vTexCoord7;\nvarying vec2 vTexCoord8;\n#else\nvarying vec2 amount1;\nvarying vec2 one;\nconst vec2 zero = vec2(0.0, 0.0);\n#endif\nvoid main(void) {\n#ifndef USE_VARYINGS\n\tvec2 vTexCoord1 = max(zero, min(one, vTexCoord + amount1));\n\tvec2 vTexCoord2 = max(zero, min(one, vTexCoord + amount1 * 3.0));\n\tvec2 vTexCoord3 = max(zero, min(one, vTexCoord + amount1 * 6.0));\n\tvec2 vTexCoord4 = max(zero, min(one, vTexCoord + amount1 * 9.0));\n\tvec2 vTexCoord5 = max(zero, min(one, vTexCoord - amount1));\n\tvec2 vTexCoord6 = max(zero, min(one, vTexCoord - amount1 * 3.0));\n\tvec2 vTexCoord7 = max(zero, min(one, vTexCoord - amount1 * 6.0));\n\tvec2 vTexCoord8 = max(zero, min(one, vTexCoord - amount1 * 9.0));\n#endif\n\tgl_FragColor = texture2D(source, vTexCoord) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord1) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord2) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord3) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord4) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord5) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord6) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord7) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord8) / 9.0;\n}"].join("\n");
return b},draw:function(a,d,h,q,L){var C,O,M,F,E={width:0,height:0,blend:!1},H=1;if(O=this.inputs.amount)if(0.01>=O)h.inputScale=1,h.direction=m,h.source=this.inputs.source.texture,L(a,d,h,f.frameBuffer),h.direction=t,h.source=n.texture,L(a,d,h,q);else for(g.amount=O,g.source=this.inputs.source.texture,g.projection[0]=this.height/this.width,h=0;h<e.length;h++)C=Math.min(1,e[h]/O),M=Math.floor(C*this.width),F=Math.floor(C*this.height),g.resolution[0]=M,g.resolution[1]=F,g.inputScale=H,H=C,E.width=
M,E.height=F,g.direction=m,L(a,d,g,f.frameBuffer,null,E),g.inputScale=C,g.source=f.texture,g.direction=t,L(a,d,g,h===b?q:n.frameBuffer,null,E),g.source=n.texture;else h.source=this.inputs.source.texture,L(k,d,h,q)},resize:function(){g.resolution[0]=this.width;g.resolution[1]=this.height;f&&(f.resize(this.width,this.height),n.resize(this.width,this.height))},destroy:function(){f&&(f.destroy(),n.destroy(),n=f=null);k&&k.destroy();g=null}}},{inputs:{source:{type:"image",shaderDirty:!1},amount:{type:"number",
uniform:"amount",defaultValue:0.2,min:0,max:1}},title:"Gaussian Blur"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("brightness-contrast",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform float brightness;\nuniform float saturation;\nuniform float contrast;\nconst vec3 half3 = vec3(0.5);\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tvec3 color = pixel.rgb * brightness;\n\tcolor = (color - half3) * contrast + half3;\n\tgl_FragColor = vec4(color, pixel.a);\n}";return b},
inPlace:!0,inputs:{source:{type:"image",uniform:"source"},brightness:{type:"number",uniform:"brightness",defaultValue:1,min:0},contrast:{type:"number",uniform:"contrast",defaultValue:1,min:0}},title:"Brightness/Contrast",description:"Multiply brightness and contrast values. Works the same as CSS filters."})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){var e=["Red","Green","Blue","Alpha"],b={r:0,g:1,b:2,a:3,x:0,y:1,z:2,w:3};a.plugin("channels",function(){function m(a,e,f){"string"===typeof a?(e=a.charAt(0).toLowerCase(),e=b[e],e===d&&(e=-1),0>e&&(e=parseFloat(a))):e=a;return 0===e||1===e||2===e||3===e?e:k.inputs[f]}function t(){var a=
k.inputs,b,e,d,f;for(b=0;b<h.length;b++){d=h[b];f=n[b];f||(f=n[b]=[],k.uniforms["channels"+b]=f);for(e=0;16>e;e++)f[e]=0;f[a.red]=a.redSource===d?1:0;f[4+a.green]=a.greenSource===d?1:0;f[8+a.blue]=a.blueSource===d?1:0;f[12+a.alpha]=a.alphaSource===d?1:0}}function q(){function a(e){var d;d=b[e];d||(d=b[e]=b.source);e=h.indexOf(d);0>e&&(e=h.length,h.push(d),k.uniforms["source"+e]=d)}var b=k.inputs;h.length=0;a("redSource");a("greenSource");a("blueSource");a("alphaSource");k.resize();t()}var h=[],f=
[],n=[],k=this;this.resize=function(){var a,b;a=this.inputs.sizeMode;var e,d,f;if(h.length)if(1===h.length)f=h[0],a=f.width,b=f.height;else if("union"===a)for(e=b=a=0;e<h.length;e++)f=h[0],a=Math.max(a,f.width),b=Math.max(b,f.height);else if("intersection"===a)for(b=a=Infinity,e=0;e<h.length;e++)f=h[0],a=Math.min(a,f.width),b=Math.min(b,f.height);else(f=k.inputs[a+"Source"])?(a=f.width,b=f.height):b=a=1;else b=a=1;for(e=0;e<h.length;e++)f=h[e],(d=k.uniforms["resolution"+e])?(d[0]=f.width,d[1]=f.height):
k.uniforms["resolution"+e]=[f.width,f.height];if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.uniforms.resolution[0]=a,this.uniforms.resolution[1]=b,this.frameBuffer&&this.frameBuffer.resize(a,b),this.emit("resize"),this.setDirty();for(e=0;e<this.targets.length;e++)this.targets[e].resize()};return{shader:function(){var b,e,d=e="",k="",n="";if(f[h.length])return f[h.length];for(b=0;b<h.length;b++)k+="varying vec2 vTexCoord"+b+";\n",e+="uniform sampler2D source"+b+";\nuniform mat4 channels"+
b+";\nuniform vec2 resolution"+b+";\n\n",n+="    vTexCoord"+b+" = (position.xy * resolution / resolution"+b+") * 0.5 + 0.5;\n",d+="    if (all(greaterThanEqual(vTexCoord"+b+", vec2(0.0))) && all(lessThan(vTexCoord"+b+", vec2(1.0)))) {\n        gl_FragColor += texture2D(source"+b+", vTexCoord"+b+") * channels"+b+";\n    }\n";b=["#ifdef GL_ES\nprecision mediump float;\n#endif\nattribute vec4 position;\nattribute vec2 texCoord;\nuniform vec2 resolution;",e,k,"void main(void) {",n,"\tgl_Position = position;\n}\n"].join("\n");
e=new a.util.ShaderProgram(this.gl,b,"#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\n"+k+"\n"+e+"\nvoid main(void) {\n\tgl_FragColor = vec4(0.0);\n"+d+"}\n");return f[h.length]=e},inputs:{sizeMode:{type:"enum",defaultValue:"red",options:"red green blue alpha union intersection".split(" "),update:function(){this.resize()}},source:{type:"image",update:q,shaderDirty:!0},redSource:{type:"image",update:q,shaderDirty:!0},greenSource:{type:"image",update:q,shaderDirty:!0},blueSource:{type:"image",
update:q,shaderDirty:!0},alphaSource:{type:"image",update:q,shaderDirty:!0},red:{type:"enum",options:e,validate:m,update:t,defaultValue:0},green:{type:"enum",options:e,validate:m,update:t,defaultValue:1},blue:{type:"enum",options:e,validate:m,update:t,defaultValue:2},alpha:{type:"enum",options:e,validate:m,update:t,defaultValue:3}}}},{inPlace:!1,title:"Channel Mapping"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("checkerboard",function(){function a(){b.resize()}var b=this;return{initialize:function(b){b();a()},shader:function(a,b){b.vertex="#ifdef GL_ES\nprecision mediump float;\n#endif\nattribute vec4 position;\nattribute vec2 texCoord;\nuniform vec2 resolution;\nuniform mat4 transform;\nuniform vec2 size;\nuniform vec2 anchor;\nvec2 pixelCoord;\nvarying vec2 vGridCoord;\nvoid main(void) {\n\tvec4 screenPosition = vec4(position.xy * resolution / 2.0, position.z, position.w);\n\tscreenPosition = transform * screenPosition;\n\tgl_Position.xy = screenPosition.xy * 2.0 / resolution;\n\tgl_Position.z = screenPosition.z * 2.0 / (resolution.x / resolution.y);\n\tgl_Position.w = screenPosition.w;\n\tpixelCoord = resolution * (texCoord - 0.5) / 2.0;\n\tvGridCoord = (pixelCoord - anchor) / size;\n}\n";
b.fragment="#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec2 vTexCoord;\nvarying vec2 vPixelCoord;\nvarying vec2 vGridCoord;\nuniform vec2 resolution;\nuniform vec2 anchor;\nuniform vec2 size;\nuniform vec4 color1;\nuniform vec4 color2;\nvoid main(void) {\n\tvec2 modGridCoord = floor(mod(vGridCoord, 2.0));\n\tif (modGridCoord.x == modGridCoord.y) {\n\t\tgl_FragColor = color1;\n\t} else  {\n\t\tgl_FragColor = color2;\n\t}\n}";return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source",
shaderDirty:!1},anchor:{type:"vector",uniform:"anchor",dimensions:2,defaultValue:[0,0]},size:{type:"vector",uniform:"size",dimensions:2,defaultValue:[4,4]},color1:{type:"color",uniform:"color1",defaultValue:[1,1,1,1]},color2:{type:"color",uniform:"color2",defaultValue:[187/255,187/255,187/255,1]},width:{type:"number",min:0,step:1,update:a,defaultValue:640},height:{type:"number",min:0,step:1,update:a,defaultValue:360}}}},{commonShader:!0,title:"Checkerboard",categories:["generator"]})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("chroma",{commonShader:!0,shader:function(a,b){b.vertex="#ifdef GL_ES\nprecision mediump float;\n#endif \nattribute vec4 position;\nattribute vec2 texCoord;\nuniform vec2 resolution;\nuniform mat4 transform;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform vec4 screen;\nuniform float balance;\nvarying float screenSat;\nvarying vec3 screenPrimary;\nvoid main(void) {\n\tfloat fmin = min(min(screen.r, screen.g), screen.b);    //Min. value of RGB\n\tfloat fmax = max(max(screen.r, screen.g), screen.b);    //Max. value of RGB\n\tfloat secondaryComponents;\n\tscreenPrimary = step(fmax, screen.rgb);\n\tsecondaryComponents = dot(1.0 - screenPrimary, screen.rgb);\n\tscreenSat = fmax - mix(secondaryComponents - fmin, secondaryComponents / 2.0, balance);\n\tvec4 screenPosition = vec4(position.xy * resolution / 2.0, position.z, position.w);\n\tscreenPosition = transform * screenPosition;\n\tgl_Position = screenPosition;\n\tgl_Position.xy = screenPosition.xy * 2.0 / resolution;\n\tgl_Position.z = screenPosition.z * 2.0 / (resolution.x / resolution.y);\n\tvTexCoord = texCoord;\n\tvPosition = gl_Position;\n}";
b.fragment="#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform vec4 screen;\nuniform float screenWeight;\nuniform float balance;\nuniform float clipBlack;\nuniform float clipWhite;\nuniform bool mask;\nvarying float screenSat;\nvarying vec3 screenPrimary;\nvec4 sourcePixel;\nconst mat3 yuv = mat3(\n\t54.213, 182.376, 18.411,\n\t-54.213, -182.376, 236.589,\n\t200.787, -182.376, -18.411\n);\nfloat round(float n) {\n\treturn floor(n) + step(0.5, fract(n));\n}\nvoid main(void) {\n\tfloat pixelSat, luminance, secondaryComponents;\n\tvec3 pixelPrimary;\n\tvec4 pixel = vec4(0.0);\n\tsourcePixel = texture2D(source, vTexCoord);\n\tfloat fmin = min(min(sourcePixel.r, sourcePixel.g), sourcePixel.b);    //Min. value of RGB\n\tfloat fmax = max(max(sourcePixel.r, sourcePixel.g), sourcePixel.b);    //Max. value of RGB\n\tluminance = fmax; // Luminance\n\tpixelPrimary = step(fmax, sourcePixel.rgb);\n\tsecondaryComponents = dot(1.0 - pixelPrimary, sourcePixel.rgb);\n\tpixelSat = fmax - mix(secondaryComponents - fmin, secondaryComponents / 2.0, balance);\n\tif (pixelSat < 0.1 || luminance < 0.1 || any(notEqual(pixelPrimary, screenPrimary))) {\n\t\tpixel = sourcePixel;\n\t} else if (pixelSat < screenSat) {\n\t\tfloat alpha = 1.0 - pixelSat / screenSat;\n\t\talpha = smoothstep(clipBlack, clipWhite, alpha);\n\t\tpixel = vec4((sourcePixel.rgb - (1.0 - alpha) * screen.rgb * screenWeight) / alpha, alpha);\n\t}\n\tif (mask) {\n\t\tgl_FragColor = vec4(vec3(pixel.a), 1.0);\n\t} else {\n\t\tgl_FragColor = pixel;\n\t}\n}";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source"},screen:{type:"color",uniform:"screen",defaultValue:[66/255,195/255,31/255,1]},weight:{type:"number",uniform:"screenWeight",defaultValue:1,min:0},balance:{type:"number",uniform:"balance",defaultValue:1,min:0,max:1},clipBlack:{type:"number",uniform:"clipBlack",defaultValue:0,min:0,max:1},clipWhite:{type:"number",uniform:"clipWhite",defaultValue:1,min:0,max:1},mask:{type:"boolean",defaultValue:!1,uniform:"mask"}},title:"Chroma Key",
description:""})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("color",{commonShader:!0,shader:function(a,b,d){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform vec4 color;\n\nvoid main(void) {\n\tgl_FragColor = color;\n}\n";return b},inPlace:!0,inputs:{color:{type:"color",
uniform:"color",defaultValue:[0,0,0,1]}},title:"Color",description:"Generate color",categories:["generator"]})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("colorcomplements",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform vec4 guideColor;\nuniform float correlation;\nuniform float amount;\nuniform float concentration;\nfloat hueLerp(float h1, float h2, float v) {\n\tfloat d = abs(h1 - h2);\n\tif (d <= 0.5) {\n\t\treturn mix(h1, h2, v);\n\t} else if (h1 < h2) {\n\t\treturn fract(mix((h1 + 1.0), h2, v));\n\t} else {\n\t\treturn fract(mix(h1, (h2 + 1.0), v));\n\t}\n}\nvec3 rgbToHsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\nvec3 hsvToRgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvec3 hsvComplement(vec3 hsv) {\n\tvec3 compl = hsv;\n\tcompl.x = mod(compl.x - 0.5, 1.0);\n\treturn compl;\n}\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tvec3 hsv = rgbToHsv(pixel.rgb);\n\tvec3 hsvPole1 = rgbToHsv(guideColor.rgb);\n\tvec3 hsvPole2 = hsvPole1;\n\thsvPole2 = hsvComplement(hsvPole1);\n\tfloat dist1 = abs(hsv.x - hsvPole1.x);\n\tdist1 = dist1 > 0.5 ? 1.0 - dist1 : dist1;\n\tfloat dist2 = abs(hsv.x - hsvPole2.x);\n\tdist2 = dist2 > 0.5 ? 1.0 - dist2 : dist2;\n\tfloat descent = smoothstep(0.0, correlation, hsv.y);\n\tvec3 outputHsv = hsv;\n\tvec3 pole = dist1 < dist2 ? hsvPole1 : hsvPole2;\n\tfloat dist = min(dist1, dist2);\n\tfloat c = descent * amount * (1.0 - pow((dist * 2.0), 1.0 / concentration));\n\toutputHsv.x = hueLerp(hsv.x, pole.x, c);\n\toutputHsv.y = mix(hsv.y, pole.y, c);\n\tgl_FragColor = vec4(hsvToRgb(outputHsv), pixel.a);\n}";return b},
inPlace:!0,inputs:{source:{type:"image",uniform:"source"},amount:{type:"number",uniform:"amount",min:0,max:1,defaultValue:0.8},concentration:{type:"number",uniform:"concentration",min:0.1,max:4,defaultValue:2},correlation:{type:"number",uniform:"correlation",min:0,max:1,defaultValue:0.5},guideColor:{type:"color",uniform:"guideColor",defaultValue:[1,0.5,0,1]}},title:"Color Complements",categories:["color"],description:"http://theabyssgazes.blogspot.com/2010/03/teal-and-orange-hollywood-please-stop.html"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("colorcube",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform sampler2D source;\nuniform sampler2D colorCube;\nvarying vec2 vTexCoord;\nvec3 sampleAs3DTexture(sampler2D tex, vec3 coord, float size) {\n\tfloat sliceSize = 1.0 / size;                         // space of 1 slice\n\tfloat slicePixelSize = sliceSize / size;              // space of 1 pixel\n\tfloat sliceInnerSize = slicePixelSize * (size - 1.0); // space of size pixels\n\tfloat zSlice0 = min(floor(coord.z * size), size - 1.0);\n\tfloat zSlice1 = min(zSlice0 + 1.0, size - 1.0);\n\tfloat xOffset = slicePixelSize * 0.5 + coord.x * sliceInnerSize;\n\tfloat s0 = xOffset + (zSlice0 * sliceSize);\n\tfloat s1 = xOffset + (zSlice1 * sliceSize);\n\tvec3 slice0Color = texture2D(tex, vec2(s0, 1.0 - coord.y)).rgb;\n\tvec3 slice1Color = texture2D(tex, vec2(s1, 1.0 - coord.y)).rgb;\n\tfloat zOffset = mod(coord.z * size, 1.0);\n\treturn mix(slice0Color, slice1Color, zOffset);\n}\nvoid main(void) {\n\tvec4 originalColor = texture2D(source, vTexCoord);\n\tvec3 color = sampleAs3DTexture(colorCube, originalColor.rgb, 8.0);\n\tgl_FragColor = vec4(color, originalColor.a);\n}\n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source"},cube:{type:"image",uniform:"colorCube"}},title:"Color Cube",description:""})});
(function(a,d){if("object"===typeof exports)d(require("seriously"));else if("function"===typeof define&&define.amd)define(["seriously"],d);else{var e=a.Seriously;e||(e={plugin:function(a,e){this[a]=e}});d(e)}})(this,function(a,d){a.plugin("daltonize",{commonShader:!0,shader:function(a,b){b.vertex="#ifdef GL_ES\nprecision mediump float;\n#endif \n\nattribute vec3 position;\nattribute vec2 texCoord;\n\nuniform mat4 transform;\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nvoid main(void) {\n\tgl_Position = transform * vec4(position, 1.0);\n\tvTexCoord = vec2(texCoord.s, texCoord.t);\n}\n";b.fragment=
"#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float cbtype;\n\nvoid main(void) {\n\tvec4 color = texture2D(source, vTexCoord);\n\tif (cbtype == 0.0) {\n\t\tgl_FragColor = color;\n\t\treturn;\n\t}\n\tconst mat3 RGBLMS = mat3( \t\t17.8824, 43.5161, 4.11935,\t\t3.45565, 27.1554, 3.86714,\t\t0.0299566, 0.184309, 1.46709\t);\n\tvec3 LMS = color.rgb * RGBLMS;\n\tvec3 lms = vec3(0.0,0.0,0.0);\n\tif (cbtype < 0.33) {\n\t\tlms = vec3(\t\t\t\t(2.02344 * LMS.g) + (-2.52581 * LMS.b),\t\t\tLMS.g,\t\t\tLMS.b\t\t);\n\t}\n\tif (cbtype > 0.33 && cbtype < 0.66) {\n\t\tlms = vec3(\t\t\t\tLMS.r,\t\t\t(0.494207 * LMS.r) + (1.24827 * LMS.b),\t\t\tLMS.b\t\t);\n\t}\n\tif (cbtype > 0.66) {\n\t\tlms = vec3(\t\t\t\tLMS.r,\t\t\tLMS.g,\t\t\t(-0.395913 * LMS.r) + (0.801109 * LMS.g)\t\t);\n\t}\n\tconst mat3 LMSRGB = mat3(    \t\t0.0809444479, -0.130504409, 0.116721066,\t\t-0.0102485335, 0.0540193266, -0.113614708,\t\t-0.000365296938, -0.00412161469, 0.693511405\t);\n\tvec3 RGB = lms * LMSRGB;\n\tRGB.rgb = color.rgb - RGB.rgb;\n\tRGB.g = 0.7*RGB.r + RGB.g;\n\tRGB.b = 0.7*RGB.r + RGB.b;\n\tcolor.rgb = color.rgb + RGB.rgb;\n\tgl_FragColor = color;\n}\n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source"},type:{title:"Type",type:"enum",uniform:"cbtype",defaultValue:"0.2",options:[["0.0","Off"],["0.2","Protanope"],["0.6","Deuteranope"],["0.8","Tritanope"]]}},title:"Daltonize",description:"Add contrast to colours to assist CVD (colour-blind) users."})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){var e=[0.2,0.3,0.5,0.8],b=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);a.plugin("directionblur",function(d){var t,q,h={amount:0,angle:0,inputScale:1,resolution:[this.width,this.height],transform:b,projection:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};return{initialize:function(b){b();
(b=this.gl)&&(t=[new a.util.FrameBuffer(b,this.width,this.height),new a.util.FrameBuffer(b,this.width,this.height)])},commonShader:!0,shader:function(a,b){var e=this.gl,e=10<=e.getParameter(e.MAX_VARYING_VECTORS)?"#define USE_VARYINGS":"";q=this.baseShader;b.vertex=[e,"precision mediump float;\nattribute vec4 position;\nattribute vec2 texCoord;\nuniform vec2 resolution;\nuniform mat4 projection;\nuniform mat4 transform;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform float angle;\nuniform float amount;\nuniform float inputScale;\nconst vec2 zero = vec2(0.0, 0.0);\n#ifdef USE_VARYINGS\nvec2 one;\nvec2 amount1;\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying vec2 vTexCoord3;\nvarying vec2 vTexCoord4;\nvarying vec2 vTexCoord5;\nvarying vec2 vTexCoord6;\nvarying vec2 vTexCoord7;\nvarying vec2 vTexCoord8;\n#else\nvarying vec2 one;\nvarying vec2 amount1;\n#endif\nvoid main(void) {\n\tvec4 screenPosition = vec4(position.xy * resolution / 2.0, position.z, position.w);\n\tscreenPosition = transform * screenPosition;\n\tgl_Position = screenPosition;\n\tgl_Position.xy = screenPosition.xy * 2.0 / resolution;\n\tgl_Position.z = screenPosition.z * 2.0 / (resolution.x / resolution.y);\n\tvTexCoord = texCoord;\n\tvPosition = gl_Position;\n\tone = vec2(1.0, 1.0) * inputScale;\n\tif (inputScale < 1.0) {\n\t\tone -= 1.0 / resolution;\n\t}\n\tvTexCoord = max(zero, min(one, texCoord.st * inputScale));\n\tamount1 = vec2(cos(angle), sin(angle)) * amount * 5.0 / resolution;\n#ifdef USE_VARYINGS\n\tvec2 amount2 = amount1 * 3.0;\n\tvec2 amount3 = amount1 * 6.0;\n\tvec2 amount4 = amount1 * 9.0;\n\tvec2 amount5 = -amount1;\n\tvec2 amount6 = amount5 * 3.0;\n\tvec2 amount7 = amount5 * 6.0;\n\tvec2 amount8 = amount5 * 9.0;\n\tvTexCoord1 = max(zero, min(one, vTexCoord + amount1));\n\tvTexCoord2 = max(zero, min(one, vTexCoord + amount2));\n\tvTexCoord3 = max(zero, min(one, vTexCoord + amount3));\n\tvTexCoord4 = max(zero, min(one, vTexCoord + amount4));\n\tvTexCoord5 = max(zero, min(one, vTexCoord + amount5));\n\tvTexCoord6 = max(zero, min(one, vTexCoord + amount6));\n\tvTexCoord7 = max(zero, min(one, vTexCoord + amount7));\n\tvTexCoord8 = max(zero, min(one, vTexCoord + amount8));\n#endif\n}"].join("\n");
b.fragment=[e,"precision mediump float;\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform float angle;\nuniform float amount;\nuniform float inputScale;\n#ifdef USE_VARYINGS\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying vec2 vTexCoord3;\nvarying vec2 vTexCoord4;\nvarying vec2 vTexCoord5;\nvarying vec2 vTexCoord6;\nvarying vec2 vTexCoord7;\nvarying vec2 vTexCoord8;\n#else\nvarying vec2 amount1;\nvarying vec2 one;\nconst vec2 zero = vec2(0.0, 0.0);\n#endif\nvoid main(void) {\n#ifndef USE_VARYINGS\n\tvec2 vTexCoord1 = max(zero, min(one, vTexCoord + amount1));\n\tvec2 vTexCoord2 = max(zero, min(one, vTexCoord + amount1 * 3.0));\n\tvec2 vTexCoord3 = max(zero, min(one, vTexCoord + amount1 * 6.0));\n\tvec2 vTexCoord4 = max(zero, min(one, vTexCoord + amount1 * 9.0));\n\tvec2 vTexCoord5 = max(zero, min(one, vTexCoord - amount1));\n\tvec2 vTexCoord6 = max(zero, min(one, vTexCoord - amount1 * 3.0));\n\tvec2 vTexCoord7 = max(zero, min(one, vTexCoord - amount1 * 6.0));\n\tvec2 vTexCoord8 = max(zero, min(one, vTexCoord - amount1 * 9.0));\n#endif\n\tgl_FragColor = texture2D(source, vTexCoord) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord1) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord2) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord3) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord4) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord5) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord6) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord7) / 9.0;\n\tgl_FragColor += texture2D(source, vTexCoord8) / 9.0;\n}"].join("\n");
return b},draw:function(a,b,d,g,l){var m,v,D,L,C,O={width:0,height:0,blend:!1},M=1;if(D=this.inputs.amount)if(0.01>=D)l(a,b,d,g);else{h.amount=D;h.angle=this.inputs.angle;h.projection[0]=this.height/this.width;for(d=0;d<e.length;d++)v=Math.min(1,e[d]/D),L=Math.floor(v*this.width),C=Math.floor(v*this.height),h.source=m?m.texture:this.inputs.source.texture,m=t[d%2],h.inputScale=M,M=v,O.width=L,O.height=C,l(a,b,h,m.frameBuffer,null,O);h.source=m.texture;h.inputScale=M;l(a,b,h,g)}else l(q,b,d,g)},resize:function(){h.resolution[0]=
this.width;h.resolution[1]=this.height;t&&(t[0].resize(this.width,this.height),t[1].resize(this.width,this.height))},destroy:function(){t&&(t[0].destroy(),t[1].destroy(),t=null);q&&q.destroy();h=null}}},{inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},amount:{type:"number",uniform:"amount",defaultValue:0.4,min:0,max:1},angle:{type:"number",uniform:"angle",defaultValue:0}},title:"Directional Motion Blur"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("dither",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n#define mod4(a) (a >= 4 ? a - 4 : a)\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform vec2 resolution;\nconst mat4 dither = mat4(1.0, 33.0, 9.0, 41.0,49.0, 17.0, 57.0, 25.0,13.0, 45.0, 5.0, 37.0,61.0, 29.0, 53.0, 21.0);\nfloat find_closest(int x, int y, float c0) {\n\tfloat limit = 0.0;\n\tint x4 = mod4(x);\n\tint y4 = mod4(y);\n\tfor (int i = 0; i < 4; i++) {\n\t\tif (i == x4) {\n\t\t\tfor (int j = 0; j < 4; j++) {\n\t\t\t\tif (j == y4) {\n\t\t\t\t\tlimit = dither[i][j];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (x < 4) {\n\t\tif (y >= 4) {\n\t\t\tlimit += 3.0;\n\t\t}\n\t} else {\n\t\tif (y >= 4) {\n\t\t\tlimit += 1.0;\n\t\t} else {\n\t\t\tlimit += 2.0;\n\t\t}\n\t}\n\tlimit /= 65.0;\n\treturn c0 < limit ? 0.0 : 1.0;\n}\nvoid main (void)  {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tvec2 coord = vTexCoord * resolution;\n\tint x = int(mod(coord.x, 8.0));\n\tint y = int(mod(coord.y, 8.0));\n\tpixel.r = find_closest(x, y, pixel.r);\n\tpixel.g = find_closest(x, y, pixel.g);\n\tpixel.b = find_closest(x, y, pixel.b);\n\tgl_FragColor = pixel;\n}";
return b},inPlace:!1,inputs:{source:{type:"image",uniform:"source"}},title:"Dither"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){function e(a,b){var e;for(e=0;e<b.length;e++)b[e]*=a;return b}var b=Math.sqrt,m,t=[],q,h,f;q=[e(1/(2*b(2)),[1,b(2),1,0,0,0,-1,-b(2),-1]),e(1/(2*b(2)),[1,0,-1,b(2),0,-b(2),1,0,-1]),e(1/(2*b(2)),[0,-1,b(2),1,0,-1,-b(2),1,0]),e(1/(2*b(2)),[b(2),-1,0,-1,0,1,0,1,-b(2)]),e(0.5,[0,
1,0,-1,0,-1,0,1,0]),e(0.5,[-1,0,1,0,0,0,1,0,-1]),e(1/6,[1,-2,1,-2,4,-2,1,-2,1]),e(1/6,[-2,1,-2,1,4,1,-2,1,-2]),e(1/3,[1,1,1,1,1,1,1,1,1])];for(b=0;b<q.length;b++)for(m=0;m<q[b].length;m++)t.push(q[b][m]);h=new Float32Array(t);f=new Float32Array([1,2,1,0,0,0,-1,-2,-1,1,0,-1,2,0,-2,1,0,-1]);a.plugin("edge",{shader:function(a,b){b.fragment=("sobel"===a.mode?"#define N_MATRICES 2\n#define SOBEL\n":"#define N_MATRICES 9\n")+"#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float pixelWidth;\nuniform float pixelHeight;\nuniform mat3 G[9];\n\nvoid main(void) {\n\tmat3 I;\n\tfloat dp3, cnv[9];\n\tvec3 tc;\n\tfloat fi = 0.0, fj = 0.0;\n\tfor (int i = 0; i < 3; i++) {\n\t\tfj = 0.0;\n\t\tfor (int j = 0; j < 3; j++) {\n\t\t\tI[i][j] = length( texture2D(source, vTexCoord + vec2((fi - 1.0) * pixelWidth, (fj - 1.0) * pixelHeight)).rgb );\n\t\t\tfj += 1.0;\n\t\t};\n\t\tfi += 1.0;\n\t};\n\tfor (int i = 0; i < N_MATRICES; i++) {\n\t\tdp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\n\t\tcnv[i] = dp3 * dp3;\n\t};\n\n#ifdef SOBEL\n\ttc = vec3(0.5 * sqrt(cnv[0]*cnv[0]+cnv[1]*cnv[1]));\n#else\n\tfloat M = (cnv[4] + cnv[5]) + (cnv[6] + cnv[7]);\n\tfloat S = (cnv[0] + cnv[1]) + (cnv[2] + cnv[3]) + (cnv[4] + cnv[5]) + (cnv[6] + cnv[7]) + cnv[8];\n\ttc = vec3(sqrt(M/S));\n#endif\n\tgl_FragColor = vec4(tc, 1.0);\n}\n";
return b},draw:function(a,b,e,d,q){e.pixelWidth=1/this.width;e.pixelHeight=1/this.height;e["G[0]"]="sobel"===this.inputs.mode?f:h;q(a,b,e,d)},inputs:{source:{type:"image",uniform:"source"},mode:{type:"enum",shaderDirty:!0,defaultValue:"sobel",options:[["sobel","Sobel"],["frei-chen","Frei-Chen"]]}},description:"Edge Detect",title:"Edge Detect"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("emboss",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float amount;\n\nuniform vec2 dim;\n\nconst vec3 average = vec3(1.0 / 3.0);\n\nvoid main (void)  {\n\tvec2 offset = 1.0 / dim;\n\tvec4 pixel = vec4(0.5, 0.5, 0.5, 1.0);\n\tpixel -= texture2D(source, vTexCoord - offset) * amount;\n\tpixel += texture2D(source, vTexCoord + offset) * amount;\n\tfloat val = dot(pixel.rgb, average);\n\tpixel.rgb = vec3(val);\n\tgl_FragColor = pixel;\n\n} \n";
return b},draw:function(a,b,d,t,q){d.dim||(d.dim=[]);d.dim[0]=this.width;d.dim[1]=this.height;q(a,b,d,t)},inputs:{source:{type:"image",uniform:"source"},amount:{type:"number",uniform:"amount",defaultValue:1}},title:"Emboss",categories:[],description:"Emboss"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("exposure",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\n\nuniform float exposure;\n\n//constant variables.\nconst float sqrtoftwo = 1.41421356237;\n\n\nvoid main (void)  {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tgl_FragColor = log2(vec4(pow(exposure + sqrtoftwo, 2.0))) * pixel;\n\n} \n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},exposure:{type:"number",uniform:"exposure",defaultValue:0.6,min:0,max:1}},title:"Exposure",categories:["film"],description:"Exposure control"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){var e={red:"rgba.r",blue:"rgba.b",green:"rgba.g",alpha:"rgba.a",x:"dim.x",y:"dim.y",width:"resolution.x",height:"resolution.y",a:"a",b:"b",c:"c",d:"d",luma:["luma","rgba"]},b={dim:"vec2 dim = vTexCoord * resolution;",rgba:"vec4 rgba = texture2D(source, vTexCoord);",luma:"float luma = dot(rgba.rgb, vec3(0.2125,0.7154,0.0721));",
atan2:{source:"#define atan2(x, y) atan(x / y)",global:!0},and:{source:"float and(float a, float b) {\n\tif (a == 0.0) {\n\t\treturn 0.0;\n\t}\n\treturn b;\n}",global:!0},or:{source:"float or(float a, float b) {\n\tif (a != 0.0) {\n\t\treturn a;\n\t}\n\treturn b;\n}",global:!0},luminance:{source:"const vec3 lumaCoeffs = vec3(0.2125,0.7154,0.0721);\nfloat luminance(float r, float g, float b) {\n\treturn dot(vec3(r, g, b), lumaCoeffs);\n}",global:!0},saturation:{source:"float saturation(float r, float g, float b) {\n\tfloat lo = min(r, min(g, b));\n\tfloat hi = max(r, max(g, b));\n\tfloat l = (lo + hi) / 2.0;\n\tfloat d = hi - lo;\n\treturn l > 0.5 ? d / (2.0 - hi - lo) : d / (hi + lo);\n}",
global:!0},lightness:{source:"float lightness(float r, float g, float b) {\n\tfloat lo = min(r, min(g, b));\n\tfloat hi = max(r, max(g, b));\n\treturn (lo + hi) / 2.0;\n}",global:!0},hue:{source:"float hue(float r, float g, float b) {\n\tfloat h;\n\tif (r > g && r > b) {\n\t\th = (g - b) / d + (g < b ? 6.0 : 0.0);\n\t} else if (g > r && g > b) {\n\t\th = (b - r) / d + 2.0;\n\t} else {\n\t\th = (r - g) / d + 4.0;\n\t}\n\treturn h / 6.0;\n}",global:!0}},m={radians:1,degrees:1,sin:1,cos:1,tan:1,asin:1,
acos:1,atan:1,pow:2,exp:1,log:1,exp2:1,log2:1,sqrt:1,inversesqrt:1,abs:1,sign:1,floor:1,ceil:1,fract:1,mod:2,min:2,max:2,clamp:3,mix:3,step:2,smoothstep:3,and:2,or:2,atan2:2,hue:3,saturation:3,lightness:3,luminance:3},t={"-":!0,"!":!0,"+":!0},q={"+":!1,"-":!1,"*":!1,"/":!1,"%":"mod","&&":"and","||":"or","===":"==","==":!0,"!==":"!=","!=":!0,">=":!0,"<=":!0,"<":!0,">":!0},h,f,n,k;"E LN2 LN10 LOG2E LOG10E PI SQRT1_2 SQRT2".split(" ").forEach(function(a){e[a]=a;b[a]={source:"const float "+a+" = "+Math[a]+
";",global:!0}});for(f in e)e.hasOwnProperty(f)&&(n=e[f],"string"===typeof n&&(n=[n]),h=n[0].split("."),1<h.length&&n.push(h[0]),e[f]=n);for(f in b)b.hasOwnProperty(f)&&(n=b[f],"string"===typeof n&&(b[f]={source:n,global:!1}));a.plugin("expression",function(){function a(){var b=h.inputs;b.rgb=b.blue===b.red&&b.green===b.blue?b.red:""}function f(){h.inputs.source&&(h.width=h.inputs.width=h.inputs.source.width,h.height=h.inputs.height=h.inputs.source.height)}var h=this;return{shader:function(a,f){function g(a){var f,
k,h,l;if("MemberExpression"===a.type)throw Error('Expression Error: Unknown object "'+(a.object.name||"this")+'"');if("BinaryExpression"===a.type||"LogicalExpression"===a.type){if(!a.right)throw Error("Expression Error: Bad binary expression");if(!a.left)return a.type="UnaryExpression",a.argument=a.right,g(a);f=a.operator;k=q[f];if(k===d)throw Error('Expression Error: Unknown operator "'+f+'"');if("string"===typeof k)if(k in q)f=q[k],k=q[f];else if(2===m[k])return u[k]=!0,k+"("+g(a.left)+", "+g(a.right)+
")";return(k?"float":"")+"("+g(a.left)+" "+f+" "+g(a.right)+")"}if("CallExpression"===a.type){if("Identifier"!==a.callee.type)throw Error("Expression Error: Unknown function");f=a.callee.name;k=m[f];if(k===d)throw Error('Expression Error: Unknown function "'+f+'"');if(k>a.arguments.length)throw Error('Expression Error: Function "'+f+'" requires at least '+k+" arguments");l=[];for(h=0;h<k;h++)l.push(g(a.arguments[h]));u[f]=!0;return f+"("+l.join(", ")+")"}if("Identifier"===a.type){l=e[a.name];if(!l)throw Error('Expression Error: Unknown identifier "'+
a.name+'"');for(h=l.length-1;0<=h;h--)k=l[h],b[k]&&(u[k]=!0);return l[0]}if("Literal"===a.type){if("true"===a.raw)return 1;if("true"===a.raw)return 0;if("number"!==typeof a.value||isNaN(a.value))throw Error("Expression Error: Invalid literal "+a.raw);a=a.value;a=0===a-Math.floor(a)?a+".0":a;return a}if("UnaryExpression"===a.type){f=a.operator;k=t[f];if(!k)throw Error('Expression Error: Unknown operator "'+f+'"');return f+"("+g(a.argument)+")"}}var h={},l={red:"",green:"",blue:"",alpha:""},n={},u,
E,H,G=[],s=[],x=[],y;for(H in l)l.hasOwnProperty(H)&&(E=a[H]||H,l[H]=E,h[E]="");for(E in h)if(h.hasOwnProperty(E))try{u={};y=k(E);h[E]=g(y);for(H in u)u.hasOwnProperty(H)&&(n[H]=u[H]);u.luma&&(n.rgba=!0)}catch(J){console.log(J.message),h[E]="0.0"}for(H in n)n.hasOwnProperty(H)&&(u=b[H])&&(u.global?G.push(u.source):s.push("\t"+u.source));for(H in l)l.hasOwnProperty(H)&&(E=l[H],x.push(h[E]));h=["precision mediump float;","varying vec2 vTexCoord;","varying vec4 vPosition;","uniform sampler2D source;",
"uniform float a, b, c, d;","uniform vec2 resolution;",G.join("\n"),"void main(void) {",s.join("\n"),"\tgl_FragColor = vec4(","\t\t"+x.join(",\n\t\t"),"\t);","}"];f.fragment=h.join("\n");return f},inputs:{source:{type:"image",uniform:"source",update:f,shaderDirty:!0},a:{type:"number",uniform:"a",defaultValue:0},b:{type:"number",uniform:"b",defaultValue:0},c:{type:"number",uniform:"c",defaultValue:0},d:{type:"number",uniform:"d",defaultValue:0},rgb:{type:"string",update:function(a){var b=h.inputs;
b.red=b.green=b.blue=a},shaderDirty:!0},red:{type:"string",update:a,shaderDirty:!0},green:{type:"string",update:a,shaderDirty:!0},blue:{type:"string",update:a,shaderDirty:!0},alpha:{type:"string",shaderDirty:!0},width:{type:"number",min:0,step:1,update:f,defaultValue:0},height:{type:"number",min:0,step:1,update:f,defaultValue:0}}}},{inPlace:!1,title:"Expression"});!function(a){var b={"-":!0,"!":!0,"~":!0,"+":!0},e={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,
"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},d=function(a){var b,e=0,d;for(d in a)(b=d.length)>e&&a.hasOwnProperty(d)&&(e=b);return e},f=d(b),k=d(e),h={"true":!0,"false":!1,"null":null},n=function(a,b,e){return{type:"||"===a||"&&"===a?"LogicalExpression":"BinaryExpression",operator:a,left:b,right:e}},q=function(a){return 48<=a&&57>=a},t=function(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a},m=function(a){for(var d,g,m=0,v=a.charAt,E=a.charCodeAt,A=function(b){return v.call(a,b)},
I=function(b){return E.call(a,b)},H=a.length,P=function(){for(var a=I(m);32===a||9===a;)a=I(++m)},U=function(){P();for(var b=a.substr(m,k),c=b.length;0<c;){if(e.hasOwnProperty(b))return m+=c,b;b=b.substr(0,--c)}return!1},c=function(){var a,b,c,d,f,k,g;if(k=w(),b=U(),!b)return k;if(f={value:b,prec:e[b]||0},g=w(),!g)throw Error("Expected expression after "+b+" at character "+m);for(d=[k,f,g];(b=U())&&(c=e[b]||0,0!==c);){for(f={value:b,prec:c};2<d.length&&c<=d[d.length-2].prec;)g=d.pop(),b=d.pop().value,
k=d.pop(),a=n(b,k,g),d.push(a);if(a=w(),!a)throw Error("Expected expression after "+b+" at character "+m);d.push(f);d.push(a)}b=d.length-1;for(a=d[b];1<b;)a=n(d[b-1].value,d[b-2],a),b-=2;return a},w=function(){var e,d;if(P(),e=I(m),q(e)||46===e){for(d="";q(I(m));)d+=A(m++);if("."===A(m))for(d+=A(m++);q(I(m));)d+=A(m++);if("e"===A(m)||"E"===A(m)){d+=A(m++);for("+"!==A(m)&&"-"!==A(m)||(d+=A(m++));q(I(m));)d+=A(m++);if(!q(I(m-1)))throw Error("Expected exponent ("+d+A(m)+") at character "+m);}if(t(I(m)))throw Error("Variable names cannot start with a number ("+
d+A(m)+") at character "+m);return{type:"Literal",value:parseFloat(d),raw:d}}if(39===e||34===e){e="";for(var k=A(m++),g=!1;H>m;){if(d=A(m++),d===k){g=!0;break}if("\\"===d)switch(d=A(m++)){case "n":e+="\n";break;case "r":e+="\r";break;case "t":e+="\t";break;case "b":e+="\b";break;case "f":e+="\f";break;case "v":e+="\x0B"}else e+=d}if(!g)throw Error('Unclosed quote after "'+e+'"');return{type:"Literal",value:e,raw:k+e+k}}if(t(e)){d=B();P();for(e=A(m);"."===e||"["===e||"("===e;){if("."===e)m++,P(),d=
{type:"MemberExpression",computed:!1,object:d,property:B()};else if("["===e){if(m++,d={type:"MemberExpression",computed:!0,object:d,property:c()},P(),e=A(m),"]"!==e)throw Error("Unclosed [ at character "+m);m++;P()}else if("("===e){m++;k=e=void 0;for(g=[];H>m;){if(P(),e=A(m),")"===e){m++;break}if(","===e)m++;else{if(k=c(),!k||"Compound"===k.type)throw Error("Expected comma at character "+m);g.push(k)}}d={type:"CallExpression",arguments:g,callee:d}}P();e=A(m)}return d}if(40===e){m++;d=c();if(P(),")"===
A(m))d=(m++,d);else throw Error("Unclosed ( at character "+m);return d}d=a.substr(m,f);for(e=d.length;0<e;){if(b.hasOwnProperty(d))return m+=e,{type:"UnaryExpression",operator:d,argument:w(),prefix:!0};d=d.substr(0,--e)}return!1},B=function(){var b,c=I(m),e=m;if(!t(c))throw Error("Unexpected "+A(m)+"at character "+m);for(m++;H>m&&(c=I(m),36===c||95===c||65<=c&&90>=c||97<=c&&122>=c||48<=c&&57>=c);)m++;return b=a.slice(e,m),h.hasOwnProperty(b)?{type:"Literal",value:h[b],raw:b}:"this"===b?{type:"ThisExpression"}:
{type:"Identifier",name:b}},T=[];H>m;)if(d=A(m),";"===d||","===d)m++;else if(g=c())T.push(g);else if(H>m)throw Error("Unexpected '"+A(m)+"' at character "+m);return 1===T.length?T[0]:{type:"Compound",body:T}};if(m.version="0.2.9",m.toString=function(){return"JavaScript Expression Parser (JSEP) v"+m.version},m.addUnaryOp=function(a){return b[a]=!0,this},m.addBinaryOp=function(a,b){return k=Math.max(a.length,k),e[a]=b,this},m.removeUnaryOp=function(a){return delete b[a],a.length===f&&(f=d(b)),this},
m.removeBinaryOp=function(a){return delete e[a],a.length===k&&(k=d(e)),this},"undefined"==typeof exports){var H=a.jsep;a.jsep=m;m.noConflict=function(){return a.jsep===m&&(a.jsep=H),m}}else"undefined"!=typeof module&&module.exports?exports=module.exports=m:exports.parse=m}(window);k=window.jsep.noConflict()});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("fader",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform vec4 color;\nuniform float amount;\n\nvoid main(void) {\n\tgl_FragColor = texture2D(source, vTexCoord);\n\tgl_FragColor = mix(gl_FragColor, color, amount);\n}\n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source"},color:{type:"color",uniform:"color",defaultValue:[0,0,0,1]},amount:{type:"number",uniform:"amount",defaultValue:0.5,min:0,max:1}},title:"Fader",description:"Fade image to a color"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("falsecolor",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float amount;\nuniform vec4 dark;\nuniform vec4 light;\nconst vec3 luma = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tfloat luminance = dot(pixel.rgb, luma);\n\tgl_FragColor = vec4( mix(dark.rgb, light.rgb, luminance), pixel.a);\n}\n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},dark:{type:"color",uniform:"dark",defaultValue:[0,0,0.5,1]},light:{type:"color",uniform:"light",defaultValue:[1,0,0,1]}},title:"False Color"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("filmgrain",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform vec2 resolution;\nuniform float time;\nuniform float amount;\nuniform bool colored;\nfloat timer;\nconst float permTexUnit = 1.0/256.0;\nconst float permTexUnitHalf = 0.5/256.0;\nvec4 rnm(in vec2 tc) {\n\tfloat noise = sin(dot(tc + vec2(timer,timer),vec2(12.9898,78.233))) * 43758.5453;\n\tfloat noiseR = fract(noise)*2.0-1.0;\n\tfloat noiseG = fract(noise*1.2154)*2.0-1.0; \n\tfloat noiseB = fract(noise*1.3453)*2.0-1.0;\n\tfloat noiseA = fract(noise*1.3647)*2.0-1.0;\n\t\n\treturn vec4(noiseR,noiseG,noiseB,noiseA);\n}\nfloat fade(in float t) {\n\treturn t*t*t*(t*(t*6.0-15.0)+10.0);\n}\nfloat pnoise3D(in vec3 p) {\n\tvec3 pi = permTexUnit*floor(p)+permTexUnitHalf;\n\tvec3 pf = fract(p);\n\tfloat perm00 = rnm(pi.xy).a ;\n\tvec3 grad000 = rnm(vec2(perm00, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n000 = dot(grad000, pf);\n\tvec3 grad001 = rnm(vec2(perm00, pi.z + permTexUnit)).rgb * 4.0 - 1.0;\n\tfloat n001 = dot(grad001, pf - vec3(0.0, 0.0, 1.0));\n\tfloat perm01 = rnm(pi.xy + vec2(0.0, permTexUnit)).a ;\n\tvec3 grad010 = rnm(vec2(perm01, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n010 = dot(grad010, pf - vec3(0.0, 1.0, 0.0));\n\tvec3 grad011 = rnm(vec2(perm01, pi.z + permTexUnit)).rgb * 4.0 - 1.0;\n\tfloat n011 = dot(grad011, pf - vec3(0.0, 1.0, 1.0));\n\tfloat perm10 = rnm(pi.xy + vec2(permTexUnit, 0.0)).a ;\n\tvec3 grad100 = rnm(vec2(perm10, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n100 = dot(grad100, pf - vec3(1.0, 0.0, 0.0));\n\tvec3 grad101 = rnm(vec2(perm10, pi.z + permTexUnit)).rgb * 4.0 - 1.0;\n\tfloat n101 = dot(grad101, pf - vec3(1.0, 0.0, 1.0));\n\tfloat perm11 = rnm(pi.xy + vec2(permTexUnit, permTexUnit)).a ;\n\tvec3 grad110 = rnm(vec2(perm11, pi.z)).rgb * 4.0 - 1.0;\n\tfloat n110 = dot(grad110, pf - vec3(1.0, 1.0, 0.0));\n\tvec3 grad111 = rnm(vec2(perm11, pi.z + permTexUnit)).rgb * 4.0 - 1.0;\n\tfloat n111 = dot(grad111, pf - vec3(1.0, 1.0, 1.0));\n\tvec4 n_x = mix(vec4(n000, n001, n010, n011), vec4(n100, n101, n110, n111), fade(pf.x));\n\tvec2 n_xy = mix(n_x.xy, n_x.zw, fade(pf.y));\n\tfloat n_xyz = mix(n_xy.x, n_xy.y, fade(pf.z));\n\treturn n_xyz;\n}\nvoid main(void) {\n\ttimer = mod(time, 10000.0) / 10000.0;\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tvec3 noise = vec3(pnoise3D(vec3(vTexCoord * resolution, timer + 0.0)));\n\tif (colored) {\n\t\tnoise.g = pnoise3D(vec3(vTexCoord * resolution, timer + 1.0));\n\t\tnoise.b = pnoise3D(vec3(vTexCoord * resolution, timer + 2.0));\n\t}\n\tgl_FragColor = vec4(pixel.rgb + noise * amount, pixel.a);\n}";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},time:{type:"number",uniform:"time"},amount:{type:"number",uniform:"amount",min:0,max:1,defaultValue:0.03},colored:{type:"boolean",uniform:"colored",defaultValue:!1}},title:"Film Grain",description:"Don't over-do it."})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("hex",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform vec2 resolution;\nuniform vec2 center;\nuniform float size;\n\nvoid main(void) {\n\tvec2 aspect = normalize(resolution);\n\tvec2 tex = (vTexCoord * aspect - center) / size;\n\ttex.y /= 0.866025404;\n\ttex.x -= tex.y * 0.5;\n\tvec2 a;\n\tif (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n\t\ta = vec2(floor(tex.x), floor(tex.y));\n\t} else {\n\t\ta = vec2(ceil(tex.x), ceil(tex.y));\n\t}\n\tvec2 b = vec2(ceil(tex.x), floor(tex.y));\n\tvec2 c = vec2(floor(tex.x), ceil(tex.y));\n\tvec3 tex3 = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n\tvec3 a3 = vec3(a.x, a.y, 1.0 - a.x - a.y);\n\tvec3 b3 = vec3(b.x, b.y, 1.0 - b.x - b.y);\n\tvec3 c3 = vec3(c.x, c.y, 1.0 - c.x - c.y);\n\tfloat alen =length(tex3 - a3);\n\tfloat blen =length(tex3 - b3);\n\tfloat clen =length(tex3 - c3);\n\tvec2 choice;\n\tif (alen < blen) {\n\t\tif (alen < clen) {\n\t\t\tchoice = a;\n\t\t} else {\n\t\t\tchoice = c;\n\t\t}\n\t} else {\n\t\tif (blen < clen) {\n\t\t\tchoice = b;\n\t\t} else {\n\t\t\tchoice = c;\n\t\t}\n\t}\n\tchoice.x += choice.y * 0.5;\n\tchoice.y *= 0.866025404;\n\tchoice *= size / aspect;\n\tgl_FragColor = texture2D(source, choice + center / aspect);\n}\n";
return b},inPlace:!1,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},size:{type:"number",uniform:"size",min:0,max:0.4,defaultValue:0.01},center:{type:"vector",uniform:"center",dimensions:2,defaultValue:[0,0]}},title:"Hex",description:"Hexagonal Pixelate"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("highlights-shadows",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float shadows;\nuniform float highlights;\nconst vec3 luma = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tfloat luminance = dot(pixel.rgb, luma);\n\tfloat shadow = clamp((pow(luminance, 1.0 / (shadows + 1.0)) + (-0.76) * pow(luminance, 2.0 / (shadows + 1.0))) - luminance, 0.0, 1.0);\n\tfloat highlight = clamp((1.0 - (pow(1.0 - luminance, 1.0 / (2.0 - highlights)) + (-0.8) * pow(1.0 - luminance, 2.0 / (2.0 - highlights)))) - luminance, -1.0, 0.0);\n\tvec3 rgb = (luminance + shadow + highlight) * (pixel.rgb / vec3(luminance));\n\tgl_FragColor = vec4(rgb, pixel.a);\n}\n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},highlights:{type:"number",uniform:"highlights",min:0,max:1,defaultValue:1},shadows:{type:"number",uniform:"shadows",min:0,max:1,defaultValue:0}},title:"Highlights/Shadows",description:"Darken highlights, lighten shadows"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("hue-saturation",{commonShader:!0,shader:function(a,b){b.vertex="#ifdef GL_ES\nprecision mediump float;\n#endif \nattribute vec4 position;\nattribute vec2 texCoord;\nuniform vec2 resolution;\nuniform mat4 projection;\nuniform mat4 transform;\nuniform float hue;\nuniform float saturation;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nvarying vec3 weights;\nvoid main(void) {\n\tfloat angle = hue * 3.14159265358979323846264;\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\tweights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\n\tvec4 screenPosition = vec4(position.xy * resolution / 2.0, position.z, position.w);\n\tscreenPosition = transform * screenPosition;\n\tgl_Position = screenPosition;\n\tgl_Position.xy = screenPosition.xy * 2.0 / resolution;\n\tgl_Position.z = screenPosition.z * 2.0 / (resolution.x / resolution.y);\n\tvTexCoord = texCoord;\n\tvPosition = gl_Position;\n}";
b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nvarying vec3 weights;\nuniform sampler2D source;\nuniform float hue;\nuniform float saturation;\nvoid main(void) {\n\tvec4 color = texture2D(source, vTexCoord);\n\tfloat len = length(color.rgb);\n\tcolor.rgb = vec3(dot(color.rgb, weights.xyz), dot(color.rgb, weights.zxy), dot(color.rgb, weights.yzx) );\n\tvec3 adjustment = (color.r + color.g + color.b) / 3.0 - color.rgb;\n\tif (saturation > 0.0) {\n\t\tadjustment *= (1.0 - 1.0 / (1.0 - saturation));\n\t} else {\n\t\tadjustment *= (-saturation);\n\t}\n\tcolor.rgb += adjustment;\n\tgl_FragColor = color;\n}";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source"},hue:{type:"number",uniform:"hue",defaultValue:0.4,min:-1,max:1},saturation:{type:"number",uniform:"saturation",defaultValue:0,min:-1,max:1}},title:"Hue/Saturation",description:"Rotate hue and multiply saturation."})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("invert",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\n\nvoid main(void) {\n\tgl_FragColor = texture2D(source, vTexCoord);\n\tgl_FragColor = vec4(1.0 - gl_FragColor.rgb, gl_FragColor.a);\n}\n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1}},title:"Invert",description:"Invert image color"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("kaleidoscope",{commonShader:!0,shader:function(a,b){b.fragment=["#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform float segments;\nuniform float offset;","const float PI = "+Math.PI+
";","const float TAU = 2.0 * PI;\nvoid main(void) {\n\tif (segments == 0.0) {\n\t\tgl_FragColor = texture2D(source, vTexCoord);\n\t} else {\n\t\tvec2 centered = vTexCoord - 0.5;\n\t\tfloat r = length(centered);\n\t\tfloat theta = atan(centered.y, centered.x);\n\t\ttheta = mod(theta, TAU / segments);\n\t\ttheta = abs(theta - PI / segments);\n\t\tvec2 newCoords = r * vec2(cos(theta), sin(theta)) + 0.5;\n\t\tgl_FragColor = texture2D(source, mod(newCoords - offset, 1.0));\n\t}\n}"].join("\n");return b},
inPlace:!0,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},segments:{type:"number",uniform:"segments",defaultValue:6},offset:{type:"number",uniform:"offset",defaultValue:0}},title:"Kaleidoscope"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){var e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),b=/\d+/;a.plugin("layers",function(a){function d(){h.resize()}var q,h=this,f={clear:!1},n;"number"===typeof a&&2<=a?q=a:(q=a&&a.count||4,q=Math.max(2,q));n={sizeMode:{type:"enum",defaultValue:"0",options:["union","intersection"],
update:function(){this.resize()}}};for(a=0;a<q;a++)n.sizeMode.options.push(a.toString()),n.sizeMode.options.push("source"+a),n["source"+a]={type:"image",update:d},n["opacity"+a]={type:"number",defaultValue:1,min:0,max:1};this.uniforms.layerResolution=[1,1];this.resize=function(){var a,e;a=this.inputs.sizeMode;var d,f,h;if("union"===a)for(d=e=a=0;d<q;d++){if(h=this.inputs["source"+d])a=Math.max(a,h.width),e=Math.max(e,h.height)}else if("intersection"===a)for(e=a=Infinity,d=0;d<q;d++){if(h=this.inputs["source"+
d])a=Math.min(a,h.width),e=Math.min(e,h.height)}else for(e=a=1,f=q-1,(d=b.exec(this.inputs.sizeMode))&&(f=Math.min(parseInt(d[0],10),f)),d=0;d<=f;d++)if(h=this.inputs["source"+d]){a=h.width;e=h.height;break}if(this.width!==a||this.height!==e)this.width=a,this.height=e,this.uniforms.resolution[0]=a,this.uniforms.resolution[1]=e,this.frameBuffer&&this.frameBuffer.resize(a,e),this.emit("resize"),this.setDirty();for(d=0;d<this.targets.length;d++)this.targets[d].resize()};return{commonShader:!0,shader:function(a,
b){b.vertex="precision mediump float;\nattribute vec4 position;\nattribute vec2 texCoord;\nuniform vec2 resolution;\nuniform vec2 layerResolution;\nuniform mat4 transform;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nvoid main(void) {\n\tvec4 screenPosition = vec4(position.xy * layerResolution / 2.0, position.z, position.w);\n\tscreenPosition = transform * screenPosition;\n\tgl_Position.xy = screenPosition.xy * 2.0 / layerResolution;\n\tgl_Position.z = screenPosition.z * 2.0 / (layerResolution.x / layerResolution.y);\n\tgl_Position.xy *= layerResolution / resolution;\n\tgl_Position.w = screenPosition.w;\n\tvTexCoord = texCoord;\n\tvPosition = gl_Position;\n}\n";
b.fragment="precision mediump float;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform float opacity;\nvoid main(void) {\n\tif (any(lessThan(vTexCoord, vec2(0.0))) || any(greaterThanEqual(vTexCoord, vec2(1.0)))) {\n\t\tgl_FragColor = vec4(0.0);\n\t} else {\n\t\tgl_FragColor = texture2D(source, vTexCoord);\n\t\tgl_FragColor *= opacity;\n\t}\n}";return b},requires:function(a,e){var d,f=q;(d=b.exec(this.inputs.sizeMode))&&(f=parseInt(d[0],10));return f>=q?!1:!(!e[a]||
!e["opacity"+f])},draw:function(a,b,d,h,n){var m,t,C;m=this.gl;m.viewport(0,0,this.width,this.height);m.bindFramebuffer(m.FRAMEBUFFER,h);m.clearColor(0,0,0,0);m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT);for(m=0;m<q;m++)C=this.inputs["source"+m],t=this.inputs["opacity"+m],C&&t&&(d.opacity=t,d.layerResolution[0]=C.width,d.layerResolution[1]=C.height,d.source=C,d.transform=C.cumulativeMatrix||e,n(a,b,d,h,null,f))},inputs:n}},{inPlace:!0,description:"Multiple layers",title:"Layers"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("linear-transfer",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform vec4 slope;\nuniform vec4 intercept;\nconst vec3 half3 = vec3(0.5);\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tgl_FragColor = pixel * slope + intercept;\n}";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source"},slope:{type:"vector",dimensions:4,uniform:"slope",defaultValue:[1,1,1,1]},intercept:{type:"vector",uniform:"intercept",dimensions:4,defaultValue:[0,0,0,0]}},title:"Linear Transfer",description:"For each color channel: [slope] * [value] + [intercept]"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("lumakey",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\n\nuniform float threshold;\nuniform float clipBlack;\nuniform float clipWhite;\nuniform bool invert;\n\nconst vec3 lumcoeff = vec3(0.2125,0.7154,0.0721);\n\nvoid main (void)  {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tfloat luma = dot(pixel.rgb,lumcoeff);\n\tfloat alpha = 1.0 - smoothstep(clipBlack, clipWhite, luma);\n\tif (invert) alpha = 1.0 - alpha;\n\tgl_FragColor = vec4(pixel.rgb, min(pixel.a, alpha) );\n\n} \n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},clipBlack:{type:"number",uniform:"clipBlack",defaultValue:0.9,min:0,max:1},clipWhite:{type:"number",uniform:"clipWhite",defaultValue:1,min:0,max:1},invert:{type:"boolean",uniform:"invert",defaultValue:!1}},title:"Luma Key",categories:["key"],description:""})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("nightvision",{commonShader:!0,shader:function(a,b,d){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float timer;\nuniform float luminanceThreshold;\nuniform float amplification;\nuniform vec3 nightVisionColor;\n\n"+
d.shader.makeNoise+"\nvoid main(void) {\n\tvec3 noise = vec3(makeNoise(vTexCoord.x, vTexCoord.y, timer), makeNoise(vTexCoord.x, vTexCoord.y, timer * 200.0 + 1.0), makeNoise(vTexCoord.x, vTexCoord.y, timer * 100.0 + 3.0));\n\tvec4 pixel = texture2D(source, vTexCoord + noise.xy * 0.0025);\n\tfloat luminance = dot(vec3(0.299, 0.587, 0.114), pixel.rgb);\n\tpixel.rgb *= step(luminanceThreshold, luminance) * amplification;\n\tgl_FragColor = vec4( (pixel.rgb + noise * 0.1) * nightVisionColor, pixel.a);\n}\n";
return b},inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},timer:{type:"number",uniform:"timer",defaultValue:0},luminanceThreshold:{type:"number",uniform:"luminanceThreshold",defaultValue:0.1,min:0,max:1},amplification:{type:"number",uniform:"amplification",defaultValue:1.4,min:0},color:{type:"color",uniform:"nightVisionColor",defaultValue:[0.1,0.95,0.2]}},title:"Night Vision",description:""})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("noise",{shader:function(a,b,d){d="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\n#define Blend(base, blend, funcf)\t\tvec3(funcf(base.r, blend.r), funcf(base.g, blend.g), funcf(base.b, blend.b))\n#define BlendOverlayf(base, blend) (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)))\n#define BlendOverlay(base, blend)\t\tBlend(base, blend, BlendOverlayf)\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\n\nuniform vec2 resolution;\nuniform float amount;\nuniform float timer;\n"+
d.shader.noiseHelpers+d.shader.snoise3d+d.shader.random+"void main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tfloat r = random(vec2(timer * vTexCoord.xy));\n\tfloat noise = snoise(vec3(vTexCoord * (1024.4 + r * 512.0), timer)) * 0.5;";d=a.overlay?d+"\tvec3 overlay = BlendOverlay(pixel.rgb, vec3(noise));\n\tpixel.rgb = mix(pixel.rgb, overlay, amount);\n":d+"\tpixel.rgb += noise * amount;\n";b.fragment=d+"\tgl_FragColor = pixel;\n}";return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source",
shaderDirty:!1},overlay:{type:"boolean",shaderDirty:!0,defaultValue:!0},amount:{type:"number",uniform:"amount",min:0,max:1,defaultValue:1},timer:{type:"number",uniform:"timer",defaultValue:0,step:1}},title:"Noise",description:"Add noise"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("polar",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float angle;\nconst float PI = "+Math.PI+";\n\nvoid main(void) {\n\tvec2 norm = (1.0 - vTexCoord) * 2.0 - 1.0;\n\tfloat theta = mod(PI + atan(norm.x, norm.y) - angle * (PI / 180.0), PI * 2.0);\n\tvec2 polar = vec2(theta / (2.0 * PI), length(norm));\n\tgl_FragColor = texture2D(source, polar);\n}\n";
return b},inPlace:!1,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},angle:{type:"number",uniform:"angle",defaultValue:0}},title:"Polar Coordinates",description:"Convert cartesian to polar coordinates"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){var e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),b=a.util.mat4;a.plugin("repeat",function(){function a(){h.resize()}var d={clear:!1},q=new Float32Array(16),h=this;this.resize=function(){var a=this.width,b=this.height,d=h.inputs.source;this.source?(a=this.source.width,
b=this.source.height):this.sources&&this.sources.source?(a=this.sources.source.width,b=this.sources.source.height):b=a=1;h.inputs.width?(a=h.inputs.width,h.inputs.height?b=h.inputs.height:d&&(b=a*d.height/d.width)):h.inputs.height&&(b=h.inputs.height,d&&(a=b*d.width/d.height));a=Math.floor(a);b=Math.floor(b);d&&(this.uniforms.resolution[0]=d.width,this.uniforms.resolution[1]=d.height);if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.uniforms.targetRes[0]=this.width,this.uniforms.targetRes[1]=
this.height,this.frameBuffer&&this.frameBuffer.resize(this.width,this.height),this.emit("resize"),this.setDirty();for(a=0;a<this.targets.length;a++)this.targets[a].resize()};this.uniforms.targetRes=[1,1];return{initialize:function(a){a();this.uniforms.transform=q},commonShader:!0,shader:function(a,b){b.vertex="precision mediump float;\nattribute vec4 position;\nattribute vec2 texCoord;\nuniform vec2 resolution;\nuniform vec2 targetRes;\nuniform mat4 transform;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nvoid main(void) {\n\tvec4 screenPosition = vec4(position.xy * resolution / 2.0, position.z, position.w);\n\tscreenPosition = transform * screenPosition;\n\tgl_Position = screenPosition;\n\tgl_Position.xy = screenPosition.xy * 2.0 / resolution;\n\tgl_Position.z = screenPosition.z * 2.0 / (resolution.x / resolution.y);\n\tgl_Position.xy *= resolution / targetRes;\n\tvTexCoord = texCoord;\n\tvPosition = gl_Position;\n}\n";
return b},draw:function(a,h,k,g,l){var m;m=this.inputs.source;var q=this.inputs.transform,D=q&&q.cumulativeMatrix,L=this.inputs.repeat,C=this.gl;D&&q.transformed?b.copy(k.transform,m&&m.cumulativeMatrix||e):L=Math.min(L,1);C.viewport(0,0,this.width,this.height);C.bindFramebuffer(C.FRAMEBUFFER,g);C.clearColor(0,0,0,0);C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT);for(m=L-1;0<=m;m--)l(a,h,k,g,null,d),m&&b.multiply(k.transform,D,k.transform)},inputs:{source:{type:"image",uniform:"source",update:function(){a();
this.uniforms.transform=q}},transform:{type:"image"},repeat:{type:"number",step:1,min:0,defaultValue:8},width:{type:"number",min:0,step:1,update:a,defaultValue:0},height:{type:"number",min:0,step:1,update:a,defaultValue:0}}}},{inPlace:!0,description:"Draw image multiple times, transforming each time",title:"Repeat"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("ripple",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float wave;\nuniform float distortion;\nuniform vec2 center;\n\nvoid main(void) {\n\tfloat scalar = abs(1.0 - abs(distance(vTexCoord, center)));\n\tfloat sinOffset = sin(wave / scalar);\n\tsinOffset = clamp(sinOffset, 0.0, 1.0);\n\tfloat sinSign = cos(wave / scalar);\n\tsinOffset = sinOffset * distortion / 32.0;\n\tgl_FragColor = texture2D(source, vTexCoord + sinOffset * sinSign);\n}\n";
return b},inPlace:!1,inputs:{source:{type:"image",uniform:"source"},wave:{type:"number",uniform:"wave",defaultValue:Math.PI/0.75},distortion:{type:"number",uniform:"distortion",defaultValue:1},center:{type:"vector",uniform:"center",dimensions:2,defaultValue:[0.5,0.5]}},title:"Ripple Distortion",description:""})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("scanlines",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float lines;\nuniform float width;\nuniform float intensity;\n\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tfloat darken = 2.0 * abs( fract(vPosition.y * lines / 2.0) - 0.5);\n\tdarken = clamp(darken - width + 0.5, 0.0, 1.0);\n\tdarken = 1.0 - ((1.0 - darken) * intensity);\n\tgl_FragColor = vec4(pixel.rgb * darken, 1.0);\n}\n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source"},lines:{type:"number",uniform:"lines",defaultValue:60},size:{type:"number",uniform:"size",defaultValue:0.2,min:0,max:1},intensity:{type:"number",uniform:"intensity",defaultValue:0.1,min:0,max:1}},title:"Scan Lines",description:""})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){var e=/\d+/;a.plugin("select",function(a){function d(){q.resize()}var t,q=this,h;"number"===typeof a&&2<=a?t=a:(t=a&&a.count||4,t=Math.max(2,t));h={active:{type:"number",step:1,min:0,max:t-1,defaultValue:0,update:d},sizeMode:{type:"enum",defaultValue:"0",options:["union","intersection",
"active"],update:d}};for(a=0;a<t;a++)h.sizeMode.options.push(a.toString()),h.sizeMode.options.push("source"+a),h["source"+a]={type:"image",update:d};this.uniforms.layerResolution=[1,1];this.resize=function(){var a,b;a=this.inputs.sizeMode;var d,g,h;if("union"===a)for(d=b=a=0;d<t;d++){if(h=this.inputs["source"+d])a=Math.max(a,h.width),b=Math.max(b,h.height)}else if("intersection"===a)for(b=a=Infinity,d=0;d<t;d++){if(h=this.inputs["source"+d])a=Math.min(a,h.width),b=Math.min(b,h.height)}else if("active"===
a)d=this.inputs.active,h=this.inputs["source"+d],a=Math.max(1,h&&h.width||1),b=Math.max(1,h&&h.height||1);else for(b=a=1,g=t-1,(d=e.exec(this.inputs.sizeMode))&&(g=Math.min(parseInt(d[0],10),g)),d=0;d<=g;d++)if(h=this.inputs["source"+d]){a=h.width;b=h.height;break}if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.emit("resize"),this.setDirty();for(d=0;d<this.targets.length;d++)this.targets[d].resize()};return{initialize:function(){this.initialized=!0;this.shaderDirty=!1},requires:function(a){return!(!this.inputs[a]||
a!=="source"+this.inputs.active)},draw:function(){var a;a=q.inputs["source"+q.inputs.active];q.texture=a&&a.texture},inputs:h}},{title:"Select",description:"Select a single source image from a list of source nodes.",inPlace:!1,commonShader:!0})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("sepia",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform vec4 light;\nuniform vec4 dark;\nuniform float desat;\nuniform float toned;\n\nconst mat4 coeff = mat4(0.393, 0.349, 0.272, 1.0,0.796, 0.686, 0.534, 1.0, 0.189, 0.168, 0.131, 1.0, 0.0, 0.0, 0.0, 1.0 );\n\nvoid main(void) {\n\tvec4 sourcePixel = texture2D(source, vTexCoord);\n\tgl_FragColor = coeff * sourcePixel;\n}\n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source"}},title:"Sepia",description:""})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("simplex",function(){function a(){b.resize()}var b=this;return{shader:function(a,b,d){function e(a){return 0===a-Math.floor(a)?a+".0":a}var f=1,n=1,k=0;b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform float amount;\nuniform vec2 noiseScale;\nuniform vec2 noiseOffset;\nuniform float time;\n"+
d.shader.noiseHelpers+d.shader.snoise3d+"void main(void) {\n\tfloat total = 0.0;\n\tvec3 pos = vec3(vTexCoord.xy * noiseScale + noiseOffset, time);\n";for(d=0;d<a.octaves;d++)f=Math.pow(2,d),n=Math.pow(a.persistence,d),k+=n,b.fragment+="\ttotal += snoise(pos * "+e(f)+") * "+e(n)+";\n";b.fragment+="\ttotal *= amount / "+e(k)+";\n\ttotal = (total + 1.0)/ 2.0;\n\tgl_FragColor = vec4(total, total, total, 1.0);\n}";return b},inputs:{source:{type:"image",uniform:"source"},noiseScale:{type:"vector",dimensions:2,
uniform:"noiseScale",defaultValue:[1,1]},noiseOffset:{type:"vector",dimensions:2,uniform:"noiseOffset",defaultValue:[0,0]},octaves:{type:"number",shaderDirty:!0,min:1,max:8,step:1,defaultValue:1},persistence:{type:"number",defaultValue:0.5,min:0,max:0.5},amount:{type:"number",uniform:"amount",min:0,defaultValue:1},time:{type:"number",uniform:"time",defaultValue:0},width:{type:"number",min:0,step:1,update:a,defaultValue:0},height:{type:"number",min:0,step:1,update:a,defaultValue:0}}}},{title:"Simplex Noise",
description:"Generate Simplex Noise"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("sketch",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform vec2 resolution;\n\nfloat res = resolution.x;\nfloat n0 = 97.0 / res;\nfloat n1 = 15.0 / res;\nfloat n2 = 97.0 / res;\nfloat n3 = 9.7 / res;\nfloat total = n2 + ( 4.0 * n0 ) + ( 4.0 * n1 );\nconst vec3 div3 = vec3(1.0 / 3.0);\n\nvoid main(void) {\n\tfloat offset, temp1, temp2;\n\tvec4 m, p0, p1, p2, p3, p4, p5, p6, p7, p8;\n\toffset = n3;\n\tp0=texture2D(source,vTexCoord);\n\tp1=texture2D(source,vTexCoord+vec2(-offset,-offset));\n\tp2=texture2D(source,vTexCoord+vec2( offset,-offset));\n\tp3=texture2D(source,vTexCoord+vec2( offset, offset));\n\tp4=texture2D(source,vTexCoord+vec2(-offset, offset));\n\toffset=n3*2.0;\n\tp5=texture2D(source,vTexCoord+vec2(-offset,-offset));\n\tp6=texture2D(source,vTexCoord+vec2( offset,-offset));\n\tp7=texture2D(source,vTexCoord+vec2( offset, offset));\n\tp8=texture2D(source,vTexCoord+vec2(-offset, offset));\n\tm = (p0 * n2 + (p1 + p2 + p3 + p4) * n0 + (p5 + p6 + p7 + p8) * n1) / total;\n\ttemp1 = dot(p0.rgb, div3);\n\ttemp2 = dot(m.rgb, div3);\n\tif (temp2 <= 0.0005) {\n\t\tgl_FragColor = vec4( 1.0, 1.0, 1.0, p0.a);\n\t} else {\n\t\tgl_FragColor = vec4( vec3(min(temp1 / temp2, 1.0)), p0.a);\n\t}\n}\n";return b},
inPlace:!1,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1}},title:"Sketch",description:"Pencil/charcoal sketch"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("split",function(){var a,b=[1,1],d=[1,1];this.resize=function(){var a,e;a=this.inputs.sizeMode;var h;h=this.inputs.sourceA;var f=this.inputs.sourceB;"a"===a||"b"===a?(e="a"===a?h:f)?(a=e.width,e=e.height):e=a=1:h?f?(e="union"===a?Math.max:Math.min,a=e(h.width,f.width),
e=e(h.height,f.height)):(a=h.width,e=h.height):f?(a=f.width,e=f.height):e=a=1;if(this.width!==a||this.height!==e)this.width=a,this.height=e,this.uniforms.resolution[0]=a,this.uniforms.resolution[1]=e,this.frameBuffer&&this.frameBuffer.resize(a,e),this.emit("resize"),this.setDirty();h&&(b[0]=h.width,b[1]=h.height);f&&(d[0]=f.width,d[1]=f.height);for(h=0;h<this.targets.length;h++)this.targets[h].resize()};return{initialize:function(t){t();this.uniforms.resolutionA=b;this.uniforms.resolutionB=d;a=this.baseShader},
commonShader:!0,shader:function(a,b){b.vertex="#ifdef GL_ES\nprecision mediump float;\n#endif \nattribute vec4 position;\nattribute vec2 texCoord;\nuniform vec2 resolution;\nuniform vec2 resolutionA;\nuniform vec2 resolutionB;\nuniform mat4 projection;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoordA;\nvarying vec2 vTexCoordB;\nvarying vec4 vPosition;\nuniform float angle;\nvarying float c;\nvarying float s;\nvarying float t;\nvoid main(void) {\n   c = cos(angle);\n   s = sin(angle);\n\tt = abs(c + s);\n\tvec4 screenPosition = vec4(position.xy * resolution / 2.0, position.z, position.w);\n\tgl_Position.xy = screenPosition.xy * 2.0 / resolution;\n\tgl_Position.z = screenPosition.z * 2.0 / (resolution.x / resolution.y);\n\tgl_Position.w = screenPosition.w;\n\tvec2 adjustedTexCoord = (texCoord - 0.5) * resolution;\n\tvTexCoordA = adjustedTexCoord / resolutionA + 0.5;\n\tvTexCoordB = adjustedTexCoord / resolutionB + 0.5;\n\tvTexCoord = texCoord;\n\tvPosition = gl_Position;\n}";
b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoordA;\nvarying vec2 vTexCoordB;\nvarying vec4 vPosition;\nvarying float c;\nvarying float s;\nvarying float t;\nuniform sampler2D sourceA;\nuniform sampler2D sourceB;\nuniform float split;\nuniform float angle;\nuniform float fuzzy;\nvec4 textureLookup(sampler2D tex, vec2 texCoord) {\n\tif (any(lessThan(texCoord, vec2(0.0))) || any(greaterThan(texCoord, vec2(1.0)))) {\n\t\treturn vec4(0.0);\n\t} else {\n\t\treturn texture2D(tex, texCoord);\n\t}\n}\nvoid main(void) {\n\tfloat mn = (split - fuzzy * (1.0 - split));\n\tfloat mx = (split + fuzzy * split);;\n\tvec2 coords = vTexCoord - vec2(0.5);\n\tcoords = vec2(coords.x * c - coords.y * s, coords.x * s + coords.y * c);\n\tfloat scale = max(abs(c - s), abs(s + c));\n\tcoords /= scale;\n\tcoords += vec2(0.5);\n\tfloat x = coords.x;;\n\tif (x <= mn) {\n\t\tgl_FragColor = textureLookup(sourceB, vTexCoordB);\n\t\treturn;\n\t}\n\tif (x >= mx) {\n\t\tgl_FragColor = textureLookup(sourceA, vTexCoordA);\n\t\treturn;\n\t}\n\tvec4 pixel1 = textureLookup(sourceA, vTexCoordA);\n\tvec4 pixel2 = textureLookup(sourceB, vTexCoordB);\n\tgl_FragColor = mix(pixel2, pixel1, smoothstep(mn, mx, x));\n}";
return b},draw:function(b,d,h,f,n){1<=h.split?(h.source=h.sourceB,n(a,d,h,f)):0>=h.split?(h.source=h.sourceA,n(a,d,h,f)):n(b,d,h,f)},inPlace:!1,requires:function(a,b){return"sourceA"===a&&1<=b.split||"sourceB"===a&&0>=b.split?!1:!0}}},{inputs:{sourceA:{type:"image",uniform:"sourceA",shaderDirty:!1,update:function(){this.resize()}},sourceB:{type:"image",uniform:"sourceB",shaderDirty:!1,update:function(){this.resize()}},sizeMode:{type:"enum",defaultValue:"a",options:["a","b","union","intersection"],
update:function(){this.resize()}},split:{type:"number",uniform:"split",defaultValue:0.5,min:0,max:1},angle:{type:"number",uniform:"angle",defaultValue:0},fuzzy:{type:"number",uniform:"fuzzy",defaultValue:0,min:0,max:1}},description:"Split screen or wipe",title:"Split"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("tone",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform vec4 light;\nuniform vec4 dark;\nuniform float desat;\nuniform float toned;\n\nconst vec3 lumcoeff = vec3(0.2125,0.7154,0.0721);\n\nvoid main(void) {\n\tvec4 sourcePixel = texture2D(source, vTexCoord);\n\tvec3 sceneColor = light.rgb * sourcePixel.rgb;\n\tvec3 gray = vec3(dot(lumcoeff, sceneColor));\n\tvec3 muted = mix(sceneColor, gray, desat);\n\tvec3 tonedColor = mix(dark.rgb, light.rgb, gray);\n\tgl_FragColor = vec4(mix(muted, tonedColor, toned), sourcePixel.a);\n}\n";
return b},inPlace:!0,inputs:{source:{type:"image",uniform:"source"},light:{type:"color",uniform:"light",defaultValue:[1,0.9,0.5,1]},dark:{type:"color",uniform:"dark",defaultValue:[0.2,0.05,0,1]},toned:{type:"number",uniform:"toned",defaultValue:1,minimumRange:0,maximumRange:1},desat:{type:"number",uniform:"desat",defaultValue:0.5,minimumRange:0,maximumRange:1}},title:"Tone",description:""})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("tvglitch",function(){var d,b,m,t,q,h;return{initialize:function(b){var n,k,g,l;h=this.gl;d=this.height;l=[];k=0.3-0.02;g=0.8-0.2;for(n=0;20>n;n++)l.push(2*Math.random()-1),l.push(Math.random()*g+0.2),l.push(Math.random()*k+0.02),l.push(0.2*Math.random());m=h.createBuffer();
h.bindBuffer(h.ARRAY_BUFFER,m);h.bufferData(h.ARRAY_BUFFER,new Float32Array(l),h.STATIC_DRAW);m.itemSize=4;m.numItems=20;t=new a.util.ShaderProgram(h,"#ifdef GL_ES\nprecision mediump float;\n#endif \n\nattribute vec4 particle;\n\nuniform float time;\nuniform float height;\n\nvarying float intensity;\n\nvoid main(void) {\n\tfloat y = particle.x + time * particle.y;\n\ty = fract((y + 1.0) / 2.0) * 4.0 - 2.0;\n\tintensity = particle.w;\n\tgl_Position = vec4(0.0, -y , 1.0, 2.0);\n\tgl_PointSize = height * particle.z;\n}\n",
"#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying float intensity;\n\nvoid main(void) {\n\tgl_FragColor = vec4(1.0);\n\tgl_FragColor.a = 2.0 * intensity * (1.0 - abs(gl_PointCoord.y - 0.5));\n}\n");q=new a.util.FrameBuffer(h,1,Math.max(1,this.height/2));b()},commonShader:!0,shader:function(b,d){d.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\n#define HardLight(top, bottom)  (1.0 - 2.0 * (1.0 - top) * (1.0 - bottom))\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform sampler2D particles;\nuniform float time;\nuniform float scanlines;\nuniform float lineSync;\nuniform float lineHeight;\nuniform float distortion;\nuniform float vsync;\nuniform float bars;\nuniform float frameSharpness;\nuniform float frameShape;\nuniform float frameLimit;\nuniform vec4 frameColor;\n\n"+
a.util.shader.noiseHelpers+a.util.shader.snoise2d+"\nvoid main(void) {\n\tvec2 texCoord = vTexCoord;\n\tfloat drandom = snoise(vec2(time * 50.0, texCoord.y /lineHeight));\n\tfloat distortAmount = distortion * (drandom - 0.25) * 0.5;\n\tvec4 particleOffset = texture2D(particles, vec2(0.0, texCoord.y));\n\tdistortAmount -= lineSync * (2.0 * particleOffset.a - 0.5);\n\ttexCoord.x -= distortAmount;\n\ttexCoord.x = mod(texCoord.x, 1.0);\n\tfloat roll;\n\tif (vsync != 0.0) {\n\t\troll = fract(time / vsync);\n\t\ttexCoord.y = mod(texCoord.y - roll, 1.0);\n\t}\n\tvec4 pixel = texture2D(source, texCoord);\n\tfloat barsAmount = particleOffset.r;\n\tif (barsAmount > 0.0) {\n\t\tpixel = vec4(pixel.r + bars * barsAmount,pixel.g + bars * barsAmount,pixel.b + bars * barsAmount,pixel.a);\n\t}\n\tif (mod(texCoord.y / lineHeight, 2.0) < 1.0 ) {\n\t\tpixel.rgb *= (1.0 - scanlines);\n\t}\n\tfloat f = (1.0 - vPosition.x * vPosition.x) * (1.0 - vPosition.y * vPosition.y);\n\tfloat frame = clamp( frameSharpness * (pow(f, frameShape) - frameLimit), 0.0, 1.0);\n\tgl_FragColor = mix(frameColor, pixel, frame); //vec4(vec3(particleOffset), 1.0);\n}\n";
return d},resize:function(){q.resize(1,Math.max(1,this.height/2))},draw:function(a,n,k,g,l){var u=b!==this.inputs.time,v;d!==this.height&&(d=this.height,u=!0);k.lineHeight=1/this.height;this.inputs.verticalSync?(v=0.2/this.inputs.verticalSync,k.vsync=v):(v=1,k.vsync=0);k.time=this.inputs.time%(1E4*v)/1E3;k.distortion=Math.random()*this.inputs.distortion;u&&(this.inputs.lineSync||this.inputs.bars)&&(t.use(),h.viewport(0,0,1,this.height/2),h.bindFramebuffer(h.FRAMEBUFFER,q.frameBuffer),h.clear(h.COLOR_BUFFER_BIT|
h.DEPTH_BUFFER_BIT),h.enableVertexAttribArray(t.location.particle),h.bindBuffer(h.ARRAY_BUFFER,m),h.vertexAttribPointer(t.location.particle,m.itemSize,h.FLOAT,!1,0,0),h.enable(h.BLEND),h.blendFunc(h.SRC_ALPHA,h.ONE),t.time.set(k.time),t.height.set(this.height),h.drawArrays(h.POINTS,0,20),b=this.inputs.time);k.particles=q.texture;l(a,n,k,g)},destroy:function(){m=null;q&&(q.destroy(),q=null)}}},{inPlace:!1,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},time:{type:"number",defaultValue:0},
distortion:{type:"number",defaultValue:0.1,min:0,max:1},verticalSync:{type:"number",defaultValue:0.1,min:0,max:1},lineSync:{type:"number",uniform:"lineSync",defaultValue:0.2,min:0,max:1},scanlines:{type:"number",uniform:"scanlines",defaultValue:0.3,min:0,max:1},bars:{type:"number",uniform:"bars",defaultValue:0,min:0,max:1},frameShape:{type:"number",uniform:"frameShape",min:0,max:2,defaultValue:0.27},frameLimit:{type:"number",uniform:"frameLimit",min:-1,max:1,defaultValue:0.34},frameSharpness:{type:"number",
uniform:"frameSharpness",min:0,max:40,defaultValue:8.4},frameColor:{type:"color",uniform:"frameColor",defaultValue:[0,0,0,1]}},title:"TV Glitch"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){a.plugin("vignette",{commonShader:!0,shader:function(a,b){b.fragment="#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float amount;\n\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tvec2 pos = vTexCoord.xy - 0.5;\n\tfloat vignette = 1.0 - (dot(pos, pos) * amount);\n\tgl_FragColor = vec4(pixel.rgb * vignette, pixel.a);\n}\n";return b},
inPlace:!1,inputs:{source:{type:"image",uniform:"source"},amount:{type:"number",uniform:"amount",defaultValue:1,min:0}},title:"Vignette",description:"Vignette"})});
(function(a,d){"object"===typeof exports?d(require("seriously")):"function"===typeof define&&define.amd?define(["seriously"],d):(a.Seriously||(a.Seriously={plugin:function(a,b){this[a]=b}}),d(a.Seriously))})(this,function(a,d){var e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);a.plugin("whitebalance",function(){function b(b,d){var g,m,C;if(q!==b||h!==d)if(q=b,h=d,m=Math.ceil(Math.log(Math.max(d,b))/n),g=Math.pow(2,m),g>l&&(m=Math.ceil(Math.log(l)/n),g=l),m++,f!==g){for(f=g;t.length>m;)t.pop().fb.destroy();
for(;t.length<m;)C=t.length,g=Math.pow(2,C),t.push({fb:new a.util.FrameBuffer(k.gl,g,g),opts:{width:g,height:g},uniforms:{level:t.length,offset:0.25/g,transform:e,projection:e,resolution:[g,g]}}),C&&(t[C-1].uniforms.source=t[C].fb.texture)}}var d,t=[],q,h,f,n=Math.log(2),k=this,g,l;return{initialize:function(a){g=this.gl;l=g.getParameter(g.MAX_TEXTURE_SIZE);this.inputs.auto&&b(this.width,this.height);a()},shader:function(b,e){var f=b.auto;f&&!d&&(d=new a.util.ShaderProgram(this.gl,e.vertex,"precision mediump float;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\nuniform float offset;\nuniform int level;\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord - vec2(offset)) +\n\t\ttexture2D(source, vTexCoord + vec2(offset, -offset)) +\n\t\ttexture2D(source, vTexCoord + vec2(offset)) +\n\t\ttexture2D(source, vTexCoord + vec2(-offset, offset));\n\tpixel /= 4.0;\n\tgl_FragColor = pixel;\n}"));
e.fragment=[f?"#define AUTO":"","precision mediump float;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nuniform sampler2D source;\n#ifdef AUTO\nuniform sampler2D whiteSource;\n#else\nuniform vec4 white;\n#endif\nconst vec3 luma = vec3(0.2125, 0.7154, 0.0721);\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n#ifdef AUTO\n\tvec4 white = texture2D(whiteSource, vTexCoord);\n#endif\n\tvec3 target = vec3(dot(white.rgb, luma));\n\tpixel.rgb = pixel.rgb * target / white.rgb;\n\tgl_FragColor = pixel;\n}"].join("\n");
return e},resize:function(){this.gl&&this.inputs.auto&&b(this.width,this.height)},draw:function(a,b,e,f,g){var h,k;if(this.inputs.auto){h=t.length-1;for(t[h].uniforms.source=e.source;0<=h;)k=t[h],g(d,b,k.uniforms,k.fb.frameBuffer,null,k.opts),h--;e.whiteSource=t[0].fb.texture}g(a,b,e,f)},destroy:function(){for(;t.length;)t.pop().destroy()},inPlace:!1,inputs:{source:{type:"image",uniform:"source",shaderDirty:!1},white:{type:"color",uniform:"white",defaultValue:[1,1,1]},auto:{type:"boolean",shaderDirty:!0,
defaultValue:!0}}}},{title:"White Balance"})});